function st(a,t,e,i){function s(n){return n instanceof e?n:new e(function(r){r(n)})}return new(e||(e=Promise))(function(n,r){function o(d){try{h(i.next(d))}catch(f){r(f)}}function l(d){try{h(i.throw(d))}catch(f){r(f)}}function h(d){d.done?n(d.value):s(d.value).then(o,l)}h((i=i.apply(a,t||[])).next())})}class O{constructor(t){this._value=t}get value(){return this._value/100}get percent(){return this._value}toString(){return""+this._value+"%"}interpolate(t,e){return t+this.value*(e-t)}static normalize(t,e,i){return t instanceof O?t:e===i?new O(0):new O(Math.min(Math.max((t-e)*(1/(i-e)),0),1)*100)}}function Pt(a){return new O(a)}const H=Pt(100),L=Pt(50);function Di(a){return a instanceof O}function gi(a){return Number(a)!==a}function rs(a){return{}.toString.call(a)}function rt(a){if(a!=null&&!T(a)){let t=Number(a);if(gi(t)&&Ft(a)&&a!=""&&a.match(/[0-9]+/)){const e=a.replace(/[^0-9.\-]+/g,"");return a===e?t:rt(e)}return t}return a}function as(a){if(si(a))return new Date(a);if(T(a))return new Date(a);{let t=Number(a);return T(t)?new Date(t):new Date(a)}}function os(a){if(gi(a))return"NaN";if(a===1/0)return"Infinity";if(a===-1/0)return"-Infinity";if(a===0&&1/a===-1/0)return"-0";let t=a<0;a=Math.abs(a);let e=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+a),i=e[1],s=e[2]||"",n;if(e[3]===void 0)n=s===""?i:i+"."+s;else{let r=+e[3];if(a<1){let o=r-1;n="0."+Ti("0",o)+i+s}else{let o=r-s.length;o===0?n=i+s:o<0?n=i+s.slice(0,o)+"."+s.slice(o):n=i+s+Ti("0",o)}}return t?"-"+n:n}function Ti(a,t){return new Array(t+1).join(a)}function si(a){return rs(a)==="[object Date]"}function Ft(a){return typeof a=="string"}function T(a){return typeof a=="number"&&Number(a)==a}function ve(a){return typeof a=="object"&&a!==null}const At="__§§§__",Vt="__§§§§__";function ne(a,t){const e=a.length;for(let i=0;i<e;++i)if(a[i]===t)return i;return-1}function ls(a,t){const e=a.length;for(let i=0;i<e;++i)if(t(a[i]))return!0;return!1}function ni(a,t){const e=a.length,i=new Array(e);for(let s=0;s<e;++s)i[s]=t(a[s],s);return i}function b(a,t){const e=a.length;for(let i=0;i<e;++i)t(a[i],i)}function ee(a,t){let e=a.length;for(;e>0;)--e,t(a[e],e)}function _i(a,t){const e=a.length;for(let i=0;i<e&&t(a[i],i);++i);}function vt(a,t){let e=!1,i=0;for(;;){if(i=a.indexOf(t,i),i===-1)return e;e=!0,a.splice(i,1)}}function tt(a,t){let e=a.indexOf(t);return e!==-1?(a.splice(e,1),!0):!1}function hs(a,t,e){let i=ne(a,t);i!==-1&&ri(a,i),a.push(t)}function re(a,t){a.indexOf(t)===-1&&a.push(t)}function ds(a){const t=a.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=a[i];return e}function Ke(a,t,e){a.splice(t,0,e)}function ri(a,t){a.splice(t,1)}function Wi(a,t){const e=a.length;for(let i=0;i<e;++i)if(t(a[i],i))return i;return-1}function cs(a,t){let e=a.length;for(;e>0;)if(--e,t(a[e],e))return e;return-1}function Yi(a,t){const e=Wi(a,t);if(e!==-1)return a[e]}function us(a,t){const e=cs(a,t);if(e!==-1)return a[e]}function fs(a,t){let e=0,i=a.length,s=!1;for(;e<i;){const n=e+i>>1,r=t(a[n]);r<0?e=n+1:r===0?(s=!0,e=n+1):i=n}return{found:s,index:s?e-1:e}}function ps(a,t){let e=0,i=a.length,s=!1;for(;e<i;){const n=e+i>>1,r=t(a[n]);r<0?e=n+1:(r===0&&(s=!0),i=n)}return{found:s,index:e}}function ze(a,t){let e=a.length;for(;e>0;)--e,t(a[e])||a.splice(e,1)}function bt(a){return Object.keys(a)}function _t(a){return Object.entries(a)}function gs(a,t){return bt(a).sort(t)}function _s(a){return Object.assign({},a)}function N(a,t){bt(a).forEach(e=>{t(e,a[e])})}function ms(a,t){for(let e in a)if(ys(a,e)&&!t(e,a[e]))break}function ys(a,t){return{}.hasOwnProperty.call(a,t)}class mi{constructor(){this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class K{constructor(t){this._disposed=!1,this._dispose=t}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class vs extends mi{constructor(){super(...arguments),this._disposers=[]}_dispose(){b(this._disposers,t=>{t.dispose()})}}class at extends mi{constructor(t){super(),this._disposers=t}_dispose(){b(this._disposers,t=>{t.dispose()})}get disposers(){return this._disposers}}class Ui extends K{constructor(){super(...arguments),this._counter=0}increment(){return++this._counter,new K(()=>{--this._counter,this._counter===0&&this.dispose()})}}function xs(a){a.parentNode&&a.parentNode.removeChild(a)}function U(a,t,e,i){return a.addEventListener(t,e,i||!1),new K(()=>{a.removeEventListener(t,e,i||!1)})}function Vi(a){return U(window,"resize",t=>{a()})}function It(a){switch(a){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function $e(a){return a.pointerId||0}function bs(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let a=document.createElement("button");a.style.position="fixed",a.style.top="0px",a.style.left="-10000px",document.body.appendChild(a),a.focus(),a.blur(),document.body.removeChild(a)}}function ws(a){a&&a.focus()}function ai(a){if(It("pointerevents"))return a;if(It("touchevents"))switch(a){case"pointerover":return"touchstart";case"pointerout":return"touchend";case"pointerleave":return"touchend";case"pointerdown":return"touchstart";case"pointermove":return"touchmove";case"pointerup":return"touchend";case"click":return"click";case"dblclick":return"dblclick"}else if(It("mouseevents"))switch(a){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerleave":return"mouseleave";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return a}function ki(a){if(typeof Touch<"u"&&a instanceof Touch)return!0;if(typeof PointerEvent<"u"&&a instanceof PointerEvent&&a.pointerType!=null)switch(a.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(a instanceof MouseEvent)}else if(a.type!=null&&a.type.match(/^mouse/))return!1;return!0}function xe(a,t,e){a.style[t]=e}function Ds(a,t){return a.style[t]}function Gi(a){if(a.composedPath){const t=a.composedPath();return t.length===0?null:t[0]}else return a.target}function Ts(a,t){let e=t;for(;;){if(a===e)return!0;if(e.parentNode===null){if(e.host==null)return!1;e=e.host}else e=e.parentNode}}function ks(a,t){return a.target&&Ts(t.root.dom,a.target)}function Yt(a,t){t?a.style.pointerEvents="auto":a.style.pointerEvents="none"}function be(a){if(a.key!==void 0)return a.key;switch(a.keyCode){case 9:return"Tab";case 13:return"Enter";case 16:return"Shift";case 17:return"Control";case 27:return"Escape";case 32:return" ";case 37:return"ArrowLeft";case 38:return"ArrowUp";case 39:return"ArrowRight";case 40:return"ArrowDown";case 46:return"Delete"}return""+a.keyCode}function Ss(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document}function Ps(){return Ss()?1:void 0}function X(a,t){return T(a)?a:a!=null&&T(a.value)&&T(t)?t*a.value:0}function Cs(a){let t=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function V(a,t=0,e="0"){return typeof a!="string"&&(a=a.toString()),t>a.length?Array(t-a.length+1).join(e)+a:a}function As(a){return a.replace(/^[\s]*/,"")}function Ms(a){return a.replace(/[\s]*$/,"")}function Xt(a){return As(Ms(a))}function Bs(a,t,e=!1,i="..."){if(a.length>t){let s=t-1;for(;s>=0&&a.charAt(s).match(/\w/);)s--;return s>=0&&e==!1?a.substring(0,s+1)+"...":a.substring(0,t)+i}else return a}function yi(a){return a.replace(/\/(date|number|duration)$/i,"")}function Si(a){return a&&a.replace(/<[^>]*>/g,"")}function Pi(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function Es(a){const t=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,e=/([^اأدذرزو]*[اأدذرزو])/gi;let i=a.split(/(\s+)/),s=[];return i.forEach(n=>{if(n.match(/^\s+$/))(n=" ")&&(n="  "),s.push(n);else if(t.test(n)){let r=n.split(e).filter(o=>o!=="");s=s.concat(r)}else s=s.concat([...n])}),s}function Ci(a,t=!1){const e=new Date(a.getFullYear(),0,0),i=a.getTime()-e.getTime()+(e.getTimezoneOffset()-a.getTimezoneOffset())*60*1e3,s=1e3*60*60*24;return Math.floor(i/s)}function Me(a,t=!1){const e=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),i=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-i);const s=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-s.getTime())/864e5+1)/7)}function Rs(a,t=!1){const e=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),i=e.getUTCDay()||7;return e.setUTCDate(e.getUTCDate()+4-i),new Date(Date.UTC(e.getUTCFullYear(),0,1)).getFullYear()}function Ls(a,t=!1){const e=Me(new Date(a.getFullYear(),a.getMonth(),1),t);let i=Me(a,t);return i==1&&(i=53),i-e+1}function Is(a,t,e=1,i=!1){let s=new Date(t,0,4,0,0,0,0);return i&&s.setUTCFullYear(t),a*7+e-((s.getDay()||7)+3)}function we(a,t){return a>12?a-=12:a===0&&(a=12),t!=null?a+(t-1):a}function De(a,t=!1,e=!1,i=!1,s){if(i)return t?"Coordinated Universal Time":"UTC";if(s){const o=a.toLocaleString("en-US",{timeZone:s}),l=a.toLocaleString("en-US",{timeZone:s,timeZoneName:t?"long":"short"});return Xt(l.substr(o.length))}let n=a.toLocaleString("UTC"),r=a.toLocaleString("UTC",{timeZoneName:t?"long":"short"}).substr(n.length);return e===!1&&(r=r.replace(/ (standard|daylight|summer|winter) /i," ")),Xt(r)}function Hs(a,t){const e=t||new Date(Date.UTC(2012,0,1,0,0,0,0)),i=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(e.toLocaleString("en-US",{timeZone:a})).getTime()-i.getTime())/6e4*-1}function fr(a){return a.charAt(0).toUpperCase()+a.slice(1)}function Xi(a){let t,e,i,s=a.h,n=a.s,r=a.l;if(n==0)t=e=i=r;else{let o=function(f,u,c){return c<0&&(c+=1),c>1&&(c-=1),c<.16666666666666666?f+(u-f)*6*c:c<.5?u:c<.6666666666666666?f+(u-f)*(.6666666666666666-c)*6:f},l=r<.5?r*(1+n):r+n-r*n,h=2*r-l;t=o(h,l,s+1/3),e=o(h,l,s),i=o(h,l,s-1/3)}return{r:Math.round(t*255),g:Math.round(e*255),b:Math.round(i*255)}}function Ki(a){let t=a.r/255,e=a.g/255,i=a.b/255,s=Math.max(t,e,i),n=Math.min(t,e,i),r=0,o=0,l=(s+n)/2;if(s===n)r=o=0;else{let h=s-n;switch(o=l>.5?h/(2-s-n):h/(s+n),s){case t:r=(e-i)/h+(e<i?6:0);break;case e:r=(i-t)/h+2;break;case i:r=(t-e)/h+4;break}r/=6}return{h:r,s:o,l}}function Os(a,t){return a&&{r:Math.max(0,Math.min(255,a.r+Ce(a.r,t))),g:Math.max(0,Math.min(255,a.g+Ce(a.g,t))),b:Math.max(0,Math.min(255,a.b+Ce(a.b,t))),a:a.a}}function Ce(a,t){let e=t>0?255-a:a;return Math.round(e*t)}function Fs(a,t){if(a){let e=Math.min(Math.max(a.r,a.g,a.b),230),i=Ce(e,t);return{r:Math.max(0,Math.min(255,Math.round(a.r+i))),g:Math.max(0,Math.min(255,Math.round(a.g+i))),b:Math.max(0,Math.min(255,Math.round(a.b+i))),a:a.a}}else return a}function Ai(a){return(a.r*299+a.g*587+a.b*114)/1e3>=128}function zs(a,t){if(a===void 0||t==1)return a;let e=Ki(a);return e.s=t,Xi(e)}function Ns(a,t={r:255,g:255,b:255},e={r:255,g:255,b:255}){let i=t,s=e;return Ai(e)&&(i=e,s=t),Ai(a)?s:i}function Ae(a,t){return a||(a=[]),[...a,...t].filter((e,i,s)=>s.indexOf(e)===i)}function pr(a,t){return!(!t||a.left!=t.left||a.right!=t.right||a.top!=t.top||a.bottom!=t.bottom)}function $i(a){return a[0]==="#"&&(a=a.substr(1)),a.length==3&&(a=a[0].repeat(2)+a[1].repeat(2)+a[2].repeat(2)),parseInt(a,16)}function Ws(a){a=a.replace(/[ ]/g,"");let t=a.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(t)t.push("1");else if(t=a.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!t)return 0;let e="";for(let i=1;i<=3;i++){let s=parseInt(t[i]).toString(16);s.length==1&&(s="0"+s),e+=s}return $i(e)}function Ut(a){return S.fromAny(a)}class S{constructor(t){this._hex=t|0}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return this._hex&255}toCSS(t=1){return"rgba("+this.r+", "+this.g+", "+this.b+", "+t+")"}toCSSHex(){return"#"+V(this.r.toString(16),2)+V(this.g.toString(16),2)+V(this.b.toString(16),2)}toHSL(t=1){return Ki({r:this.r,g:this.g,b:this.b})}static fromHSL(t,e,i){const s=Xi({h:t,s:e,l:i});return this.fromRGB(s.r,s.g,s.b)}toString(){return this.toCSSHex()}static fromHex(t){return new S(t)}static fromRGB(t,e,i){return new S((i|0)+(e<<8)+(t<<16))}static fromString(t){return new S($i(t))}static fromCSS(t){return new S(Ws(t))}static fromAny(t){if(Ft(t)){if(t[0]=="#")return S.fromString(t);if(t.substr(0,3)=="rgb")return S.fromCSS(t)}else{if(T(t))return S.fromHex(t);if(t instanceof S)return S.fromHex(t.hex)}throw new Error("Unknown color syntax: "+t)}static alternative(t,e,i){const s=Ns({r:t.r,g:t.g,b:t.b},e?{r:e.r,g:e.g,b:e.b}:void 0,i?{r:i.r,g:i.g,b:i.b}:void 0);return this.fromRGB(s.r,s.g,s.b)}static interpolate(t,e,i,s="rgb"){if(s=="hsl"){const n=e.toHSL(),r=i.toHSL();return S.fromHSL(kt(t,n.h,r.h),kt(t,n.s,r.s),kt(t,n.l,r.l))}else return S.fromRGB(kt(t,e.r,i.r),kt(t,e.g,i.g),kt(t,e.b,i.b))}static lighten(t,e){const i=Os({r:t.r,g:t.g,b:t.b},e);return S.fromRGB(i.r,i.g,i.b)}static brighten(t,e){const i=Fs({r:t.r,g:t.g,b:t.b},e);return S.fromRGB(i.r,i.g,i.b)}static saturate(t,e){const i=zs({r:t.r,g:t.g,b:t.b},e);return S.fromRGB(i.r,i.g,i.b)}}class qt{constructor(){this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const t=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{b(t,e=>{e.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}}hasListeners(){return this._listeners.length!==0}hasListenersByType(t){return ls(this._listeners,e=>(e.type===null||e.type===t)&&!e.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(t){delete this._disabled[t]}disableType(t,e=1/0){this._disabled[t]=e}_removeListener(t){if(this._iterating===0){const e=this._listeners.indexOf(t);if(e===-1)throw new Error("Invalid state: could not remove listener");this._listeners.splice(e,1)}else this._killed.push(t)}_removeExistingListener(t,e,i,s){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(n=>{n.once===t&&n.type===e&&(i===void 0||n.callback===i)&&n.context===s&&n.disposer.dispose()})}isEnabled(t){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(t)&&this._disabled[t]===void 0}removeType(t){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(e=>{e.type===t&&e.disposer.dispose()})}has(t,e,i){return Wi(this._listeners,n=>n.once!==!0&&n.type===t&&(e===void 0||n.callback===e)&&n.context===i)!==-1}_shouldDispatch(t){if(this._disposed)throw new Error("EventDispatcher is disposed");const e=this._disabled[t];return T(e)?(e<=1?delete this._disabled[t]:--this._disabled[t],!1):this._enabled}_eachListener(t){++this._iterating;try{b(this._listeners,t)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(b(this._killed,e=>{this._removeListener(e)}),this._killed.length=0)}}dispatch(t,e){this._shouldDispatch(t)&&this._eachListener(i=>{!i.killed&&(i.type===null||i.type===t)&&(i._debounceDelay?(i._debounceTimeout&&window.clearTimeout(i._debounceTimeout),i._debounceTimeout=window.setTimeout(()=>{i._debounceTimeout=void 0,i.killed||i.dispatch(t,e)},i._debounceDelay)):i.dispatch(t,e))})}_on(t,e,i,s,n,r,o){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(t,e,i,s);const l={type:e,callback:i,context:s,shouldClone:n,dispatch:r,killed:!1,once:t,disposer:new K(()=>{l.killed=!0,l._debounceTimeout&&window.clearTimeout(l._debounceTimeout),this._removeListener(l)}),_debounceDelay:o};return this._listeners.push(l),l}onAll(t,e,i=!0){return this._on(!1,null,t,e,i,(s,n)=>t.call(e,n)).disposer}on(t,e,i,s=!0){return this._on(!1,t,e,i,s,(n,r)=>e.call(i,r)).disposer}onDebounced(t,e,i,s,n=!0){return this._on(!1,t,e,s,n,(r,o)=>e.call(s,o),i).disposer}once(t,e,i,s=!0){const n=this._on(!0,t,e,i,s,(r,o)=>{n.disposer.dispose(),e.call(i,o)});return n.disposer}off(t,e,i){this._removeExistingListener(!1,t,e,i)}copyFrom(t){if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");const e=[];return b(t._listeners,i=>{!i.killed&&i.shouldClone&&(i.type===null?e.push(this.onAll(i.callback,i.context)):i.once?e.push(this.once(i.type,i.callback,i.context)):e.push(this.on(i.type,i.callback,i.context)))}),new at(e)}}function Mi(a){return st(this,void 0,void 0,function*(){if(a!==void 0){const t=[];N(a,(e,i)=>{t.push(i.waitForStop())}),yield Promise.all(t)}})}function kt(a,t,e){return t+a*(e-t)}function Ys(a,t,e){return a>=1?e:t}function ji(a,t,e){return new O(kt(a,t.percent,e.percent))}function Us(a,t,e){return S.interpolate(a,t,e)}function Vs(a,t){return typeof a=="number"&&typeof t=="number"?kt:a instanceof O&&t instanceof O?ji:a instanceof S&&t instanceof S?Us:Ys}var Ht;(function(a){a[a.Stopped=0]="Stopped",a[a.Playing=1]="Playing",a[a.Paused=2]="Paused"})(Ht||(Ht={}));function Jt(a,t){if(!(a>=0&&a<t))throw new Error("Index out of bounds: "+a)}class Ne{constructor(t=[]){this.events=new qt,this._values=t}get values(){return this._values}contains(t){return this._values.indexOf(t)!==-1}removeValue(t){let e=0,i=this._values.length;for(;e<i;)this._values[e]===t?(this.removeIndex(e),--i):++e}indexOf(t){return ne(this._values,t)}get length(){return this._values.length}hasIndex(t){return t>=0&&t<this._values.length}getIndex(t){return this._values[t]}_onPush(t){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:t})}_onInsertIndex(t,e){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e})}_onSetIndex(t,e,i){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:t,oldValue:e,newValue:i})}_onSwap(t,e){this.events.isEnabled("swap")&&this.events.dispatch("swap",{type:"swap",target:this,a:t,b:e})}_onRemoveIndex(t,e){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:t,oldValue:e})}_onMoveIndex(t,e,i){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:t,newIndex:e,value:i})}_onClear(t){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:t})}setIndex(t,e){Jt(t,this._values.length);const i=this._values[t];return i!==e&&(this._values[t]=e,this._onSetIndex(t,i,e)),i}insertIndex(t,e){return Jt(t,this._values.length+1),Ke(this._values,t,e),this._onInsertIndex(t,e),e}swap(t,e){const i=this._values.length;if(Jt(t,i),Jt(e,i),t!==e){const s=this._values[t],n=this._values[e];this._values[t]=n,this._values[e]=s,this._onSwap(s,n)}}removeIndex(t){Jt(t,this._values.length);const e=this._values[t];return ri(this._values,t),this._onRemoveIndex(t,e),e}moveValue(t,e){let i=this.indexOf(t);if(i!==-1)if(ri(this._values,i),e==null){const s=this._values.length;this._values.push(t),this._onMoveIndex(i,s,t)}else Ke(this._values,e,t),this._onMoveIndex(i,e,t);else e==null?(this._values.push(t),this._onPush(t)):(Ke(this._values,e,t),this._onInsertIndex(e,t));return t}push(t){return this._values.push(t),this._onPush(t),t}unshift(t){return this.insertIndex(0,t),t}pushAll(t){b(t,e=>{this.push(e)})}copyFrom(t){this.pushAll(t._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(t){const e=this._values;this._values=[],this._onClear(e),b(t,i=>{this._values.push(i),this._onPush(i)})}clear(){this.setAll([])}*[Symbol.iterator](){const t=this._values.length;for(let e=0;e<t;++e)yield this._values[e]}each(t){b(this._values,t)}eachReverse(t){ee(this._values,t)}}class qi extends Ne{constructor(){super(...arguments),this.autoDispose=!0,this._disposed=!1}swap(t,e){const i=this.autoDispose;this.autoDispose=!1,super.swap(t,e),this.autoDispose=i}_onSetIndex(t,e,i){this.autoDispose&&e.dispose(),super._onSetIndex(t,e,i)}_onRemoveIndex(t,e){this.autoDispose&&e.dispose(),super._onRemoveIndex(t,e)}_onClear(t){this.autoDispose&&b(t,e=>{e.dispose()}),super._onClear(t)}_dispose(){this.autoDispose&&b(this._values,t=>{t.dispose()})}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class je extends qi{constructor(t,e){super(),this.template=t,this.make=e}_dispose(){super._dispose(),this.autoDispose&&this.template.dispose()}}class Gs extends Ne{constructor(t){super(),this._disposed=!1,this._container=t,this._events=this.events.onAll(e=>{if(e.type==="clear")b(e.oldValues,i=>{this._onRemoved(i)});else if(e.type==="push")this._onInserted(e.newValue);else if(e.type==="setIndex")this._onRemoved(e.oldValue),this._onInserted(e.newValue,e.index);else if(e.type==="insertIndex")this._onInserted(e.newValue,e.index);else if(e.type==="removeIndex")this._onRemoved(e.oldValue);else if(e.type==="moveIndex")this._onRemoved(e.value),this._onInserted(e.value,e.newIndex);else throw new Error("Unknown IListEvent type")})}_onInserted(t,e){t._setParent(this._container,!0);const i=this._container._childrenDisplay;e===void 0?i.addChild(t._display):i.addChildAt(t._display,e)}_onRemoved(t){this._container._childrenDisplay.removeChild(t._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),b(this.values,t=>{t.dispose()}))}}const Zi=Math.PI,ae=Zi/180,ie=180/Zi;function gr(a,t,e){if(!T(t)||t<=0)return Math.round(a);{let i=Math.pow(10,t);return Math.round(a*i)/i}}function _r(a,t){if(!T(t)||t<=0)return Math.ceil(a);{let e=Math.pow(10,t);return Math.ceil(a*e)/e}}function q(a,t,e){return Math.min(Math.max(a,t),e)}function lt(a){return Math.sin(ae*a)}function mt(a){return Math.cos(ae*a)}function vi(a){return a=a%360,a<0&&(a+=360),a}function oi(a,t,e,i,s){let n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=-Number.MAX_VALUE,l=-Number.MAX_VALUE,h=[];h.push(qe(s,e)),h.push(qe(s,i));let d=Math.min(Math.floor(e/90)*90,Math.floor(i/90)*90),f=Math.max(Math.ceil(e/90)*90,Math.ceil(i/90)*90);for(let u=d;u<=f;u+=90)u>=e&&u<=i&&h.push(qe(s,u));for(let u=0;u<h.length;u++){let c=h[u];c.x<n&&(n=c.x),c.y<r&&(r=c.y),c.x>o&&(o=c.x),c.y>l&&(l=c.y)}return{left:a+n,top:t+r,right:a+o,bottom:t+l}}function qe(a,t){return{x:a*mt(t),y:a*lt(t)}}function Xs(a){const t=a.length;if(t>0){let e=a[0],i=e.left,s=e.top,n=e.right,r=e.bottom;if(t>1)for(let o=1;o<t;o++)e=a[o],i=Math.min(e.left,i),n=Math.max(e.right,n),s=Math.min(e.top,s),r=Math.max(e.bottom,r);return{left:i,right:n,top:s,bottom:r}}return{left:0,right:0,top:0,bottom:0}}function Ks(a,t){return a.x>=t.left&&a.y>=t.top&&a.x<=t.right&&a.y<=t.bottom}function Bi(a){return a}function St(a){return a*a*a}function Et(a){return function(t){return 1-a(1-t)}}class $s{constructor(t,e){this._userSettings={},this._entity=t,this._settings=e,N(e,i=>{this._userSettings[i]=!0})}get(t,e){const i=this._settings[t];return i!==void 0?i:e}setRaw(t,e){this._settings[t]=e}set(t,e){this._userSettings[t]=!0,this.setRaw(t,e)}remove(t){delete this._userSettings[t],delete this._settings[t]}setAll(t){_t(t).forEach(([e,i])=>{this.set(e,i)})}_eachSetting(t){N(this._settings,t)}apply(){const t={};t.stateAnimationEasing=!0,t.stateAnimationDuration=!0;const e=this._entity.states.lookup("default");this._eachSetting((i,s)=>{t[i]||(t[i]=!0,this!==e&&(i in e._settings||(e._settings[i]=this._entity.get(i))),this._entity.set(i,s))})}applyAnimate(t){t==null&&(t=this._settings.stateAnimationDuration),t==null&&(t=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let e=this._settings.stateAnimationEasing;e==null&&(e=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",St)));const i=this._entity.states.lookup("default"),s={};s.stateAnimationEasing=!0,s.stateAnimationDuration=!0;const n={};return this._eachSetting((r,o)=>{if(!s[r]){s[r]=!0,this!=i&&(r in i._settings||(i._settings[r]=this._entity.get(r)));const l=this._entity.animate({key:r,to:o,duration:t,easing:e});l&&(n[r]=l)}}),n}}class js{constructor(t){this._states={},this._entity=t}lookup(t){return this._states[t]}create(t,e){const i=this._states[t];if(i)return i.setAll(e),i;{const s=new $s(this._entity,e);return this._states[t]=s,s}}remove(t){delete this._states[t]}apply(t){const e=this._states[t];e&&e.apply(),this._entity._applyState(t)}applyAnimate(t,e){let i;const s=this._states[t];return s&&(i=s.applyAnimate(e)),this._entity._applyStateAnimated(t,e),i}}class qs{constructor(){this.version="5.16.0",this.licenses=[],this.entitiesById={},this.rootElements=[],this.autoDispose=!1}}const yt=new qs;function Ot(a,t){return a===t?0:a<t?-1:1}function Ji(a,t,e){const i=a.length,s=t.length,n=Math.min(i,s);for(let r=0;r<n;++r){const o=e(a[r],t[r]);if(o!==0)return o}return Ot(i,s)}function mr(a,t){return a===t?0:a<t?-1:1}class Zs{constructor(t){this._callbacks={},this._disabled={},this._entity=t}add(t,e){let i=this._callbacks[t];return i===void 0&&(i=this._callbacks[t]=[]),i.push(e),this._entity._markDirtyKey(t),new K(()=>{tt(i,e)&&this._entity._markDirtyKey(t)})}remove(t){const e=this._callbacks[t];e!==void 0&&(delete this._callbacks[t],e.length!==0&&this._entity._markDirtyKey(t))}enable(t){this._disabled[t]&&(delete this._disabled[t],this._entity._markDirtyKey(t))}disable(t){this._disabled[t]||(this._disabled[t]=!0,this._entity._markDirtyKey(t))}fold(t,e){if(!this._disabled[t]){const i=this._callbacks[t];if(i!==void 0)for(let s=0,n=i.length;s<n;++s)e=i[s](e,this._entity,t)}return e}}class Te{constructor(t,e,i,s,n,r,o){this._time=0,this._stopped=!1,this._playing=!0,this.events=new qt,this._animation=t,this._from=e,this._to=i,this._duration=s,this._easing=n,this._loops=r,this._interpolate=Vs(e,i),this._oldTime=o}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){!this._stopped&&!this._playing&&(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((t,e)=>{if(this._stopped)t();else{const i=()=>{s.dispose(),t()},s=this.events.on("stopped",i)}})}_checkEnded(){return this._loops>1?(--this._loops,!1):!0}_run(t){this._oldTime!==null&&(this._time+=t-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=t}_reset(t){this._oldTime=t,this._time=0}_value(t){return this._interpolate(this._easing(t),this._from,this._to)}}let Js=0;class Qi{constructor(t){this.uid=++Js,this._privateSettings={},this._settingEvents={},this._privateSettingEvents={},this._prevSettings={},this._prevPrivateSettings={},this._animatingSettings={},this._animatingPrivateSettings={},this._disposed=!1,this._userProperties={},this.enableDispose=!0,this._settings=t}_checkDirty(){bt(this._settings).forEach(t=>{this._userProperties[t]=!0,this._markDirtyKey(t)})}resetUserSettings(){this._userProperties={}}_runAnimation(t){let e=Ht.Stopped;if(!this.isDisposed()){let i=!1,s=!1;N(this._animatingSettings,(n,r)=>{if(r.stopped)this._stopAnimation(n);else if(r.playing){r._run(t);const o=r.percentage;o>=1?r._checkEnded()?this.set(n,r._value(1)):(i=!0,r._reset(t),this._set(n,r._value(1))):(i=!0,this._set(n,r._value(o)))}else s=!0}),N(this._animatingPrivateSettings,(n,r)=>{if(r.stopped)this._stopAnimationPrivate(n);else if(r.playing){r._run(t);const o=r.percentage;o>=1?r._checkEnded()?this.setPrivate(n,r._value(1)):(i=!0,r._reset(t),this._setPrivate(n,r._value(1))):(i=!0,this._setPrivate(n,r._value(o)))}else s=!0}),i?e=Ht.Playing:s&&(e=Ht.Paused)}return e}_markDirtyKey(t){this.markDirty()}_markDirtyPrivateKey(t){this.markDirty()}on(t,e){let i=this._settingEvents[t];return i===void 0&&(i=this._settingEvents[t]=[]),i.push(e),new K(()=>{tt(i,e),i.length===0&&delete this._settingEvents[t]})}off(t,e){let i=this._settingEvents[t];i!==void 0&&e!==void 0?tt(i,e):delete this._settingEvents[t]}onPrivate(t,e){let i=this._privateSettingEvents[t];return i===void 0&&(i=this._privateSettingEvents[t]=[]),i.push(e),new K(()=>{tt(i,e),i.length===0&&delete this._privateSettingEvents[t]})}offPrivate(t,e){let i=this._privateSettingEvents[t];i!==void 0&&e!==void 0?tt(i,e):delete this._privateSettingEvents[t]}getRaw(t,e){const i=this._settings[t];return i!==void 0?i:e}has(t){return t in this._settings}get(t,e){return this.getRaw(t,e)}_sendKeyEvent(t,e){const i=this._settingEvents[t];i!==void 0&&b(i,s=>{s(e,this,t)})}_sendPrivateKeyEvent(t,e){const i=this._privateSettingEvents[t];i!==void 0&&b(i,s=>{s(e,this,t)})}_setRaw(t,e,i){this._prevSettings[t]=e,this._sendKeyEvent(t,i)}setRaw(t,e){const i=this._settings[t];this._settings[t]=e,i!==e&&this._setRaw(t,i,e)}_set(t,e){const i=this._settings[t];this._settings[t]=e,i!==e&&(this._setRaw(t,i,e),this._markDirtyKey(t))}_stopAnimation(t){const e=this._animatingSettings[t];e&&(delete this._animatingSettings[t],e.stop())}set(t,e){return this._set(t,e),this._stopAnimation(t),e}remove(t){t in this._settings&&(this._prevSettings[t]=this._settings[t],delete this._settings[t],this._sendKeyEvent(t,void 0),this._markDirtyKey(t)),this._stopAnimation(t)}removeAll(){b(bt(this._settings),t=>{this.remove(t)})}getPrivate(t,e){const i=this._privateSettings[t];return i!==void 0?i:e}_setPrivateRaw(t,e,i){this._prevPrivateSettings[t]=e,this._sendPrivateKeyEvent(t,i)}setPrivateRaw(t,e){const i=this._privateSettings[t];this._privateSettings[t]=e,i!==e&&this._setPrivateRaw(t,i,e)}_setPrivate(t,e){const i=this._privateSettings[t];this._privateSettings[t]=e,i!==e&&(this._setPrivateRaw(t,i,e),this._markDirtyPrivateKey(t))}_stopAnimationPrivate(t){const e=this._animatingPrivateSettings[t];e&&(e.stop(),delete this._animatingPrivateSettings[t])}setPrivate(t,e){return this._setPrivate(t,e),this._stopAnimationPrivate(t),e}removePrivate(t){t in this._privateSettings&&(this._prevPrivateSettings[t]=this._privateSettings[t],delete this._privateSettings[t],this._markDirtyPrivateKey(t)),this._stopAnimationPrivate(t)}setAll(t){N(t,(e,i)=>{this.set(e,i)})}animate(t){const e=t.key,i=t.to,s=t.duration||0,n=t.loops||1,r=t.from===void 0?this.get(e):t.from,o=t.easing===void 0?Bi:t.easing;if(s===0)this.set(e,i);else if(r===void 0||r===i)this.set(e,i);else{this.set(e,r);const h=this._animatingSettings[e]=new Te(this,r,i,s,o,n,this._animationTime());return this._startAnimation(),h}const l=new Te(this,r,i,s,o,n,null);return l.stop(),l}animatePrivate(t){const e=t.key,i=t.to,s=t.duration||0,n=t.loops||1,r=t.from===void 0?this.getPrivate(e):t.from,o=t.easing===void 0?Bi:t.easing;if(s===0)this.setPrivate(e,i);else if(r===void 0||r===i)this.setPrivate(e,i);else{this.setPrivate(e,r);const h=this._animatingPrivateSettings[e]=new Te(this,r,i,s,o,n,this._animationTime());return this._startAnimation(),h}const l=new Te(this,r,i,s,o,n,null);return l.stop(),l}_dispose(){}isDisposed(){return this._disposed}dispose(){this.enableDispose&&!this._disposed&&(this._disposed=!0,this._dispose())}}class J extends Qi{constructor(t,e,i,s=[]){if(super(e),this.states=new js(this),this.adapters=new Zs(this),this.events=this._createEvents(),this._userPrivateProperties={},this._dirty={},this._dirtyPrivate={},this._templates=[],this._defaultThemes=[],this._templateDisposers=[],this._disposers=[],this._runSetup=!0,this._disposerProperties={},!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=t,this._internalTemplates=s,e.id&&this._registerId(e.id)}static new(t,e,i){const s=new this(t,e,!0);return s._template=i,s._afterNew(),s}static _new(t,e,i=[]){const s=new this(t,e,!0,i);return s._afterNew(),s}_afterNew(){this._checkDirty();let t=!1;const e=this._template;e&&(t=!0,e._setObjectTemplate(this)),b(this._internalTemplates,i=>{t=!0,i._setObjectTemplate(this)}),t&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const t=this._template;t&&t._setObjectTemplate(this),b(this._internalTemplates,e=>{e._setObjectTemplate(this)}),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new qt}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefaultFn(t,e){const i=this.get(t);if(i)return i;{const s=e();return this.set(t,s),s}}_setDefault(t,e){this.has(t)||super.set(t,e)}_setRawDefault(t,e){this.has(t)||super.setRaw(t,e)}_clearDirty(){bt(this._dirty).forEach(t=>{this._dirty[t]=!1}),bt(this._dirtyPrivate).forEach(t=>{this._dirtyPrivate[t]=!1})}isDirty(t){return!!this._dirty[t]}isPrivateDirty(t){return!!this._dirtyPrivate[t]}_markDirtyKey(t){this._dirty[t]=!0,super._markDirtyKey(t)}_markDirtyPrivateKey(t){this._dirtyPrivate[t]=!0,super._markDirtyKey(t)}isType(t){return this.classNames.indexOf(t)!==-1}_pushPropertyDisposer(t,e){let i=this._disposerProperties[t];return i===void 0&&(i=this._disposerProperties[t]=[]),i.push(e),e}_disposeProperty(t){const e=this._disposerProperties[t];e!==void 0&&(b(e,i=>{i.dispose()}),delete this._disposerProperties[t])}set template(t){const e=this._template;e!==t&&(this._template=t,e&&e._removeObjectTemplate(this),t&&t._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(t){}_applyStateAnimated(t,e){}get(t,e){const i=this.adapters.fold(t,this._settings[t]);return i!==void 0?i:e}isUserSetting(t){return this._userProperties[t]||!1}set(t,e){return this._userProperties[t]=!0,super.set(t,e)}setRaw(t,e){this._userProperties[t]=!0,super.setRaw(t,e)}_setSoft(t,e){return this._userProperties[t]?e:super.set(t,e)}remove(t){delete this._userProperties[t],this._removeTemplateProperty(t)}setPrivate(t,e){return this._userPrivateProperties[t]=!0,super.setPrivate(t,e)}setPrivateRaw(t,e){this._userPrivateProperties[t]=!0,super.setPrivateRaw(t,e)}removePrivate(t){delete this._userPrivateProperties[t],this._removeTemplatePrivateProperty(t)}_setTemplateProperty(t,e,i){if(!this._userProperties[e]){const s=this._findTemplateByKey(e);t===s&&super.set(e,i)}}_setTemplatePrivateProperty(t,e,i){if(!this._userPrivateProperties[e]){const s=this._findTemplateByPrivateKey(e);t===s&&super.setPrivate(e,i)}}_removeTemplateProperty(t){if(!this._userProperties[t]){const e=this._findTemplateByKey(t);e?super.set(t,e._settings[t]):super.remove(t)}}_removeTemplatePrivateProperty(t){if(!this._userPrivateProperties[t]){const e=this._findTemplateByPrivateKey(t);e?super.setPrivate(t,e._privateSettings[t]):super.removePrivate(t)}}_walkParents(t){t(this._root._rootContainer),t(this)}_applyStateByKey(t){const e=this.states.create(t,{}),i={};this._eachTemplate(s=>{const n=s.states.lookup(t);n&&n._apply(e,i)}),N(e._settings,s=>{!i[s]&&!e._userSettings[s]&&e.remove(s)})}_applyTemplate(t,e){this._templateDisposers.push(t._apply(this,e)),N(t._settings,(i,s)=>{!e.settings[i]&&!this._userProperties[i]&&(e.settings[i]=!0,super.set(i,s))}),N(t._privateSettings,(i,s)=>{!e.privateSettings[i]&&!this._userPrivateProperties[i]&&(e.privateSettings[i]=!0,super.setPrivate(i,s))}),this._runSetup&&t.setup&&(this._runSetup=!1,t.setup(this))}_findStaticTemplate(t){if(this._template&&t(this._template))return this._template}_eachTemplate(t){this._findStaticTemplate(e=>(t(e),!1)),ee(this._internalTemplates,t),b(this._templates,t)}_applyTemplates(t=!0){t&&this._disposeTemplates();const e={settings:{},privateSettings:{},states:{}};this._eachTemplate(i=>{this._applyTemplate(i,e)}),t&&(N(this._settings,i=>{!this._userProperties[i]&&!e.settings[i]&&super.remove(i)}),N(this._privateSettings,i=>{!this._userPrivateProperties[i]&&!e.privateSettings[i]&&super.removePrivate(i)}))}_findTemplate(t){const e=this._findStaticTemplate(t);if(e===void 0){const i=us(this._internalTemplates,t);return i===void 0?Yi(this._templates,t):i}else return e}_findTemplateByKey(t){return this._findTemplate(e=>t in e._settings)}_findTemplateByPrivateKey(t){return this._findTemplate(e=>t in e._privateSettings)}_disposeTemplates(){b(this._templateDisposers,t=>{t.dispose()}),this._templateDisposers.length=0}_removeTemplates(){b(this._templates,t=>{t._removeObjectTemplate(this)}),this._templates.length=0}_applyThemes(t=!1){if(this.get("ignoreThemes"))return!1;let e=!1;const i=[];let s=[];const n=new Set,r=this.get("themeTagsSelf");return r&&b(r,o=>{n.add(o)}),this._walkParents(o=>{o===this._root._rootContainer&&(e=!0),o._defaultThemes.length>0&&i.push(o._defaultThemes);const l=o.get("themes");l&&s.push(l);const h=o.get("themeTags");h&&b(h,d=>{n.add(d)})}),s=i.concat(s),this._removeTemplates(),(e||t)&&ee(this.classNames,o=>{const l=[];b(s,h=>{b(h,d=>{const f=d._lookupRules(o);f&&ee(f,u=>{if(u.tags.every(p=>n.has(p))){const p=ps(l,m=>{const g=Ot(u.tags.length,m.tags.length);return g===0?Ji(u.tags,m.tags,Ot):g});l.splice(p.index,0,u)}})})}),b(l,h=>{this._templates.push(h.template),h.template._setObjectTemplate(this)})}),this._applyTemplates(),(e||t)&&(this._runSetup=!1),e||t}_changed(){}_beforeChanged(){if(this.isDirty("id")){const t=this.get("id");t&&this._registerId(t);const e=this._prevSettings.id;e&&(delete this._root.entitiesById[e],delete yt.entitiesById[e])}}_registerId(t){if(this._root.entitiesById[t]&&this._root.entitiesById[t]!==this)throw new Error('An entity with id "'+t+'" already exists.');this._root.entitiesById[t]=this,yt.entitiesById[t]=this}_afterChanged(){}addDisposer(t){return this._disposers.push(t),t}_dispose(){super._dispose();const t=this._template;t&&t._removeObjectTemplate(this),b(this._internalTemplates,i=>{i._removeObjectTemplate(this)}),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach(i=>{i.dispose()}),N(this._disposerProperties,(i,s)=>{b(s,n=>{n.dispose()})});const e=this.get("id");e&&(delete this._root.entitiesById[e],delete yt.entitiesById[e])}setTimeout(t,e){const i=setTimeout(()=>{this.removeDispose(s),t()},e),s=new K(()=>{clearTimeout(i)});return this._disposers.push(s),s}removeDispose(t){if(!this.isDisposed()){let e=ne(this._disposers,t);e>-1&&this._disposers.splice(e,1)}t.dispose()}hasTag(t){return ne(this.get("themeTags",[]),t)!==-1}addTag(t){if(!this.hasTag(t)){const e=this.get("themeTags",[]);e.push(t),this.set("themeTags",e)}}removeTag(t){if(this.hasTag(t)){const e=this.get("themeTags",[]);vt(e,t),this.set("themeTags",e)}}_t(t,e,...i){return this._root.language.translate(t,e,...i)}get root(){return this._root}}J.className="Entity";J.classNames=["Entity"];function li(a){N(a,(t,e)=>{ve(e)&&typeof e.dispose=="function"&&(e.enableDispose=!0,e.dispose())})}class Qs{constructor(t,e,i){this._name=t,this._template=e,this._settings=i}_dispose(){li(this._settings)}get(t,e){const i=this._settings[t];return i!==void 0?i:e}set(t,e){this._settings[t]=e,this._template._stateChanged(this._name)}remove(t){delete this._settings[t],this._template._stateChanged(this._name)}setAll(t){bt(t).forEach(e=>{this._settings[e]=t[e]}),this._template._stateChanged(this._name)}_apply(t,e){N(this._settings,(i,s)=>{!e[i]&&!t._userSettings[i]&&(e[i]=!0,t.setRaw(i,s))})}}class tn{constructor(t){this._states={},this._template=t}_dispose(){N(this._states,(t,e)=>{e._dispose()})}lookup(t){return this._states[t]}create(t,e){const i=this._states[t];if(i)return i.setAll(e),i;{const s=new Qs(t,this._template,e);return this._states[t]=s,this._template._stateChanged(t),s}}remove(t){delete this._states[t],this._template._stateChanged(t)}_apply(t,e){N(this._states,(i,s)=>{let n=e.states[i];n==null&&(n=e.states[i]={});const r=t.states.create(i,{});s._apply(r,n)})}}class en{constructor(){this._callbacks={}}add(t,e){let i=this._callbacks[t];return i===void 0&&(i=this._callbacks[t]=[]),i.push(e),new K(()=>{tt(i,e),i.length===0&&delete this._callbacks[t]})}remove(t){this._callbacks[t]!==void 0&&delete this._callbacks[t]}_apply(t){const e=[];return N(this._callbacks,(i,s)=>{b(s,n=>{e.push(t.adapters.add(i,n))})}),new at(e)}}class Ct{constructor(t,e){if(this._disposed=!1,this._privateSettings={},this._settingEvents={},this._privateSettingEvents={},this._entities=[],this.states=new tn(this),this.adapters=new en,this.events=new qt,!e)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=t}static new(t){return new Ct(t,!0)}_dispose(){li(this._settings),li(this._privateSettings)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}_checkDisposed(){if(this._disposed)throw new Error("Template is disposed")}get entities(){return this._entities}get(t,e){this._checkDisposed();const i=this._settings[t];return i!==void 0?i:e}setRaw(t,e){this._checkDisposed(),this._settings[t]=e}set(t,e){this._checkDisposed(),this._settings[t]!==e&&(this.setRaw(t,e),this._entities.forEach(i=>{i._setTemplateProperty(this,t,e)}))}remove(t){this._checkDisposed(),t in this._settings&&(delete this._settings[t],this._entities.forEach(e=>{e._removeTemplateProperty(t)}))}removeAll(){this._checkDisposed(),N(this._settings,(t,e)=>{this.remove(t)})}getPrivate(t,e){this._checkDisposed();const i=this._privateSettings[t];return i!==void 0?i:e}setPrivateRaw(t,e){return this._checkDisposed(),this._privateSettings[t]=e,e}setPrivate(t,e){return this._checkDisposed(),this._privateSettings[t]!==e&&(this.setPrivateRaw(t,e),this._entities.forEach(i=>{i._setTemplatePrivateProperty(this,t,e)})),e}removePrivate(t){this._checkDisposed(),t in this._privateSettings&&(delete this._privateSettings[t],this._entities.forEach(e=>{e._removeTemplatePrivateProperty(t)}))}setAll(t){this._checkDisposed(),N(t,(e,i)=>{this.set(e,i)})}on(t,e){this._checkDisposed();let i=this._settingEvents[t];return i===void 0&&(i=this._settingEvents[t]=[]),i.push(e),new K(()=>{tt(i,e),i.length===0&&delete this._settingEvents[t]})}onPrivate(t,e){this._checkDisposed();let i=this._privateSettingEvents[t];return i===void 0&&(i=this._privateSettingEvents[t]=[]),i.push(e),new K(()=>{tt(i,e),i.length===0&&delete this._privateSettingEvents[t]})}_apply(t,e){this._checkDisposed();const i=[];return N(this._settingEvents,(s,n)=>{b(n,r=>{i.push(t.on(s,r))})}),N(this._privateSettingEvents,(s,n)=>{b(n,r=>{i.push(t.onPrivate(s,r))})}),this.states._apply(t,e),i.push(this.adapters._apply(t)),i.push(t.events.copyFrom(this.events)),new at(i)}_setObjectTemplate(t){this._checkDisposed(),this._entities.push(t)}_removeObjectTemplate(t){vt(this._entities,t)}_stateChanged(t){this._checkDisposed(),this._entities.forEach(e=>{e._applyStateByKey(t)})}}class We extends qt{constructor(t){super(),this._rendererDisposers={},this._dispatchParents=!0,this._sprite=t}_makePointerEvent(t,e){return{type:t,originalEvent:e.event,point:e.point,simulated:e.simulated,native:e.native,target:this._sprite}}_onRenderer(t,e){this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;let i=this._rendererDisposers[t];if(i===void 0){const s=this._sprite._display.on(t,n=>{e.call(this,n)});i=this._rendererDisposers[t]=new Ui(()=>{delete this._rendererDisposers[t],s.dispose()})}return i.increment()}_on(t,e,i,s,n,r,o){const l=super._on(t,e,i,s,n,r,o),h=We.RENDERER_EVENTS[e];return h!==void 0&&(l.disposer=new at([l.disposer,this._onRenderer(e,h)])),l}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(t,e){const i=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(t,e),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(t,e)}finally{this._dispatchParents=i}}}We.RENDERER_EVENTS={click:function(a){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",a))&&this.dispatch("click",this._makePointerEvent("click",a))},rightclick:function(a){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",a))},middleclick:function(a){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",a))},dblclick:function(a){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",a))},pointerover:function(a){const t=this._sprite;let e=!0;if(t.getPrivate("trustBounds")){t._getBounds();const i=t.globalBounds();if(t.isType("Graphics")){const s=t.get("strokeWidth",1)/2;s>=1&&(i.left-=s,i.right+=s,i.top-=s,i.bottom+=s)}Ks(a.point,i)||(e=!1,t._root._renderer.removeHovering(t._display))}e&&this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",a))},pointerout:function(a){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",a))},pointerdown:function(a){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",a))},pointerup:function(a){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",a))},globalpointerup:function(a){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",a))},globalpointermove:function(a){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",a))},wheel:function(a){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:a.event,point:a.point})}};class ft extends J{constructor(){super(...arguments),this._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},this._localBounds={left:0,right:0,top:0,bottom:0},this._sizeDirty=!1,this._isDragging=!1,this._isHidden=!1,this._isShowing=!1,this._isHiding=!1,this._isDown=!1,this._downPoints={}}_afterNew(){this.setPrivateRaw("visible",!0),super._afterNew()}markDirtyKey(t){this._markDirtyKey(t)}_markDirtyKey(t){super._markDirtyKey(t),(t=="x"||t=="y"||t=="dx"||t=="dy")&&(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(t){super._markDirtyPrivateKey(t),(t=="x"||t=="y")&&this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new We(this)}_processTemplateField(){let t;const e=this.get("templateField");if(e){const i=this.dataItem;if(i){const s=i.dataContext;s&&(t=s[e],!(t instanceof Ct)&&t&&(t=Ct.new(t)))}}this._templateField!==t&&(this._removeTemplateField(),this._templateField=t,t&&t._setObjectTemplate(this),this._applyTemplates())}_setDataItem(t){const e=this._dataItem;this._dataItem=t,this._processTemplateField();const i="dataitemchanged";t!=e&&this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,oldDataItem:e,newDataItem:t})}set dataItem(t){this._setDataItem(t)}get dataItem(){if(this._dataItem)return this._dataItem;{let t=this._parent;for(;t;){if(t._dataItem)return t._dataItem;t=t._parent}}}_addPercentageSizeChildren(){let t=this.parent;t&&(this.get("width")instanceof O||this.get("height")instanceof O?re(t._percentageSizeChildren,this):tt(t._percentageSizeChildren,this))}_addPercentagePositionChildren(){let t=this.parent;t&&(this.get("x")instanceof O||this.get("y")instanceof O?re(t._percentagePositionChildren,this):tt(t._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const t=this._localBounds;if(t){const e=this.get("centerX");e!=null&&(this._display.pivot.x=t.left+X(e,t.right-t.left));const i=this.get("centerY");i!=null&&(this._display.pivot.y=t.top+X(i,t.bottom-t.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty("tooltip")){const t=this._prevSettings.tooltip;t&&t.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){const t=this._tooltipMoveDp;t&&(t.dispose(),this._tooltipMoveDp=void 0);const e=this._tooltipPointerDp;e&&(e.dispose(),this._tooltipPointerDp=void 0),this.get("tooltipPosition")=="pointer"&&(this.isHover()&&(this._tooltipMoveDp=this.events.on("globalpointermove",i=>{this.showTooltip(i.point)})),this._tooltipPointerDp=new at([this.events.on("pointerover",()=>{this._tooltipMoveDp=this.events.on("globalpointermove",i=>{this.showTooltip(i.point)})}),this.events.on("pointerout",()=>{const i=this._tooltipMoveDp;i&&(i.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility())}_changed(){super._changed();const t=this._display,e=this.events;if(this.isDirty("draggable")){const s=this.get("draggable");s?(this.set("interactive",!0),this._dragDp=new at([e.on("pointerdown",n=>{this.dragStart(n)}),e.on("globalpointermove",n=>{this.dragMove(n)}),e.on("globalpointerup",n=>{this.dragStop(n)})])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),t.cancelTouch=!!s}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){const s=this.get("tooltipText"),n=this.get("tooltipHTML"),r=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(s||n)&&(r=="click"?(this._tooltipDp=new at([e.on("click",()=>{this.setTimeout(()=>{const o=this.getTooltip();o&&!o.isHidden()&&o.get("tooltipTarget")===this?this.hideTooltip():this.showTooltip()},10)}),U(document,"click",o=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)):r=="always"||(this._tooltipDp=new at([e.on("pointerover",()=>{this.showTooltip()}),e.on("pointerout",()=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)))}if(this.isDirty("toggleKey")){let s=this.get("toggleKey");s&&s!="none"?this._toggleDp=e.on("click",()=>{this._isDragging||this.set(s,!this.get(s))}):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(t.alpha=Math.max(0,this.get("opacity",1)),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("rotation")&&(this.markDirtyBounds(),t.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),t.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden")?(t.visible=!1,this.hideTooltip()):t.visible=!0,this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();const s=this.parent;s&&(this.isDirty("width")&&this.get("width")instanceof O||this.isDirty("height")&&this.get("height")instanceof O)&&(s.markDirty(),s._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight")||this.isDirty("marginLeft")||this.isDirty("marginTop")||this.isDirty("marginRight")||this.isDirty("marginBottom"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){const s=this.get("wheelable");s&&this.set("interactive",!0),t.wheelable=!!s}(this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(t.filter=this.get("filter"));let i=this.get("filter","");if(this.isDirty("blur")){const s=this.get("blur",0);s!=0&&(i+=" blur("+s+"px)")}if(this.isDirty("saturate")){const s=this.get("saturate",1);s!=1&&(i+=" saturate("+s+")")}if(this.isDirty("brightness")){const s=this.get("brightness",1);s!=1&&(i+=" brightness("+s+")")}if(this.isDirty("contrast")){const s=this.get("contrast",1);s!=1&&(i+=" contrast("+s+")")}if(this.isDirty("sepia")){const s=this.get("sepia",0);s!=0&&(i+=" sepia("+s+")")}if(this.isDirty("hue")){const s=this.get("hue",0);s!=0&&(i+=" hue-rotate("+s+"deg)")}if(this.isDirty("invert")){const s=this.get("invert",0);s!=0&&(i+=" invert("+s+")")}if(i&&(t.filter=i),this.isDirty("cursorOverStyle")&&(t.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new at([e.on("focus",()=>{this.showTooltip()}),e.on("blur",()=>{this.hideTooltip()})]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility(),this._disposers.push(e.on("blur",()=>{this.setPrivateRaw("touchHovering",!1)})),this._disposers.push(e.once("boundschanged",()=>{this.markDirtyAccessibility()}))),this.isPrivateDirty("focusable")&&this.markDirtyAccessibility(),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(t.exportable=this.get("exportable")),this.isDirty("interactive")){const s=this.events;this.get("interactive")&&!s.isDisposed()?this._hoverDp=new at([s.on("click",n=>{ki(n.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout(()=>{this._handleOver(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip(),this.setPrivateRaw("touchHovering",!0),this.events.dispatch("pointerover",{type:"pointerover",target:n.target,originalEvent:n.originalEvent,point:n.point,simulated:n.simulated})},10))}),s.on("globalpointerup",n=>{ki(n.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:n.target,originalEvent:n.originalEvent,point:n.point,simulated:n.simulated})),this._isDown&&this._handleUp(n)}),s.on("pointerover",()=>{this._handleOver()}),s.on("pointerout",()=>{this._handleOut()}),s.on("pointerdown",n=>{this._handleDown(n)})]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",null)),this.get("showTooltipOn")=="always"&&this._display.visible&&this.showTooltip()}dragStart(t){this._dragEvent=t,this.events.stopParentDispatch()}dragStop(t){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;const e="dragstop";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(t){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;const e=$e(t.originalEvent);delete this._downPoints[e],bt(this._downPoints).length==0&&(this._isDown=!1)}}_hasMoved(t){const e=$e(t.originalEvent),i=this._downPoints[e];if(i){const s=Math.abs(i.x-t.point.x),n=Math.abs(i.y-t.point.y);return s>5||n>5}return!1}_hasDown(){return bt(this._downPoints).length>0}_handleDown(t){const e=this.parent;if(e&&!this.get("draggable")&&e._handleDown(t),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:t.point.x,y:t.point.y},this._isDown=!0;const i=$e(t.originalEvent);this._downPoints[i]={x:t.point.x,y:t.point.y}}}dragMove(t){let e=this._dragEvent;if(e){if(e.simulated&&!t.simulated)return!0;let i=0,s=this.parent,n=1;for(;s!=null;)i+=s.get("rotation",0),s=s.parent,s&&(n*=s.get("scale",1));let r=(t.point.x-e.point.x)/n,o=(t.point.y-e.point.y)/n;const l=this.events;if(e.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=t,this._dragPoint={x:this.x(),y:this.y()};const h="dragstart";l.isEnabled(h)&&l.dispatch(h,{type:h,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}if(this._isDragging){let h=this._dragPoint;this.set("x",h.x+r*mt(i)+o*lt(i)),this.set("y",h.y+o*mt(i)-r*lt(i));const d="dragged";l.isEnabled(d)&&l.dispatch(d,{type:d,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}else if(Math.hypot(r,o)>5){this._isDragging=!0,this._dragEvent=t,this._dragPoint={x:this.x(),y:this.y()};const h="dragstart";l.isEnabled(h)&&l.dispatch(h,{type:h,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let t=this.parent,e=0;for(;;)if(t)++e,t=t.parent;else return e}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){const t=this._display;if(this.get("isMeasured")){this._root._addDirtyBounds(this),t.isMeasured=!0,t.invalidateBounds();const e=this.parent;e&&this.get("position")!="absolute"&&(e.get("width")==null||e.get("height")==null||e.get("layout"))&&e.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){const t=this._adjustedLocalBounds;let e;if(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden")?(e={left:0,right:0,top:0,bottom:0},this._localBounds=e,this._adjustedLocalBounds=e):(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),e=this._adjustedLocalBounds),!t||t.left!==e.left||t.top!==e.top||t.right!==e.right||t.bottom!==e.bottom){const i="boundschanged";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds()),this.getPrivate("showingTooltip")&&this.showTooltip()}}_fixMinBounds(t){let e=this.get("minWidth",this.getPrivate("minWidth")),i=this.get("minHeight",this.getPrivate("minHeight"));T(e)&&t.right-t.left<e&&(t.right=t.left+e),T(i)&&t.bottom-t.top<i&&(t.bottom=t.top+i);let s=this.getPrivate("width"),n=this.getPrivate("height");T(s)&&(s>0?t.right=t.left+s:t.left=t.right+s),T(n)&&(n>0?t.bottom=t.top+n:t.top=t.bottom+n)}_removeParent(t){t&&(t.children.removeValue(this),tt(t._percentageSizeChildren,this),tt(t._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1}hover(){this.isDisposed()||(this.showTooltip(),this._handleOver())}unhover(){this.isDisposed()||(this.hideTooltip(),this._handleOut())}showTooltip(t){if(!this.isDisposed()){const e=this.getTooltip(),i=this.get("tooltipText"),s=this.get("tooltipHTML");if((i||s)&&e){const n=this.get("tooltipPosition"),r=this.getPrivate("tooltipTarget",this);if((n=="fixed"||!t)&&(this._display._setMatrix(),t=this.toGlobal(r._getTooltipPoint())),n=="pointer"){const h=this.getPrivate("lastTooltipCoords");if(h&&h.x==t.x&&h.y==t.y)return;this.setPrivate("lastTooltipCoords",t)}e.set("pointTo",t),e.set("tooltipTarget",r),e.get("x")||e.set("x",t.x),e.get("y")||e.set("y",t.y),i&&e.label.set("text",i),s&&e.label.set("html",s);const o=this.dataItem;if(o&&e.label._setDataItem(o),this.get("showTooltipOn")=="always"&&(t.x<0||t.x>this._root.width()||t.y<0||t.y>this._root.height())){this.hideTooltip();return}e.label.text.markDirtyText();const l=e.show();return this.setPrivateRaw("showingTooltip",!0),l}}}hideTooltip(){const t=this.getTooltip();if(t&&(this.removePrivate("lastTooltipCoords"),t.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)||this.get("tooltip")==t)){let e=t.get("keepTargetHover")&&t.get("stateAnimationDuration",0)==0?400:void 0;const i=t.hide(e);return this.setPrivateRaw("showingTooltip",!1),i}}_getTooltipPoint(){const t=this._localBounds;if(t){let e=0,i=0;return this.get("isMeasured")?(e=t.left+X(this.get("tooltipX",0),t.right-t.left),i=t.top+X(this.get("tooltipY",0),t.bottom-t.top)):(e=X(this.get("tooltipX",0),this.width()),i=X(this.get("tooltipY",0),this.height())),{x:e,y:i}}return{x:0,y:0}}getTooltip(){let t=this.get("tooltip");if(t)return t;{let e=this.parent;if(e)return e.getTooltip()}}_updatePosition(){const t=this.parent;let e=this.get("dx",0),i=this.get("dy",0),s=this.get("x"),n=this.getPrivate("x"),r=0,o=0;const l=this.get("position");s instanceof O&&(t?s=t.innerWidth()*s.value+t.get("paddingLeft",0):s=0),T(s)?r=s+e:n!=null?r=n:t&&l=="relative"&&(r=t.get("paddingLeft",0)+e);let h=this.get("y"),d=this.getPrivate("y");h instanceof O&&(t?h=t.innerHeight()*h.value+t.get("paddingTop",0):h=0),T(h)?o=h+i:d!=null?o=d:t&&l=="relative"&&(o=t.get("paddingTop",0)+i);const f=this._display;if(f.x!=r||f.y!=o){f.invalidateBounds(),f.x=r,f.y=o;const u="positionchanged";this.events.isEnabled(u)&&this.events.dispatch(u,{type:u,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let t=this.get("x"),e=this.getPrivate("x");const i=this.parent;return i?t instanceof O?X(t,i.innerWidth())+i.get("paddingLeft",0):T(t)?t:e??i.get("paddingLeft",this._display.x):this._display.x}y(){let t=this.getPrivate("y");if(t!=null)return t;let e=this.get("y");const i=this.parent;return i?e instanceof O?X(e,i.innerHeight())+i.get("paddingTop",0):T(e)?e:t??i.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);const t=this.get("tooltip");t&&t.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const t=this._adjustedLocalBounds,e=this.x(),i=this.y();return{left:t.left+e,right:t.right+e,top:t.top+i,bottom:t.bottom+i}}globalBounds(){const t=this.localBounds(),e=this.toGlobal({x:t.left,y:t.top}),i=this.toGlobal({x:t.right,y:t.top}),s=this.toGlobal({x:t.right,y:t.bottom}),n=this.toGlobal({x:t.left,y:t.bottom});return{left:Math.min(e.x,i.x,s.x,n.x),top:Math.min(e.y,i.y,s.y,n.y),right:Math.max(e.x,i.x,s.x,n.x),bottom:Math.max(e.y,i.y,s.y,n.y)}}_onShow(t){}_onHide(t){}appear(t,e){return st(this,void 0,void 0,function*(){return yield this.hide(0),e?new Promise((i,s)=>{this.setTimeout(()=>{i(this.show(t))},e)}):this.show(t)})}show(t){return st(this,void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(t);const e=this.states.applyAnimate("default",t);yield Mi(e),this._isShowing=!1}})}hide(t){return st(this,void 0,void 0,function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let e=this.states.lookup("hidden");e||(e=this.states.create("hidden",{opacity:0,visible:!1})),this._isHidden=!0,this._onHide(t);const i=this.states.applyAnimate("hidden",t);yield Mi(i),this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!!(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden"))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const t=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*t:t}compositeScale(){const t=this.get("scale",1);return this._parent?this._parent.compositeScale()*t:t}compositeRotation(){const t=this.get("rotation",0);return this._parent?this._parent.compositeRotation()+t:t}width(){let t=this.get("width"),e=this.get("maxWidth",this.getPrivate("maxWidth")),i=this.get("minWidth",this.getPrivate("minWidth")),s=this.getPrivate("width"),n=0;if(T(s))n=s;else if(t==null)this._adjustedLocalBounds&&(n=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(t instanceof O){const r=this.parent;r?n=r.innerWidth()*t.value:n=this._root.width()*t.value}else T(t)&&(n=t);return T(i)&&(n=Math.max(i,n)),T(e)&&(n=Math.min(e,n)),n}maxWidth(){let t=this.get("maxWidth",this.getPrivate("maxWidth"));if(T(t))return t;{let i=this.get("width");if(T(i))return i}const e=this.parent;return e?e.innerWidth():this._root.width()}maxHeight(){let t=this.get("maxHeight",this.getPrivate("maxHeight"));if(T(t))return t;{let i=this.get("height");if(T(i))return i}const e=this.parent;return e?e.innerHeight():this._root.height()}height(){let t=this.get("height"),e=this.get("maxHeight",this.getPrivate("maxHeight")),i=this.get("minHeight",this.getPrivate("minHeight")),s=this.getPrivate("height"),n=0;if(T(s))n=s;else if(t==null)this._adjustedLocalBounds&&(n=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(t instanceof O){const r=this.parent;r?n=r.innerHeight()*t.value:n=this._root.height()*t.value}else T(t)&&(n=t);return T(i)&&(n=Math.max(i,n)),T(e)&&(n=Math.min(e,n)),n}_findStaticTemplate(t){return this._templateField&&t(this._templateField)?this._templateField:super._findStaticTemplate(t)}_walkParents(t){(this._parent||this._virtualParent)&&this._walkParent(t)}_walkParent(t){this._parent?this._parent._walkParent(t):this._virtualParent&&this._virtualParent._walkParent(t),t(this)}set virtualParent(t){this._virtualParent!==t&&(this._virtualParent=t,this._applyThemes())}get parent(){return this._parent}_setParent(t,e=!1){const i=this._parent;t!==i&&(this.markDirtyBounds(),t.markDirty(),this._parent=t,e&&(this._removeParent(i),t&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(t){return this._display.toGlobal(t)}toLocal(t){return this._display.toLocal(t)}_getDownPoint(){const t=this._getDownPointId();if(t)return this._downPoints[t]}_getDownPointId(){if(this._downPoints)return gs(this._downPoints,(t,e)=>t>e?1:t<e?-1:0)[0]}toFront(){const t=this.parent;t&&t.children.moveValue(this,t.children.length-1)}toBack(){const t=this.parent;t&&t.children.moveValue(this,0)}}ft.className="Sprite";ft.classNames=J.classNames.concat([ft.className]);class oe extends J{constructor(){super(...arguments),this._display=this._root._renderer.makeGraphics(),this._backgroundDisplay=this._root._renderer.makeGraphics(),this._clear=!1}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fillOpacity"))&&(this._clear=!0),this._checkDirtyFill()}_checkDirtyFill(){(this.isDirty("color")||this.isDirty("fill"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const t=this.get("repetition",""),e=this.get("width",100),i=this.get("height",100),s=this.get("fill"),n=this.get("fillOpacity",1),r=this._backgroundDisplay,o=this._display;o.clear(),r.clear(),s&&n>0&&(r.beginFill(s,n),r.drawRect(0,0,e,i),r.endFill()),o.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(o,r,t,e,i)}this._clear=!1}}oe.className="Pattern";oe.classNames=J.classNames.concat([oe.className]);class le extends oe{_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty("src")&&this._load();const t=this.get("canvas");t&&(this.set("width",t.width),this.set("height",t.height))}_draw(){super._draw();const t=this.get("colorOpacity");t!==void 0&&(this._display.alpha=Math.max(0,t));const e=this._image;if(e){const s=this.get("width",100),n=this.get("height",100),r=this.get("fit","image");let o=0,l=0;r=="pattern"?(o=s,l=n,this.markDirty()):(o=e.width,l=e.height,r=="image"&&(this.set("width",o),this.set("height",l)));const h=this.get("centered",!0);let d=0,f=0;h&&(d=s/2-o/2,f=n/2-l/2),this._display.image(e,o,l,d,f)}const i=this.get("canvas");i&&this._display.image(i,i.width,i.height,0,0)}_load(){const t=this.get("src");if(t){const e=new Image;e.src=t,e.decode().then(()=>{this._image=e,this._draw(),this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})}).catch(i=>{})}}}le.className="PicturePattern";le.classNames=oe.classNames.concat([le.className]);var Be;(function(a){a.ADD="lighter",a.COLOR="color",a.COLOR_BURN="color-burn",a.COLOR_DODGE="color-dodge",a.DARKEN="darken",a.DIFFERENCE="difference",a.DST_OVER="destination-over",a.EXCLUSION="exclusion",a.HARD_LIGHT="hard-light",a.HUE="hue",a.LIGHTEN="lighten",a.LUMINOSITY="luminosity",a.MULTIPLY="multiply",a.NORMAL="source-over",a.OVERLAY="overlay",a.SATURATION="saturation",a.SCREEN="screen",a.SOFT_LIGHT="soft-light",a.SRC_ATOP="source-atop",a.XOR="xor"})(Be||(Be={}));const sn=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset","shadowBlur","shadowColor","shadowOpacity","shadowOffsetX","shadowOffsetY","blur","sepia","invert","brightness","hue","contrast","saturate"];class ot extends ft{constructor(){super(...arguments),this._display=this._root._renderer.makeGraphics(),this._clear=!1}_beforeChanged(){if(super._beforeChanged(),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("lineCap")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){const t=this.get("fillGradient");if(t){this._display.isMeasured=!0;const e=t.get("target");e&&(this._disposers.push(e.events.on("boundschanged",()=>{this._markDirtyKey("fill")})),this._disposers.push(e.events.on("positionchanged",()=>{this._markDirtyKey("fill")})))}}if(this.isDirty("strokeGradient")){const t=this.get("strokeGradient");if(t){this._display.isMeasured=!0;const e=t.get("target");e&&(this._disposers.push(e.events.on("boundschanged",()=>{this._markDirtyKey("stroke")})),this._disposers.push(e.events.on("positionchanged",()=>{this._markDirtyKey("stroke")})))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let t=this.get("strokeDasharray");T(t)&&(t<.5?t=[0]:t=[t]),this._display.setLineDash(t);const e=this.get("strokeDashoffset");e&&this._display.setLineDashOffset(e);const i=this.get("blendMode",Be.NORMAL);this._display.blendMode=i;const s=this.get("draw");s&&typeof s=="function"&&s(this._display,this);const n=this.get("svgPath");n!=null&&this._display.svgPath(n)}}_afterChanged(){if(super._afterChanged(),this._clear){const t=this.get("fill"),e=this.get("fillGradient"),i=this.get("fillPattern"),s=this.get("fillOpacity"),n=this.get("stroke"),r=this.get("strokeGradient"),o=this.get("strokePattern"),l=this.get("shadowColor"),h=this.get("shadowBlur"),d=this.get("shadowOffsetX"),f=this.get("shadowOffsetY"),u=this.get("shadowOpacity");if(l&&(h||d||f)&&this._display.shadow(l,h,d,f,u),t&&!e&&(this._display.beginFill(t,s),this._display.endFill()),e){if(t){const p=e.get("stops",[]);p.length&&b(p,m=>{(!m.color||m.colorInherited)&&t&&(m.color=t,m.colorInherited=!0),(m.opacity==null||m.opacityInherited)&&(m.opacity=s,m.opacityInherited=!0)})}const c=e.getFill(this);c&&(this._display.beginFill(c,s),this._display.endFill())}if(i){const c=i.pattern;c&&(this._display.beginFill(c,s),this._display.endFill(),i instanceof le&&i.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}if(n||r||o){const c=this.get("strokeOpacity");let p=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(p=p/this.get("scale",1)),this.get("crisp")&&(p/=this._root._renderer.resolution);const m=this.get("lineJoin"),g=this.get("lineCap");if(n&&!r&&(this._display.lineStyle(p,n,c,m,g),this._display.endStroke()),r){const _=r.get("stops",[]);_.length&&b(_,x=>{(!x.color||x.colorInherited)&&n&&(x.color=n,x.colorInherited=!0),(x.opacity==null||x.opacityInherited)&&(x.opacity=c,x.opacityInherited=!0)});const y=r.getFill(this);y&&(this._display.lineStyle(p,y,c,m,g),this._display.endStroke())}if(o){let _=o.pattern;_&&(this._display.lineStyle(p,_,c,m,g),this._display.endStroke(),o instanceof le&&o.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}ot.className="Graphics";ot.classNames=ft.classNames.concat([ot.className]);class Mt extends ot{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){let t=this.width(),e=this.height(),i=0,s=0,n=t/Math.abs(t),r=e/Math.abs(e);if(this.get("containStroke",!1)){const o=this.get("strokeWidth",0);t-=o*n,e-=o*r,i+=o/2*n,s+=o/2*r}this._display.drawRect(i,s,t,e)}_updateSize(){this.markDirty(),this._clear=!0}}Mt.className="Rectangle";Mt.classNames=ot.classNames.concat([Mt.className]);function xt(a,t){a.get("reverseChildren",!1)?a.children.eachReverse(t):a.children.each(t)}class wt extends J{}wt.className="Layout";wt.classNames=J.classNames.concat([wt.className]);class $t extends wt{updateContainer(t){let e=t.get("paddingLeft",0),i=t.innerWidth(),s=0;xt(t,r=>{if(r.isVisible()&&r.get("position")=="relative"){let o=r.get("width");if(o instanceof O){s+=o.value;let l=i*o.value,h=r.get("minWidth",r.getPrivate("minWidth",-1/0));h>l&&(i-=h,s-=o.value);let d=r.get("maxWidth",r.getPrivate("maxWidth",1/0));l>d&&(i-=d,s-=o.value)}else T(o)||(o=r.width()),i-=o+r.get("marginLeft",0)+r.get("marginRight",0)}}),(i<=0||i==1/0)&&(i=.1),xt(t,r=>{if(r.isVisible()&&r.get("position")=="relative"){let o=r.get("width");if(o instanceof O){let l=i*o.value/s-r.get("marginLeft",0)-r.get("marginRight",0),h=r.get("minWidth",r.getPrivate("minWidth",-1/0)),d=r.get("maxWidth",r.getPrivate("maxWidth",1/0));l=Math.min(Math.max(h,l),d),r.setPrivate("width",l)}else r._prevSettings.width instanceof O&&r.setPrivate("width",void 0)}});let n=e;xt(t,r=>{if(r.get("position")=="relative")if(r.isVisible()){let o=r.adjustedLocalBounds(),l=r.get("marginLeft",0),h=r.get("marginRight",0),d=r.get("maxWidth"),f=o.left,u=o.right;d&&u-f>d&&(u=f+d);let c=n+l-f;r.setPrivate("x",c),n=c+u+h}else r.setPrivate("x",void 0)})}}$t.className="HorizontalLayout";$t.classNames=wt.classNames.concat([$t.className]);class jt extends wt{updateContainer(t){let e=t.get("paddingTop",0),i=t.innerHeight(),s=0;xt(t,r=>{if(r.isVisible()&&r.get("position")=="relative"){let o=r.get("height");if(o instanceof O){s+=o.value;let l=i*o.value,h=r.get("minHeight",r.getPrivate("minHeight",-1/0));h>l&&(i-=h,s-=o.value);let d=r.get("maxHeight",r.getPrivate("maxHeight",1/0));l>d&&(i-=d,s-=o.value)}else T(o)||(o=r.height()),i-=o+r.get("marginTop",0)+r.get("marginBottom",0)}}),(i<=0||i==1/0)&&(i=.1),xt(t,r=>{if(r.isVisible()&&r.get("position")=="relative"){let o=r.get("height");if(o instanceof O){let l=i*o.value/s-r.get("marginTop",0)-r.get("marginBottom",0),h=r.get("minHeight",r.getPrivate("minHeight",-1/0)),d=r.get("maxHeight",r.getPrivate("maxHeight",1/0));l=Math.min(Math.max(h,l),d),r.setPrivate("height",l)}else r._prevSettings.height instanceof O&&r.setPrivate("height",void 0)}});let n=e;xt(t,r=>{if(r.get("position")=="relative")if(r.isVisible()){let o=r.adjustedLocalBounds(),l=r.get("marginTop",0),h=o.top,d=o.bottom,f=r.get("maxHeight");f&&d-h>f&&(d=h+f);let u=r.get("marginBottom",0),c=n+l-h;r.setPrivate("y",c),n=c+d+u}else r.setPrivate("y",void 0)})}}jt.className="VerticalLayout";jt.classNames=wt.classNames.concat([jt.className]);class zt extends wt{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE),super._afterNew()}updateContainer(t){let e=t.get("paddingLeft",0),i=t.get("paddingRight",0),s=t.get("paddingTop",0),n=t.maxWidth()-e-i,r=n,o=1;xt(t,p=>{if(p.get("visible")&&p.getPrivate("visible")&&!p.get("forceHidden")&&p.get("position")!="absolute"){let m=p.width();m<r&&(r=m),m>o&&(o=m)}}),r=q(r,1,n),o=q(o,1,n);let l=1;this.get("fixedWidthGrid")?l=n/o:l=n/r,l=Math.max(1,Math.floor(l)),l=Math.min(this.get("maxColumns",Number.MAX_VALUE),l);let h=this.getColumnWidths(t,l,o,n),d=s,f=0,u=0;l=h.length;let c=e;xt(t,p=>{if(p.get("position")=="relative"&&p.isVisible()){const m=p.get("marginTop",0),g=p.get("marginBottom",0);let _=p.adjustedLocalBounds(),y=p.get("marginLeft",0),x=p.get("marginRight",0),v=c+y-_.left,D=d+m-_.top;p.setPrivate("x",v),p.setPrivate("y",D),c+=h[f]+x,u=Math.max(u,p.height()+m+g),f++,f>=l&&(f=0,c=e,d+=u,u=0)}})}getColumnWidths(t,e,i,s){let n=0,r=[],o=0;return xt(t,l=>{let h=l.adjustedLocalBounds();l.get("position")!="absolute"&&l.isVisible()&&(this.get("fixedWidthGrid")?r[o]=i:r[o]=Math.max(r[o]|0,h.right-h.left+l.get("marginLeft",0)+l.get("marginRight",0)),o<t.children.length-1&&(o++,o==e&&(o=0)))}),b(r,l=>{n+=l}),n>s?e>2?(e-=1,this.getColumnWidths(t,e,i,s)):[s]:r}}zt.className="GridLayout";zt.classNames=wt.classNames.concat([zt.className]);class ut{static escape(t){return t.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}static unescape(t){return t.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(t){return t.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}static chunk(t,e=!1,i=!1){let s=[];t=this.escape(t);let n=e?t.split("'"):[t];for(let r=0;r<n.length;r++){let o=n[r];if(o!=="")if(r%2===0){o=o.replace(/\]\[/g,"]"+At+"["),o=o.replace(/\[\]/g,"[ ]");let l=o.split(/[\[\]]+/);for(let h=0;h<l.length;h++){let d=this.cleanUp(this.unescape(l[h]));d!==At&&d!==""&&(h%2===0?s.push({type:"value",text:d}):s.push({type:i?"value":"format",text:"["+d+"]"}))}}else{let l=o.split(/[\[\]]+/);for(let h=0;h<l.length;h++){let d=this.cleanUp(this.unescape(l[h]));d!==""&&(h%2===0?s.push({type:"text",text:d}):this.isImage(d)?s.push({type:"image",text:"["+d+"]"}):s.push({type:"format",text:"["+d+"]"}))}}}return s}static isImage(t){return!!t.match(/img[ ]?:/)}static getTextStyle(t){let e={};if(t==""||t=="[ ]")return{};const i=t.match(/('[^']*')|("[^"]*")/gi);if(i)for(let n=0;n<i.length;n++)t=t.replace(i[n],i[n].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));let s=t.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!s)return{};for(let n=0;n<s.length;n++)if(s[n].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))e.fontWeight=s[n];else if(s[n].match(/^(underline|line-through)$/i))e.textDecoration=s[n];else if(s[n]!="/")if(!s[n].match(/:/))e.fill=S.fromString(s[n]);else{const r=s[n].replace("+"," ").split(/:[ ]*/);e[r[0]]=r[1]}return e}}ut.prefix="__amcharts__";function he(a,t){if(t!=null){t=""+t,t=ut.escape(t);let e=t.match(/\{([^}]+)\}/g),i;if(e)for(i=0;i<e.length;i++){let s=e[i].replace(/\{([^}]+)\}/,"$1"),n=hi(a,s);n==null&&(n=""),t=t.split(e[i]).join(n)}t=ut.unescape(t)}else t="";return t}function hi(a,t,e){let i;const s=a.dataItem;let n=[],r=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g,o;for(;o=r.exec(t),o!==null;)if(o[3]){n.push({prop:o[3]});const l=a.getDateFormatter().get("dateFields",[]),h=a.getNumberFormatter().get("numericFields",[]),d=a.getDurationFormatter().get("durationFields",[]);l.indexOf(o[3])!==-1?n.push({method:"formatDate",params:[]}):h.indexOf(o[3])!==-1?n.push({method:"formatNumber",params:[]}):d.indexOf(o[3])!==-1&&n.push({method:"formatDuration",params:[]})}else{let l=[];if(Xt(o[2])!=""){let h=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,d;for(;d=h.exec(o[2]),d!==null;)l.push(d[1]||d[2]||d[3])}n.push({method:o[1],params:l})}if(s){i=Rt(a,n,s._settings),(i==null||ve(i))&&(i=Rt(a,n,s));let l=s.dataContext;i==null&&l&&(i=Rt(a,n,l),i==null&&(i=Rt(a,[{prop:t}],l)),i==null&&l.dataContext&&(i=Rt(a,n,l.dataContext))),i==null&&s.component&&s.component.dataItem!==s&&(i=hi(s.component,t))}return i==null&&(i=Rt(a,n,a)),i==null&&a.parent&&(i=hi(a.parent,t)),i}function nn(a,t){const e=a.getPrivate("customData");if(ve(e))return e[t]}function Rt(a,t,e,i){let s=e,n=!1;for(let r=0,o=t.length;r<o;r++){let l=t[r];if(l.prop){if(s instanceof ft){let h=s.get(l.prop);h==null&&(h=s.getPrivate(l.prop)),h==null&&(h=nn(s,l.prop)),h==null&&(h=s[l.prop]),s=h}else if(s.get){let h=s.get(l.prop);h==null&&(h=s[l.prop]),s=h}else s=s[l.prop];if(s==null)return}else switch(l.method){case"formatNumber":let h=rt(s);h!=null&&(s=a.getNumberFormatter().format(h,l.params[0]||void 0),n=!0);break;case"formatDate":let d=as(s);if(!si(d)||gi(d.getTime()))return;d!=null&&(s=a.getDateFormatter().format(d,l.params[0]||void 0),n=!0);break;case"formatDuration":let f=rt(s);f!=null&&(s=a.getDurationFormatter().format(f,l.params[0]||void 0,l.params[1]||void 0),n=!0);break;case"urlEncode":case"encodeURIComponent":s=encodeURIComponent(s);break;default:s[l.method]&&s[l.method].apply(e,l.params);break}}if(!n){let r=[{method:"",params:i}];T(s)?(r[0].method="formatNumber",r[0].params=""):si(s)&&(r[0].method="formatDate",r[0].params=""),r[0].method&&(s=Rt(a,r,s))}return s}class W extends ft{constructor(){super(...arguments),this._display=this._root._renderer.makeContainer(),this._childrenDisplay=this._root._renderer.makeContainer(),this.children=new Gs(this),this._percentageSizeChildren=[],this._percentagePositionChildren=[],this._prevWidth=0,this._prevHeight=0,this._contentWidth=0,this._contentHeight=0,this._childrenPrep=!1,this._childrenUpdt=!1}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_afterChanged(){super._afterChanged(),this._childrenPrep=!1,this._childrenUpdt=!1}_dispose(){ee(this.allChildren(),t=>{t.dispose()}),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),super._dispose()}_beforeChanged(){this._childrenPrep||this._prepareChildren(),this._childrenUpdt||this._updateChildren(),super._beforeChanged()}_changed(){if(super._changed(),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each(t=>{t.removePrivate("x"),t.removePrivate("y")})),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each(t=>{t.markDirtyPosition()}),this.isDirty("maskContent")){const t=this._childrenDisplay;let e=this._contentMask;this.get("maskContent")?e||(e=Mt.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=e,t.addChildAt(e._display,0),t.mask=e._display):e&&(t.removeChild(e._display),t.mask=null,e.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),b(this._percentageSizeChildren,t=>{t._updateSize()}),b(this._percentagePositionChildren,t=>{t.markDirtyPosition(),t._updateSize()}),this.updateBackground()}updateBackground(){const t=this.get("background");let e=this._localBounds;if(e&&!this.isHidden()){let i=e.left,s=e.top,n=e.right-i,r=e.bottom-s,o=this.get("maxWidth"),l=this.get("maxHeight");l&&r>l&&(r=l),o&&n>o&&(n=o);let h=this.width(),d=this.height();t&&(t.setAll({width:n,height:r,x:i,y:s}),this._display.interactive&&(t._display.interactive=!0));const f=this._contentMask;f&&f.setAll({width:h+1,height:d+1});const u=this.get("verticalScrollbar");if(u){u.set("height",d),u.set("x",h-u.width()-u.get("marginRight",0)),u.set("end",u.get("start",0)+d/this._contentHeight);const c=u.get("background");c&&c.setAll({width:u.width(),height:d});let p=!0;this._contentHeight<=d&&(p=!1),u.setPrivate("visible",p)}}}_applyThemes(t=!1){return super._applyThemes(t)?(this.eachChildren(e=>{e._applyThemes(t)}),!0):!1}_applyState(t){super._applyState(t),this.get("setStateOnChildren")&&this.eachChildren(e=>{e.states.apply(t)})}_applyStateAnimated(t,e){super._applyStateAnimated(t,e),this.get("setStateOnChildren")&&this.eachChildren(i=>{i.states.applyAnimate(t,e)})}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){if(this.get("html")){let t=this._localBounds;t&&(this._contentWidth=t.right-t.left,this._contentHeight=t.bottom-t.top)}else{let t=this.get("width"),e=this.get("height"),i=this.getPrivate("width"),s=this.getPrivate("height"),n={left:0,top:0,right:this.width(),bottom:this.height()},r=this.get("layout"),o=!1,l=!1;if((r instanceof $t||r instanceof zt)&&(o=!0),r instanceof jt&&(l=!0),!((t!=null||i!=null)&&(e!=null||s!=null)&&!this.get("verticalScrollbar"))){let h=Number.MAX_VALUE,d=h,f=-h,u=h,c=-h;const p=this.get("paddingLeft",0),m=this.get("paddingTop",0),g=this.get("paddingRight",0),_=this.get("paddingBottom",0);this.children.each(v=>{if(v.get("position")!="absolute"&&v.get("isMeasured")){let D=v.adjustedLocalBounds(),M=v.x(),k=v.y(),E=M+D.left,I=M+D.right,B=k+D.top,A=k+D.bottom;o&&(E-=v.get("marginLeft",0),I+=v.get("marginRight",0)),l&&(B-=v.get("marginTop",0),A+=v.get("marginBottom",0)),E<d&&(d=E),I>f&&(f=I),B<u&&(u=B),A>c&&(c=A)}}),d==h&&(d=0),f==-h&&(f=0),u==h&&(u=0),c==-h&&(c=0),n.left=d-p,n.top=u-m,n.right=f+g,n.bottom=c+_;const y=this.get("minWidth");T(y)&&y>0&&n.right-n.left<y&&(n.right>=y?n.left=n.right-y:n.right=n.left+y);const x=this.get("minHeight");T(x)&&x>0&&n.bottom-n.top<x&&(n.bottom>=x?n.top=n.bottom-x:n.bottom=n.top+x)}this._contentWidth=n.right-n.left,this._contentHeight=n.bottom-n.top,T(t)&&(n.left=0,n.right=t),T(i)&&(n.left=0,n.right=i),T(e)&&(n.top=0,n.bottom=e),T(s)&&(n.top=0,n.bottom=s),this._localBounds=n}}_updateBounds(){const t=this.get("layout");t&&t.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){this._childrenPrep=!0;const t=this.innerWidth(),e=this.innerHeight();if(t!=this._prevWidth||e!=this._prevHeight){let i=this.get("layout"),s=!1,n=!1;i&&((i instanceof $t||i instanceof zt)&&(s=!0),i instanceof jt&&(n=!0)),b(this._percentageSizeChildren,r=>{if(!s){let o=r.get("width");o instanceof O&&r.setPrivate("width",o.value*t)}if(!n){let o=r.get("height");o instanceof O&&r.setPrivate("height",o.value*e)}}),b(this._percentagePositionChildren,r=>{r.markDirtyPosition(),r.markDirtyBounds()}),this._prevWidth=t,this._prevHeight=e,this._sizeDirty=!0,this.updateBackground()}}_updateHTMLContent(){const t=this.get("html","");t&&t!==""?this._root._setHTMLContent(this,he(this,t)):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}scrollToChild(t){const e=this.get("verticalScrollbar");if(e){let i=t.y(),s=this.innerHeight(),n=t.height(),r=this._contentHeight,o=1-(s-n/2)/r;if(i+n*.7+this._childrenDisplay.y>s||i-n*.3+this._childrenDisplay.y<0){let l=Math.max(0,Math.min(o,(i-n/2)/r));e.animate({key:"start",to:l,duration:e.get("animationDuration",0),easing:e.get("animationEasing")})}}}_updateChildren(){if(this._childrenUpdt=!0,this.isDirty("html")&&this._updateHTMLContent(),this.isDirty("verticalScrollbar")){const t=this.get("verticalScrollbar");if(t){t._setParent(this),t.startGrip.setPrivate("visible",!1),t.endGrip.setPrivate("visible",!1),this.set("maskContent",!0),this.set("paddingRight",t.width()+t.get("marginRight",0)+t.get("marginLeft",0));let e=this.get("background");e||(e=this.set("background",Mt.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",i=>{const s=i.originalEvent;if(ks(s,this))s.preventDefault();else return;let n=s.deltaY/5e3;const r=t.get("start",0),o=t.get("end",1);r+n<=0&&(n=-r),o+n>=1&&(n=1-o),r+n>=0&&o+n<=1&&(t.set("start",r+n),t.set("end",o+n))}),this._disposers.push(this._vsbd0),this._vsbd1=t.events.on("rangechanged",()=>{let i=this._contentHeight;const s=this._childrenDisplay,n=this._contentMask;s.y=-t.get("start",0)*i,s.markDirtyLayer(),n&&(n._display.y=-s.y,s.mask=n._display)}),this._disposers.push(this._vsbd1),this._display.addChild(t._display)}else{const e=this._prevSettings.verticalScrollbar;if(e){this._display.removeChild(e._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose();const i=this._childrenDisplay;i.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0)}}}if(this.isDirty("background")){const t=this._prevSettings.background;t&&this._display.removeChild(t._display);const e=this.get("background");e instanceof ft&&(e.set("isMeasured",!1),e._setParent(this),this._display.addChildAt(e._display,0))}if(this.isDirty("mask")){const t=this.get("mask"),e=this._prevSettings.mask;if(e&&(this._display.removeChild(e._display),e!=t&&e.dispose()),t){const i=t.parent;i&&i.children.removeValue(t),t._setParent(this),this._display.addChildAt(t._display,0),this._childrenDisplay.mask=t._display}}}_processTemplateField(){super._processTemplateField(),this.children.each(t=>{t._processTemplateField()})}walkChildren(t){this.children.each((e,i)=>{e instanceof W&&e.walkChildren(t),t(e,i)})}eachChildren(t){const e=this.get("background");e&&t(e);const i=this.get("verticalScrollbar");i&&t(i);const s=this.get("mask");s&&t(s),this.children.values.forEach(n=>{t(n)})}allChildren(){const t=[];return this.eachChildren(e=>{t.push(e)}),t}_setDataItem(t){const e=t!==this._dataItem;super._setDataItem(t);const i=this.get("html","");i&&i!==""&&e&&this._root._setHTMLContent(this,he(this,i))}contentWidth(){return this._contentWidth}contentHeight(){return this._contentHeight}}W.className="Container";W.classNames=ft.classNames.concat([W.className]);class Nt extends ft{constructor(){super(...arguments),this.textStyle=this._root._renderer.makeTextStyle(),this._display=this._root._renderer.makeText("",this.textStyle),this._textStyles=["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","maxChars"]}_updateBounds(){if(this.get("text")){super._updateBounds();let t=this.get("fillGradient");t&&(this._display.style.fill=t.getFill(this))}else{let t={left:0,right:0,top:0,bottom:0};this._adjustedLocalBounds=t}}_changed(){super._changed(),this._display.clear();let t=this.textStyle;if(this.isDirty("opacity")){let e=this.get("opacity",1);this._display.alpha=e}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),this.get("role")=="tooltip"&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new K(()=>{this._root._removeTooltipElement(this)})),this.isDirty("width")&&(t.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(t.oversizedBehavior=this.get("oversizedBehavior","none"),this._display.invalidateVisibility(),this.markDirtyBounds()),this.isDirty("breakWords")&&(t.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(t.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(t.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(t.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")||this.isDirty("fillGradient")){const e=this.get("fill"),i=this.get("fillGradient"),s=this.get("fillOpacity");if(i){if(e){const n=i.get("stops",[]);n.length&&b(n,r=>{(!r.color||r.colorInherited)&&e&&(r.color=e,r.colorInherited=!0),(r.opacity==null||r.opacityInherited)&&(r.opacity=s,r.opacityInherited=!0)})}t.fill=i.getFill(this)}else e&&(t.fill=e)}if(this.isDirty("fillOpacity")){let e=this.get("fillOpacity",1);e&&(t.fillOpacity=e)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(t.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(t.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),b(this._textStyles,e=>{this._dirty[e]&&(t[e]=this.get(e),this.markDirtyBounds())}),t.fontSize=this.get("fontSize"),t.fontFamily=this.get("fontFamily"),this._display.style=t,this.isDirty("role")&&this.get("role")=="tooltip"&&this._root.updateTooltip(this)}_getText(){let t=this.get("text","");return this.get("maxChars")&&(t=Bs(t,this.get("maxChars",1e8),this.get("breakWords"),this.get("ellipsis"))),this.get("populateText")?he(this,t):t}_getAccessibleText(){const t=this.get("ariaLabel");return t!==void 0?this.get("populateText")?he(this,t):t:this._getText()}markDirtyText(){this._display.text=this._getText(),this.get("role")=="tooltip"&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(t){super._setDataItem(t),this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}}Nt.className="Text";Nt.classNames=ft.classNames.concat([Nt.className]);class rn{constructor(){this._targets=[],this._observer=new ResizeObserver(t=>{b(t,e=>{b(this._targets,i=>{i.target===e.target&&i.callback()})})})}addTarget(t,e){this._observer.observe(t,{box:"border-box"}),this._targets.push({target:t,callback:e})}removeTarget(t){this._observer.unobserve(t),ze(this._targets,e=>e.target!==t)}}class Ye{constructor(){this._timer=null,this._targets=[]}addTarget(t,e){if(this._timer===null){let s=null;const n=()=>{const r=Date.now();(s===null||r>s+Ye.delay)&&(s=r,b(this._targets,o=>{let l=o.target.getBoundingClientRect();(l.width!==o.size.width||l.height!==o.size.height)&&(o.size=l,o.callback())})),this._targets.length===0?this._timer=null:this._timer=requestAnimationFrame(n)};this._timer=requestAnimationFrame(n)}let i={width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0};this._targets.push({target:t,callback:e,size:i})}removeTarget(t){ze(this._targets,e=>e.target!==t),this._targets.length===0&&this._timer!==null&&(cancelAnimationFrame(this._timer),this._timer=null)}}Ye.delay=200;let ke=null;function an(){return ke===null&&(typeof ResizeObserver<"u"?ke=new rn:ke=new Ye),ke}class on{constructor(t,e){this._disposed=!1,this._sensor=an(),this._element=t,this._listener=Vi(e),this._sensor.addTarget(t,e)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}class Ee extends J{}Ee.className="InterfaceColors";Ee.classNames=J.classNames.concat([Ee.className]);class Dt extends W{constructor(){super(...arguments),this._textKeys=["text","fill","fillGradient","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting","maxChars","ariaLabel"]}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),b(this._textKeys,t=>{const e=this.get(t);e!=null&&this._text.set(t,e)}),this.get("html","")!==""&&this._text.set("text",""),this.onPrivate("maxWidth",()=>{this._setMaxDimentions()}),this.onPrivate("maxHeight",()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(Nt.new(this._root,{}))}_updateChildren(){super._updateChildren();const t=this._text;if(b(this._textKeys,i=>{this._text.set(i,this.get(i))}),(this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isDirty("rotation"))&&this._setMaxDimentions(),this.get("html","")!==""?t.set("text",""):(t.set("text",this.get("text")),this._maybeUpdateHTMLColor()),(this.isDirty("fill")||this.isDirty("fillGradient"))&&this._maybeUpdateHTMLColor(),this.isDirty("textAlign")||this.isDirty("width")){const i=this.get("textAlign");let s;this.get("width")!=null?i=="right"?s=H:i=="center"?s=L:s=0:i=="left"||i=="start"?s=this.get("paddingLeft",0):(i=="right"||i=="end")&&(s=-this.get("paddingRight",0)),t.set("x",s)}const e=this.get("background");e&&e.setPrivate("visible",t._display.textVisible)}_maybeUpdateHTMLColor(){const t=this.getPrivate("htmlElement");t&&this.get("fill")&&(t.style.color=this.get("fill").toCSSHex())}_setMaxDimentions(){const t=this.get("rotation"),e=t==90||t==270||t==-90,i=this._text,s=this.get("maxWidth",this.getPrivate("maxWidth",1/0));T(s)?i.set(e?"maxHeight":"maxWidth",s-this.get("paddingTop",0)-this.get("paddingBottom",0)):i.set(e?"maxHeight":"maxWidth",void 0);const n=this.get("maxHeight",this.getPrivate("maxHeight",1/0));T(n)?i.set(e?"maxWidth":"maxHeight",n-this.get("paddingLeft",0)-this.get("paddingRight",0)):i.set(e?"maxWidth":"maxHeight",void 0),this.root.events.once("frameended",()=>{i.markDirtyBounds()})}_setDataItem(t){super._setDataItem(t),this._markDirtyKey("text"),this._markDirtyKey("html");const e=this._text;e.get("populateText")&&e.markDirtyText();const i=this.get("html");i&&i!==""&&this._updateHTMLContent()}getText(){return this._text._getText()}getAccessibleText(){return this._text._getAccessibleText()}}Dt.className="Label";Dt.classNames=W.classNames.concat([Dt.className]);class Kt extends ot{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let t=this.width(),e=this.height();if(t>0&&e>0){let i=this.get("cornerRadius",8);i=q(i,0,Math.min(t/2,e/2));let s=this.get("pointerX",0),n=this.get("pointerY",0),r=this.get("pointerBaseWidth",15)/2,o=0,l=0,h=t,d=0,f=t,u=e,c=0,p=e,m=(s-o)*(u-l)-(n-l)*(f-o),g=(s-c)*(d-p)-(n-p)*(h-c);const _=this._display;if(_.moveTo(i,0),m>0&&g>0){let y=Math.round(q(s,i+r,t-r-i));n=q(n,-1/0,0),_.lineTo(y-r,0),_.lineTo(s,n),_.lineTo(y+r,0)}if(_.lineTo(t-i,0),_.arcTo(t,0,t,i,i),m>0&&g<0){let y=Math.round(q(n,i+r,e-r-i));s=q(s,t,1/0),_.lineTo(t,i),_.lineTo(t,Math.max(y-r,i)),_.lineTo(s,n),_.lineTo(t,y+r)}if(_.lineTo(t,e-i),_.arcTo(t,e,t-i,e,i),m<0&&g<0){let y=Math.round(q(s,i+r,t-r-i));n=q(n,e,1/0),_.lineTo(t-i,e),_.lineTo(y+r,e),_.lineTo(s,n),_.lineTo(y-r,e)}if(_.lineTo(i,e),_.arcTo(0,e,0,e-i,i),m<0&&g>0){let y=Math.round(q(n,i+r,e-i-r));s=q(s,-1/0,0),_.lineTo(0,e-i),_.lineTo(0,y+r),_.lineTo(s,n),_.lineTo(0,Math.max(y-r,i))}_.lineTo(0,i),_.arcTo(0,0,i,0,i),_.closePath()}}}}Kt.className="PointedRectangle";Kt.classNames=ot.classNames.concat([Kt.className]);class de extends W{constructor(t,e,i,s=[]){super(t,e,i,s),this._fx=0,this._fy=0,this._w=0,this._h=0,this._htmlContentHovered=!1}_afterNew(){this._settings.themeTags=Ae(this._settings.themeTags,["tooltip"]),super._afterNew(),this._setDefaultFn("background",()=>Kt.new(this._root,{})).set("themeTags",["tooltip","background"]),this._label=this.children.push(Dt.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",e=>{e&&(this._disposers.push(U(e,"pointerover",i=>{this._htmlContentHovered=!0})),this._disposers.push(U(e,"pointerout",i=>{this._htmlContentHovered=!1})))})),this.on("visible",e=>{this._handleReaderAnnouncement()}),this.label.events.on("dataitemchanged",e=>{this._handleReaderAnnouncement()}),this._root._tooltips.push(this)}_handleReaderAnnouncement(){this.get("readerAnnounce")&&this.isVisibleDeep()&&this._root.readerAlert(this.label.getAccessibleText())}get label(){return this._label}_dispose(){super._dispose(),vt(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),this.get("labelText")!=null&&this.label.set("text",this.get("labelText")),this.get("labelHTML")!=null&&this.label.set("html",this.get("labelHTML")),this.get("labelAriaLabel")!=null&&this.label.set("ariaLabel",this.get("labelAriaLabel"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const e=this.get("background");this._keepHoverDp=new at([e.events.on("pointerover",i=>{let s=this.get("tooltipTarget");s&&(s.parent&&s.parent.getPrivate("tooltipTarget")==s&&(s=s.parent),s.hover())}),e.events.on("pointerout",i=>{let s=this.get("tooltipTarget");s&&(s.parent&&s.parent.getPrivate("tooltipTarget")==s&&(s=s.parent),this._htmlContentHovered||s.unhover())})]),this.label.onPrivate("htmlElement",i=>{this._keepHoverDp&&i&&this._keepHoverDp.disposers.push(U(i,"pointerleave",s=>{const n=this.root._renderer.getEvent(s);e.events.dispatch("pointerout",{type:"pointerout",originalEvent:n.event,point:n.point,simulated:!1,target:e})}))})}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let t=this.get("tooltipTarget");const e=this.get("background");let i,s;if(t&&e){if(i=t.get("fill"),s=t.get("stroke"),i==null&&(i=s),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),i!=null&&e.set("fill",i),this._fillDp=t.on("fill",n=>{n!=null&&(e.set("fill",n),this._updateTextColor(n))}),this._disposers.push(this._fillDp)),this.get("getFillGradientFromSprite")){this._fillGrDp&&this._fillGrDp.dispose();let n=t.get("fillGradient");n!=null&&e.set("fillGradient",n),this._fillGrDp=t.on("fillGradient",r=>{r!=null&&e.set("fillGradient",r)}),this._disposers.push(this._fillGrDp)}this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),i!=null&&e.set("stroke",i),this._strokeDp=t.on("fill",n=>{n!=null&&e.set("stroke",n)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),i!=null&&this.label.set("fill",i),this._labelDp=t.on("fill",n=>{n!=null&&this.label.set("fill",n)}),this._disposers.push(this._labelDp))}this._updateTextColor(i)}_updateTextColor(t){this.get("autoTextColor")&&(t==null&&(t=this.get("background").get("fill")),t==null&&(t=this._root.interfaceColors.get("background")),t instanceof S&&this.label.set("fill",S.alternative(t,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(t){super._setDataItem(t),this.label._setDataItem(t)}_updateBackground(){super.updateBackground();const t=this._root.container;if(t){let e=.5,i=.5,s=this.get("centerX");s instanceof O&&(e=s.value);let n=this.get("centerY");n instanceof O&&(i=n.value);let r=t.width(),o=t.height(),l=this.parent,h=0,d=0;if(l){h=l.x(),d=l.y();const A=l.get("layerMargin");A&&(h+=A.left||0,d+=A.top||0,r+=(A.left||0)+(A.right||0),o+=(A.top||0)+(A.bottom||0))}const f=this.get("bounds",{left:-h,top:-d,right:r-h,bottom:o-d});this._updateBounds();let u=this.width(),c=this.height();u===0&&(u=this._w),c===0&&(c=this._h);let p=this.get("pointTo",{x:r/2,y:o/2}),m=p.x,g=p.y,_=this.get("pointerOrientation"),y=this.get("background"),x=0,v=0,D=0;y instanceof Kt&&(x=y.get("pointerLength",0),v=y.get("strokeWidth",0)/2,D=v,y.set("width",u),y.set("height",c));let M=0,k=0,E=f.right-f.left,I=f.bottom-f.top;_=="horizontal"||_=="left"||_=="right"?(v=0,_=="horizontal"?m>f.left+E/2?(m-=u*(1-e)+x,D*=-1):m+=u*e+x:_=="left"?m+=u*(1-e)+x:(m-=u*e+x,D*=-1)):(D=0,_=="vertical"?g>f.top+c/2+x?g-=c*(1-i)+x:(g+=c*i+x,v*=-1):_=="down"?g-=c*(1-i)+x:(g+=c*i+x,v*=-1)),m=q(m,f.left+u*e,f.left+E-u*(1-e))+D,g=q(g,f.top+c*i,f.top+I-c*(1-i))-v,M=p.x-m+u*e+D,k=p.y-g+c*i-v,this._fx=m,this._fy=g;const B=this.get("animationDuration",0);if(B>0&&this.get("visible")&&this.get("opacity")>.1){const A=this.get("animationEasing");this.animate({key:"x",to:m,duration:B,easing:A}),this.animate({key:"y",to:g,duration:B,easing:A})}else this.set("x",m),this.set("y",g);y instanceof Kt&&(y.set("pointerX",M),y.set("pointerY",k)),u>0&&(this._w=u),c>0&&(this._h=c)}}}de.className="Tooltip";de.classNames=W.classNames.concat([de.className]);class ln extends J{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const t="_big_number_suffix_",e="_small_number_suffix_",i="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(t+"3")},{number:1e6,suffix:this._t(t+"6")},{number:1e9,suffix:this._t(t+"9")},{number:1e12,suffix:this._t(t+"12")},{number:1e15,suffix:this._t(t+"15")},{number:1e18,suffix:this._t(t+"18")},{number:1e21,suffix:this._t(t+"21")},{number:1e24,suffix:this._t(t+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(e+"24")},{number:1e-21,suffix:this._t(e+"21")},{number:1e-18,suffix:this._t(e+"18")},{number:1e-15,suffix:this._t(e+"15")},{number:1e-12,suffix:this._t(e+"12")},{number:1e-9,suffix:this._t(e+"9")},{number:1e-6,suffix:this._t(e+"6")},{number:.001,suffix:this._t(e+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(i+"B")},{number:1024,suffix:this._t(i+"KB")},{number:1048576,suffix:this._t(i+"MB")},{number:1073741824,suffix:this._t(i+"GB")},{number:1099511627776,suffix:this._t(i+"TB")},{number:0x4000000000000,suffix:this._t(i+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(t,e,i){(e==null||Ft(e)&&e.toLowerCase()==="number")&&(e=this.get("numberFormat",""));let s,n=Number(t);if(ve(e))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),e).format(n):new Intl.NumberFormat(void 0,e).format(n)}catch{return"Invalid"}else{e=yi(e);let r=this.parseFormat(e,this._root.language),o;n>this.get("negativeBase")?o=r.positive:n<this.get("negativeBase")?o=r.negative:o=r.zero,i!=null&&!o.mod&&(o=_s(o),o.decimals.active=n==0?0:i),s=o.template.split(At).join(this.applyFormat(n,o))}return this.get("forceLTR")===!0&&(s="‎"+s),s}parseFormat(t,e){const i=e.translateEmpty("_thousandSeparator"),s=e.translateEmpty("_decimalSeparator");let n={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:s},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:s},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:s},template:"",source:"",parsed:!1}};t=t.replace("||",Vt);let r=t.split("|");return n.positive.source=r[0],typeof r[2]>"u"?n.zero=n.positive:n.zero.source=r[2],typeof r[1]>"u"?n.negative=n.positive:n.negative.source=r[1],N(n,(o,l)=>{if(l.parsed)return;let h=l.source;h.toLowerCase()==="number"&&(h=this.get("numberFormat","#,###.#####"));let d=ut.chunk(h,!0);for(let f=0;f<d.length;f++){let u=d[f];if(u.text=u.text.replace(Vt,"|"),u.type==="value"){let c=u.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP‰!]?/);if(c)if(c===null||c[0]==="")l.template+=u.text;else{let p=c[0].match(/[abespABESP%‰!]{2}|[abespABESP%‰]{1}$/);p&&(l.mod=p[0].toLowerCase(),l.modSpacing=!!c[0].match(/[ ]{1}[abespABESP%‰!]{1}$/));let m=c[0].split(".");if(m[0]!==""){l.thousands.active=(m[0].match(/0/g)||[]).length,l.thousands.passive=(m[0].match(/\#/g)||[]).length+l.thousands.active;let g=m[0].split(",");g.length===1||(l.thousands.interval=(g.pop()||"").length,l.thousands.interval===0&&(l.thousands.interval=-1))}typeof m[1]>"u"||(l.decimals.active=(m[1].match(/0/g)||[]).length,l.decimals.passive=(m[1].match(/\#/g)||[]).length+l.decimals.active),l.template+=u.text.split(c[0]).join(At)}}else l.template+=u.text}l.parsed=!0}),n}applyFormat(t,e){let i=t<0;t=Math.abs(t);let s="",n="",r=e.mod?e.mod.split(""):[];if(r.indexOf("b")!==-1){let f=this.applyPrefix(t,this.get("bytePrefixes"),r.indexOf("!")!==-1);t=f[0],s=f[1],n=f[2],e.modSpacing&&(n=" "+n)}else if(r.indexOf("a")!==-1){let f=this.applyPrefix(t,t<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),r.indexOf("!")!==-1);t=f[0],s=f[1],n=f[2],e.modSpacing&&(n=" "+n)}else if(r.indexOf("p")!==-1){let f=Math.min(t.toString().length+2,21);t=parseFloat(t.toPrecision(f)),s=this._root.language.translate("_percentPrefix"),n=this._root.language.translate("_percentSuffix"),s==""&&n==""&&(n="%")}else if(r.indexOf("%")!==-1){let f=Math.min(t.toString().length+2,21);t*=100,t=parseFloat(t.toPrecision(f)),n="%"}else if(r.indexOf("‰")!==-1){let f=Math.min(t.toString().length+3,21);t*=1e3,t=parseFloat(t.toPrecision(f)),n="‰"}if(r.indexOf("e")!==-1){let f;e.decimals.passive>=0?f=t.toExponential(e.decimals.passive).split("e"):f=t.toExponential().split("e"),t=Number(f[0]),n="e"+f[1],e.modSpacing&&(n=" "+n)}else if(e.decimals.passive===0)t=Math.round(t);else if(e.decimals.passive>0){const f=Cs(t);if(f>0){const u=Math.pow(10,e.decimals.passive);t=Math.round(parseFloat((t*u).toFixed(f)))/u}}let o="",l=os(t).split("."),h=l[0];if(h.length<e.thousands.active&&(h=Array(e.thousands.active-h.length+1).join("0")+h),e.thousands.interval>0){let f=[],u=h.split("").reverse().join("");for(let c=0,p=h.length;c<=p;c+=e.thousands.interval){let m=u.substr(c,e.thousands.interval).split("").reverse().join("");m!==""&&f.unshift(m)}h=f.join(e.thousands.separator)}o+=h,l.length===1&&l.push("");let d=l[1];return d.length<e.decimals.active&&(d+=Array(e.decimals.active-d.length+1).join("0")),d!==""&&(o+=e.decimals.separator+d),o===""&&(o="0"),t!==0&&i&&r.indexOf("s")===-1&&(o="-"+o),s&&(o=s+o),n&&(o+=n),o}applyPrefix(t,e,i=!1){let s=t,n="",r="",o=!1,l=1;for(let h=0,d=e.length;h<d;h++)e[h].number<=t&&(e[h].number===0?s=0:(s=t/e[h].number,l=e[h].number),n=e[h].prefix,r=e[h].suffix,o=!0);return!o&&i&&e.length&&t!=0&&(s=t/e[0].number,n=e[0].prefix,r=e[0].suffix,o=!0),o&&(s=parseFloat(s.toPrecision(Math.min(l.toString().length+Math.floor(s).toString().replace(/[^0-9]*/g,"").length,21)))),[s,n,r]}escape(t){return t.replace("||",Vt)}unescape(t){return t.replace(Vt,"|")}}function ts(a,t){let e=0,i=0,s=1,n=0,r=0,o=0,l=0,h=0;return a.formatToParts(t).forEach(d=>{switch(d.type){case"year":e=+d.value;break;case"month":i=+d.value-1;break;case"day":s=+d.value;break;case"hour":n=+d.value;break;case"minute":r=+d.value;break;case"second":o=+d.value;break;case"fractionalSecond":l=+d.value;break;case"weekday":switch(d.value){case"Sun":h=0;break;case"Mon":h=1;break;case"Tue":h=2;break;case"Wed":h=3;break;case"Thu":h=4;break;case"Fri":h=5;break;case"Sat":h=6;break}}}),n===24&&(n=0),{year:e,month:i,day:s,hour:n,minute:r,second:o,millisecond:l,weekday:h}}function Ei(a,t){const{year:e,month:i,day:s,hour:n,minute:r,second:o,millisecond:l}=ts(a,t);return Date.UTC(e,i,s,n,r,o,l)}class hn{constructor(t,e){if(!e)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=t,this._utc=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(t){return new this(t,!0)}convertLocal(t){const e=this.offsetUTC(t),i=t.getTimezoneOffset(),s=new Date(t);s.setUTCMinutes(s.getUTCMinutes()-(e-i));const n=s.getTimezoneOffset();return i!=n&&s.setUTCMinutes(s.getUTCMinutes()+n-i),s}offsetUTC(t){const e=Ei(this._utc,t),i=Ei(this._dtf,t);return(e-i)/6e4}parseDate(t){return ts(this._dtf,t)}}class dn extends J{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(t,e,i=!1){(typeof e>"u"||e==="")&&(e=this.get("dateFormat","yyyy-MM-dd"));let s,n=t;if(ve(e))try{const h=this.get("intlLocales");return h?new Intl.DateTimeFormat(h,e).format(n):new Intl.DateTimeFormat(void 0,e).format(n)}catch{return"Invalid"}let r=this.parseFormat(e);const o=this._root.timezone;let l=n;return o&&!this._root.utc&&!i&&(n=o.convertLocal(n)),T(n.getTime())?(s=this.applyFormat(n,r,i,l),this.get("capitalize")&&(s=s.replace(/^.{1}/,s.substr(0,1).toUpperCase())),s):"Invalid date"}applyFormat(t,e,i=!1,s){let n=e.template,r,o,l,h,d,f,u,c,p=t.getTime();this._root.utc&&!i?(r=t.getUTCFullYear(),o=t.getUTCMonth(),l=t.getUTCDay(),h=t.getUTCDate(),d=t.getUTCHours(),f=t.getUTCMinutes(),u=t.getUTCSeconds(),c=t.getUTCMilliseconds()):(r=t.getFullYear(),o=t.getMonth(),l=t.getDay(),h=t.getDate(),d=t.getHours(),f=t.getMinutes(),u=t.getSeconds(),c=t.getMilliseconds());for(let m=0,g=e.parts.length;m<g;m++){let _="";switch(e.parts[m]){case"G":_=this._t(r<0?"_era_bc":"_era_ad");break;case"yyyy":_=Math.abs(r).toString(),r<0&&(_+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":_=Math.abs(r).toString().substr(-e.parts[m].length),r<0&&(_+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let y=Rs(t,this._root.utc);e.parts[m]=="YYYY"?_=Math.abs(y).toString():_=Math.abs(y).toString().substr(-e.parts[m].length),y<0&&(_+=this._t("_era_bc"));break;case"u":break;case"q":_=""+Math.ceil((t.getMonth()+1)/3);break;case"MMMMM":_=this._t(this._getMonth(o)).substr(0,1);break;case"MMMM":_=this._t(this._getMonth(o));break;case"MMM":_=this._t(this._getShortMonth(o));break;case"MM":_=V(o+1,2,"0");break;case"M":_=(o+1).toString();break;case"ww":_=V(Me(t,this._root.utc),2,"0");break;case"w":_=Me(t,this._root.utc).toString();break;case"W":_=Ls(t,this._root.utc).toString();break;case"dd":_=V(h,2,"0");break;case"d":_=h.toString();break;case"DD":case"DDD":_=V(Ci(t,this._root.utc).toString(),e.parts[m].length,"0");break;case"D":_=Ci(t,this._root.utc).toString();break;case"F":break;case"g":break;case"t":_=this._root.language.translateFunc("_dateOrd").call(this,h);break;case"E":_=(l||7).toString();break;case"EE":_=V((l||7).toString(),2,"0");break;case"EEE":case"eee":_=this._t(this._getShortWeekday(l));break;case"EEEE":case"eeee":_=this._t(this._getWeekday(l));break;case"EEEEE":case"eeeee":_=this._t(this._getShortWeekday(l)).substr(0,1);break;case"e":case"ee":_=(l-(this._root.locale.firstDayOfWeek||1)+1).toString(),e.parts[m]=="ee"&&(_=V(_,2,"0"));break;case"a":d>=12?_=this._t("PM"):_=this._t("AM");break;case"aa":d>=12?_=this._t("P.M."):_=this._t("A.M.");break;case"aaa":d>=12?_=this._t("P"):_=this._t("A");break;case"h":_=we(d).toString();break;case"hh":_=V(we(d),2,"0");break;case"H":_=d.toString();break;case"HH":_=V(d,2,"0");break;case"K":_=we(d,0).toString();break;case"KK":_=V(we(d,0),2,"0");break;case"k":_=(d+1).toString();break;case"kk":_=V(d+1,2,"0");break;case"m":_=f.toString();break;case"mm":_=V(f,2,"0");break;case"s":_=u.toString();break;case"ss":_=V(u,2,"0");break;case"S":case"SS":case"SSS":_=Math.round(c/1e3*Math.pow(10,e.parts[m].length)).toString();break;case"x":_=p.toString();break;case"n":case"nn":case"nnn":_=V(c,e.parts[m].length,"0");break;case"z":_=De(s||t,!1,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zz":_=De(s||t,!0,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"zzz":_=De(s||t,!1,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zzzz":_=De(s||t,!0,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"Z":case"ZZ":let x=this._root.utc?"UTC":this._root.timezone;x instanceof hn&&(x=x.name);const v=x?Hs(x,s||t):t.getTimezoneOffset();let D=Math.abs(v)/60,M=Math.floor(D),k=D*60-M*60;this._root.utc&&(M=0,k=0),e.parts[m]=="Z"?(_="GMT",_+=v>0?"-":"+",_+=V(M,2)+":"+V(k,2)):(_=v>0?"-":"+",_+=V(M,2)+V(k,2));break;case"i":_=t.toISOString();break;case"I":_=t.toUTCString();break}n=n.replace(At,_)}return n}parseFormat(t){let e={template:"",parts:[]},i=ut.chunk(t,!0);for(let s=0;s<i.length;s++){let n=i[s];if(n.type==="value"){if(n.text.match(/^date$/i)){let o=this.get("dateFormat","yyyy-MM-dd");Ft(o)||(o="yyyy-MM-dd"),n.text=o}let r=n.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(r)for(let o=0;o<r.length;o++)e.parts.push(r[o]),n.text=n.text.replace(r[o],At)}e.template+=n.text}return e}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(t){return this._months()[t]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(t){return this._shortMonths()[t]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(t){return this._weekdays()[t]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(t){return this._shortWeekdays()[t]}parse(t,e,i){if(typeof i>"u"&&(i=this._root.utc),t instanceof Date)return t;if(T(t))return new Date(t);if(e=="x")return new Date(parseInt(t));Ft(t)||(t=t.toString());let s,n="";e=yi(e),e=e.substr(0,t.length);let r=this.parseFormat(e),o={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},l={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:i},h=0,d=0;for(let c=0;c<r.parts.length;c++){switch(d=c+h+1,r.parts[c]){case"yyyy":case"YYYY":n+="([0-9]{4})",o.year=d;break;case"yyy":case"YYY":n+="([0-9]{3})",o.year3=d;break;case"yy":case"YY":n+="([0-9]{2})",o.year2=d;break;case"y":case"Y":n+="([0-9]{1})",o.year1=d;break;case"MMMM":n+="("+this.getStringList(this._months()).join("|")+")",o.monthLong=d;break;case"MMM":n+="("+this.getStringList(this._shortMonths()).join("|")+")",o.monthShort=d;break;case"MM":case"M":n+="([0-9]{2}|[0-9]{1})",o.month=d;break;case"ww":case"w":n+="([0-9]{2}|[0-9]{1})",o.week=d;break;case"dd":case"d":n+="([0-9]{2}|[0-9]{1})",o.day=d;break;case"DDD":case"DD":case"D":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.yearDay=d;break;case"dddd":n+="("+this.getStringList(this._weekdays()).join("|")+")",o.weekdayLong=d;break;case"ddd":n+="("+this.getStringList(this._shortWeekdays()).join("|")+")",o.weekdayShort=d;break;case"aaa":case"aa":case"a":n+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",o.am=d;break;case"hh":case"h":n+="([0-9]{2}|[0-9]{1})",o.hour12Base1=d;break;case"HH":case"H":n+="([0-9]{2}|[0-9]{1})",o.hourBase0=d;break;case"KK":case"K":n+="([0-9]{2}|[0-9]{1})",o.hour12Base0=d;break;case"kk":case"k":n+="([0-9]{2}|[0-9]{1})",o.hourBase1=d;break;case"mm":case"m":n+="([0-9]{2}|[0-9]{1})",o.minute=d;break;case"ss":case"s":n+="([0-9]{2}|[0-9]{1})",o.second=d;break;case"SSS":case"SS":case"S":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=d,o.millisecondDigits=r.parts[c].length;break;case"nnn":case"nn":case"n":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=d;break;case"x":n+="([0-9]{1,})",o.timestamp=d;break;case"Z":n+="GMT([-+]+[0-9]{2}:[0-9]{2})",o.zone=d;break;case"ZZ":n+="([\\-+]+[0-9]{2}[0-9]{2})",o.zone=d;break;case"i":n+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",o.iso=d,h+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":h--;break}n+="[^0-9]*"}let f=new RegExp(n),u=t.match(f);if(u){if(o.year>-1&&(l.year=parseInt(u[o.year])),o.year3>-1){let c=parseInt(u[o.year3]);c+=1e3,l.year=c}if(o.year2>-1){let c=parseInt(u[o.year2]);c>50?c+=1e3:c+=2e3,l.year=c}if(o.year1>-1){let c=parseInt(u[o.year1]);c=Math.floor(new Date().getFullYear()/10)*10+c,l.year=c}if(o.monthLong>-1&&(l.month=this.resolveMonth(u[o.monthLong])),o.monthShort>-1&&(l.month=this.resolveShortMonth(u[o.monthShort])),o.month>-1&&(l.month=parseInt(u[o.month])-1),o.week>-1&&o.day===-1&&(l.month=0,l.day=Is(parseInt(u[o.week]),l.year,1,i)),o.day>-1&&(l.day=parseInt(u[o.day])),o.yearDay>-1&&(l.month=0,l.day=parseInt(u[o.yearDay])),o.hourBase0>-1&&(l.hour=parseInt(u[o.hourBase0])),o.hourBase1>-1&&(l.hour=parseInt(u[o.hourBase1])-1),o.hour12Base0>-1){let c=parseInt(u[o.hour12Base0]);c==11&&(c=0),o.am>-1&&!this.isAm(u[o.am])&&(c+=12),l.hour=c}if(o.hour12Base1>-1){let c=parseInt(u[o.hour12Base1]);c==12&&(c=0),o.am>-1&&!this.isAm(u[o.am])&&(c+=12),l.hour=c}if(o.minute>-1&&(l.minute=parseInt(u[o.minute])),o.second>-1&&(l.second=parseInt(u[o.second])),o.millisecond>-1){let c=parseInt(u[o.millisecond]);o.millisecondDigits==2?c*=10:o.millisecondDigits==1&&(c*=100),l.millisecond=c}if(o.timestamp>-1){l.timestamp=parseInt(u[o.timestamp]);const c=new Date(l.timestamp);l.year=c.getUTCFullYear(),l.month=c.getUTCMonth(),l.day=c.getUTCDate(),l.hour=c.getUTCHours(),l.minute=c.getUTCMinutes(),l.second=c.getUTCSeconds(),l.millisecond=c.getUTCMilliseconds()}o.zone>-1&&(l.offset=this.resolveTimezoneOffset(new Date(l.year,l.month,l.day),u[o.zone])),o.iso>-1&&(l.year=rt(u[o.iso+0]),l.month=rt(u[o.iso+1])-1,l.day=rt(u[o.iso+2]),l.hour=rt(u[o.iso+3]),l.minute=rt(u[o.iso+4]),l.second=rt(u[o.iso+5]),l.millisecond=rt(u[o.iso+6]),u[o.iso+7]=="Z"||u[o.iso+7]=="z"?l.utc=!0:u[o.iso+7]!=""&&(l.offset=this.resolveTimezoneOffset(new Date(l.year,l.month,l.day),u[o.iso+7]))),l.utc?s=new Date(Date.UTC(l.year,l.month,l.day,l.hour,l.minute,l.second,l.millisecond)):s=new Date(l.year,l.month,l.day,l.hour,l.minute+l.offset,l.second,l.millisecond)}else s=new Date(t);return s}resolveTimezoneOffset(t,e){if(e.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let s=e.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),n=s[1],r=s[2],o=s[3],l=parseInt(r)*60+parseInt(o);n=="+"&&(l*=-1);let h=(t||new Date).getTimezoneOffset();return l-h}return 0}resolveMonth(t){let e=this._months().indexOf(t);return e>-1||!this._root.language.isDefault()&&(e=this._root.language.translateAll(this._months()).indexOf(t),e>-1)?e:0}resolveShortMonth(t){let e=this._shortMonths().indexOf(t);return e>-1||(e=this._months().indexOf(t),e>-1)||this._root.language&&!this._root.language.isDefault()&&(e=this._root.language.translateAll(this._shortMonths()).indexOf(t),e>-1)?e:0}isAm(t){return this.getStringList(["AM","A.M.","A"]).indexOf(t.toUpperCase())>-1}getStringList(t){let e=[];for(let i=0;i<t.length;i++)this._root.language?e.push(Pi(this._t(t[i]))):e.push(Pi(t[i]));return e}}class cn extends J{constructor(){super(...arguments),this._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}}_setDefaults(){const t="_duration_millisecond",e="_duration_second",i="_duration_minute",s="_duration_hour",n="_duration_day",r="_duration_week",o="_duration_month",l="_duration_year",h="_second",d="_minute",f="_hour",u="_day",c="_week",p="_week",m="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(t),second:this._t(t+h),minute:this._t(t+d),hour:this._t(t+f),day:this._t(t+u),week:this._t(t+c),month:this._t(t+p),year:this._t(t+m)},second:{second:this._t(e),minute:this._t(e+d),hour:this._t(e+f),day:this._t(e+u),week:this._t(e+c),month:this._t(e+p),year:this._t(e+m)},minute:{minute:this._t(i),hour:this._t(i+f),day:this._t(i+u),week:this._t(i+c),month:this._t(i+p),year:this._t(i+m)},hour:{hour:this._t(s),day:this._t(s+u),week:this._t(s+c),month:this._t(s+p),year:this._t(s+m)},day:{day:this._t(n),week:this._t(n+c),month:this._t(n+p),year:this._t(n+m)},week:{week:this._t(r),month:this._t(r+p),year:this._t(r+m)},month:{month:this._t(o),year:this._t(o+m)},year:{year:this._t(l)}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(t,e,i){let s=i||this.get("baseUnit");(typeof e>"u"||e==="")&&(this.get("durationFormat")!=null?e=this.get("durationFormat"):e=this.getFormat(rt(t),void 0,s)),e=yi(e);let n=this.parseFormat(e,s),r=Number(t),o;r>this.get("negativeBase")?o=n.positive:r<this.get("negativeBase")?o=n.negative:o=n.zero;let l=this.applyFormat(r,o);return o.color!==""&&(l="["+o.color+"]"+l+"[/]"),l}parseFormat(t,e){let i=e||this.get("baseUnit"),s={positive:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1}};t=t.replace("||",Vt);let n=t.split("|");return s.positive.source=n[0],typeof n[2]>"u"?s.zero=s.positive:s.zero.source=n[2],typeof n[1]>"u"?s.negative=s.positive:s.negative.source=n[1],N(s,(r,o)=>{if(o.parsed)return;let l=o.source,h=[];h=o.source.match(/^\[([^\]]*)\]/),h&&h.length&&h[0]!==""&&(l=o.source.substr(h[0].length),o.color=h[1]);let d=ut.chunk(l,!0);for(let f=0;f<d.length;f++){let u=d[f];if(u.text=u.text.replace(Vt,"|"),u.type==="value"){u.text.match(/[yYMdDwhHKkmsSn]+a/)&&(o.absolute=!0,u.text=u.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let c=u.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(c)for(let p=0;p<c.length;p++)c[p]==null&&(c[p]=this._unitAliases[c[p]]),o.parts.push(c[p]),u.text=u.text.replace(c[p],At)}o.template+=u.text}o.parsed=!0}),s}applyFormat(t,e){let i=!e.absolute&&t<this.get("negativeBase");t=Math.abs(t);let s=this.toTimeStamp(t,e.baseUnit),n=e.template;const r={millisecond:0,second:0,minute:0,hour:0,day:0,week:0,month:0,year:0};for(let o=0,l=e.parts.length;o<l;o++){let h=e.parts[o],d=this._toTimeUnit(h.substr(0,1)),f;const u=this._getUnitValue(d);o<l-1?f=Math.floor(s/u):f=Math.round(s/u),r[d]+=f,s-=f*u}N(r,(o,l)=>{o=="millisecond"&&l==1e3?(r.second++,r.millisecond=0):o=="second"&&l==60?(r.minute++,r.second=0):o=="minute"&&l==60?(r.hour++,r.minute=0):o=="hour"&&l==24?(r.day++,r.hour=0):o=="day"&&l==7&&e.parts.indexOf("w")!==-1?(r.week++,r.day=0):o=="day"&&l==30?(r.month++,r.day=0):o=="month"&&l==12&&(r.year++,r.month=0)});for(let o=0,l=e.parts.length;o<l;o++){let h=e.parts[o],d=this._toTimeUnit(h.substr(0,1)),f=h.length;n=n.replace(At,V(r[d],f,"0"))}return i&&(n="-"+n),n}toTimeStamp(t,e){return t*this._getUnitValue(e)}_toTimeUnit(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(t,e,i){if(this.get("durationFormat")!=null)return this.get("durationFormat");if(i||(i=this.get("baseUnit")),e!=null&&t!=e){t=Math.abs(t),e=Math.abs(e);let s=this.getValueUnit(Math.max(t,e),i);return this.get("durationFormats")[i][s]}else{let s=this.getValueUnit(t,i);return this.get("durationFormats")[i][s]}}getValueUnit(t,e){e||(e=this.get("baseUnit"));let i,s=this.getMilliseconds(t,e);return ms(this._getUnitValues(),(n,r)=>{if(n==e||i){if(s/r<=1)return i||(i=n),!1;i=n}return!0}),i}getMilliseconds(t,e){return e||(e=this.get("baseUnit")),t*this._getUnitValue(e)}_getUnitValue(t){return this._getUnitValues()[t]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}const es={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"μ",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_short:"HH",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(a){let t="th";if(a<11||a>13)switch(a%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd";break}return t},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:"",Confirm:""};class un extends J{_setDefaults(){this.setPrivate("defaultLocale",es),super._setDefaults()}translate(t,e,...i){e||(e=this._root.locale||this.getPrivate("defaultLocale"));let s=t,n=e[t];if(n===null)s="";else if(n!=null)n&&(s=n);else if(e!==this.getPrivate("defaultLocale"))return this.translate(t,this.getPrivate("defaultLocale"),...i);if(i.length)for(let r=i.length,o=0;o<r;++o)s=s.split("%"+(o+1)).join(i[o]);return s}translateAny(t,e,...i){return this.translate(t,e,...i)}setTranslationAny(t,e,i){const s=i||this._root.locale;s[t]=e}setTranslationsAny(t,e){N(t,(i,s)=>{this.setTranslationAny(i,s,e)})}translateEmpty(t,e,...i){let s=this.translate(t,e,...i);return s==t?"":s}translateFunc(t,e){return this._root.locale[t]?this._root.locale[t]:e!==this.getPrivate("defaultLocale")?this.translateFunc(t,this.getPrivate("defaultLocale")):()=>""}translateAll(t,e){return this.isDefault()?t:ni(t,i=>this.translate(i,e))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class xi{constructor(t,e){if(this._rules={},this._root=t,!e)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(t){const e=new this(t,!0);return e.setupDefaultRules(),e}setupDefaultRules(){}_lookupRules(t){return this._rules[t]}ruleRaw(t,e=[]){let i=this._rules[t];i||(i=this._rules[t]=[]),e.sort(Ot);const{index:s,found:n}=fs(i,r=>{const o=Ot(r.tags.length,e.length);return o===0?Ji(r.tags,e,Ot):o});if(n)return i[s].template;{const r=Ct.new({});return i.splice(s,0,{tags:e,template:r}),r}}rule(t,e=[]){return this.ruleRaw(t,e)}}function P(a,t,e,i){a.set(t,e.get(i)),e.on(i,s=>{a.set(t,s)})}class fn extends xi{setupDefaultRules(){super.setupDefaultRules();const t=this._root.language,e=this._root.interfaceColors,i=this._root.horizontalLayout,s=this._root.verticalLayout,n=this.rule.bind(this);n("InterfaceColors").setAll({stroke:S.fromHex(15066597),fill:S.fromHex(15987699),primaryButton:S.fromHex(6788316),primaryButtonHover:S.fromHex(6779356),primaryButtonDown:S.fromHex(6872182),primaryButtonActive:S.fromHex(6872182),primaryButtonDisabled:S.fromHex(14342874),primaryButtonTextDisabled:S.fromHex(16777215),primaryButtonText:S.fromHex(16777215),primaryButtonStroke:S.fromHex(16777215),secondaryButton:S.fromHex(14277081),secondaryButtonHover:S.fromHex(10724259),secondaryButtonDown:S.fromHex(9276813),secondaryButtonActive:S.fromHex(15132390),secondaryButtonText:S.fromHex(0),secondaryButtonStroke:S.fromHex(16777215),grid:S.fromHex(0),background:S.fromHex(16777215),alternativeBackground:S.fromHex(0),text:S.fromHex(0),alternativeText:S.fromHex(16777215),disabled:S.fromHex(11382189),positive:S.fromHex(5288704),negative:S.fromHex(11730944)});{const r=n("ColorSet");r.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[S.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),r.setPrivate("currentStep",0),r.setPrivate("currentPass",0)}n("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:Et(St)}),n("Component").setAll({interpolationDuration:0,interpolationEasing:Et(St)}),n("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:L,tooltipY:L,tooltipPosition:"fixed",isMeasured:!0}),n("Sprite").states.create("default",{visible:!0,opacity:1}),n("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),n("Graphics").setAll({strokeWidth:1}),n("Chart").setAll({width:H,height:H,interactiveChildren:!1}),n("ZoomableContainer").setAll({width:H,height:H,wheelable:!0,pinchZoom:!0,maxZoomLevel:32,minZoomLevel:1,zoomStep:2,animationEasing:Et(St),animationDuration:600,maxPanOut:.4}),n("Sprite",["horizontal","center"]).setAll({centerX:L,x:L}),n("Sprite",["vertical","center"]).setAll({centerY:L,y:L}),n("Container",["horizontal","layout"]).setAll({layout:i}),n("Container",["vertical","layout"]).setAll({layout:s}),n("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),n("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),n("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),n("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),n("GrainPattern").setAll({width:200,height:200,colors:[S.fromHex(0)],size:1,horizontalGap:0,verticalGap:0,density:1,minOpacity:0,maxOpacity:.2});{const r=n("PatternSet");r.setAll({step:1}),P(r,"color",e,"stroke")}n("LinearGradient").setAll({rotation:90}),n("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:zt.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),n("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:i,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:t.translate("Press ENTER to toggle"),role:"checkbox"});{const r=n("Rectangle",["legend","item","background"]);r.setAll({fillOpacity:0}),P(r,"fill",e,"background")}n("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:L,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),n("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:H,height:H,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const r=n("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});P(r,"fill",e,"disabled"),P(r,"stroke",e,"disabled")}n("Label",["legend","label"]).setAll({centerY:L,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0});{const r=n("Label",["legend","label"]).states.create("disabled",{});P(r,"fill",e,"disabled")}n("Label",["legend","value","label"]).setAll({centerY:L,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:H,populateText:!0});{const r=n("Label",["legend","value","label"]).states.create("disabled",{});P(r,"fill",e,"disabled")}n("HeatLegend").setAll({stepCount:1}),n("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),n("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:H,width:15}),n("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:H,height:15}),n("HeatLegend",["vertical"]).setAll({height:H}),n("HeatLegend",["horizontal"]).setAll({width:H}),n("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),n("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const r=n("Label");r.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),P(r,"fill",e,"text")}n("RadialLabel").setAll({textType:"regular",centerY:L,centerX:L,inside:!1,radius:0,baseRadius:H,orientation:"auto",textAlign:"center"}),n("EditableLabel").setAll({editOn:"click",themeTags:["editablelabel"],multiLine:!0}),n("RoundedRectangle",["editablelabel","background"]).setAll({fillOpacity:0,fill:S.fromHex(0),cornerRadiusBL:3,cornerRadiusBR:3,cornerRadiusTL:3,cornerRadiusTR:3,strokeOpacity:0,stroke:S.fromHex(0)}),n("RoundedRectangle",["editablelabel","background"]).states.create("active",{strokeOpacity:.2}),n("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),n("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),n("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const r=n("Tick");r.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),P(r,"stroke",e,"grid")}n("Bullet").setAll({locationX:.5,locationY:.5}),n("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:L,centerY:L,animationEasing:Et(St),exportable:!1}),n("Tooltip",["system"]).setAll({pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});{const r=n("PointedRectangle",["tooltip","system","background"]);r.setAll({strokeOpacity:.3}),P(r,"fill",e,"background"),P(r,"stroke",e,"grid")}n("Label",["tooltip","system"]).setAll({fontSize:12,fill:e.get("background")}),n("Polygon").setAll({animationEasing:Et(St)}),n("Link").setAll({cornerRadius:8,setStateOnChildren:!0});{const r=n("OrthogonalLine",["link","line"]);r.setAll({isMeasured:!1,crisp:!0});const o=r.states.create("active",{strokeWidth:2});P(o,"stroke",e,"negative")}n("OrthogonalLine",["link","hit"]).setAll({strokeWidth:10,opacity:0,strokeOpacity:0});{const r=n("OrthogonalLine");r.setAll({strokeWidth:1,strokeOpacity:1,cornerRadius:10}),P(r,"stroke",e,"grid")}{const r=n("Triangle",["link"]);r.setAll({width:14,height:10,centerY:0}),P(r,"fill",e,"grid"),P(r,"stroke",e,"grid"),r.states.create("default",{stateAnimationDuration:0});const o=r.states.create("active",{stateAnimationDuration:0,stroke:Ut(16777215),strokeWidth:2});o.set("draw",l=>{l.arc(0,0,11,0,Math.PI*2),l.moveTo(-4,-4),l.lineTo(4,4),l.moveTo(4,-4),l.lineTo(-4,4)}),P(o,"fill",e,"negative")}n("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:S.fromHex(16777215)});{const r=n("Label",["tooltip"]);r.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),P(r,"fill",e,"alternativeText")}n("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:i,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),n("Button").states.create("hover",{}),n("Button").states.create("down",{stateAnimationDuration:0}),n("Button").states.create("active",{}),n("Button").states.create("disabled",{forceInactive:!0});{const r=n("RoundedRectangle",["button","background"]);P(r,"fill",e,"primaryButton"),P(r,"stroke",e,"primaryButtonStroke")}{const r=n("RoundedRectangle",["button","background"]).states.create("hover",{});P(r,"fill",e,"primaryButtonHover")}{const r=n("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0});P(r,"fill",e,"primaryButtonDown")}{const r=n("RoundedRectangle",["button","background"]).states.create("active",{});P(r,"fill",e,"primaryButtonActive")}{const r=n("RoundedRectangle",["button","background"]).states.create("disabled",{});P(r,"fill",e,"primaryButtonDisabled")}{const r=n("Graphics",["button","icon"]).states.create("disabled",{});P(r,"fill",e,"primaryButtonTextDisabled")}{const r=n("Label",["button"]).states.create("disabled",{});P(r,"fill",e,"primaryButtonTextDisabled")}{const r=n("Graphics",["button","icon"]);r.setAll({forceInactive:!0}),P(r,"stroke",e,"primaryButtonText")}{const r=n("Label",["button"]);P(r,"fill",e,"primaryButtonText")}n("ConfirmButton").setAll({toggleKey:"active",setStateOnChildren:!0,label:Dt.new(this._root,{text:t.translate("Confirm"),forceHidden:!0})});{const r=n("RoundedRectangle",["button","background","confirm"]).states.create("active",{});P(r,"fill",e,"negative")}n("Label",["button","confirm"]).setAll({paddingTop:0,paddingBottom:0,paddingRight:3,paddingLeft:5}),n("Label",["button","confirm"]).states.create("default",{stateAnimationDuration:0}),n("Label",["button","confirm"]).states.create("active",{forceHidden:!1,stateAnimationDuration:0});{const r=n("Graphics",["icon","confirm","button"]);r.setAll({stateAnimationDuration:0}),r.states.create("default",{stateAnimationDuration:0}),P(r,"stroke",e,"primaryButtonText")}{const r=n("Graphics",["icon","confirm","button"]).states.create("active",{svgPath:"M -5 1 L 0 6 L 8 -5",strokeWidth:2});P(r,"stroke",e,"primaryButtonText")}{const r=n("Graphics",["icon","confirm","button","secondary"]).states.create("active",{});P(r,"stroke",e,"primaryButtonText")}{const r=n("RoundedRectangle",["button","background","confirm","secondary"]).states.create("active",{fillOpacity:1});P(r,"fill",e,"negative")}{const r=n("RoundedRectangle",["button","background","confirm","secondary"]).states.create("hoverActive",{fillOpacity:1});P(r,"fill",e,"negative")}n("Button",["button","confirm"]).states.create("hoverActive",{}),n("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:H,role:"button",ariaLabel:t.translate("Zoom Out"),layer:30});{const r=n("RoundedRectangle",["background","button","zoom"]);r.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),P(r,"fill",e,"primaryButton")}{const r=n("RoundedRectangle",["background","button","zoom"]).states.create("hover",{});P(r,"fill",e,"primaryButtonHover")}{const r=n("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0});P(r,"fill",e,"primaryButtonDown")}{const r=n("Graphics",["icon","button","zoom"]);r.setAll({crisp:!0,strokeOpacity:.7,draw:o=>{o.moveTo(0,0),o.lineTo(12,0)}}),P(r,"stroke",e,"primaryButtonText")}n("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:L,centerY:L,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:t.translate("Use up and down arrows to move selection")});{const r=n("RoundedRectangle",["background","resize","button"]);r.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),P(r,"fill",e,"secondaryButton"),P(r,"stroke",e,"secondaryButtonStroke")}{const r=n("RoundedRectangle",["background","resize","button"]).states.create("hover",{});P(r,"fill",e,"secondaryButtonHover")}{const r=n("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0});P(r,"fill",e,"secondaryButtonDown")}{const r=n("Graphics",["resize","button","icon"]);r.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:o=>{o.moveTo(0,.5),o.lineTo(0,12.5),o.moveTo(4,.5),o.lineTo(4,12.5)}}),P(r,"stroke",e,"secondaryButtonText")}n("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),n("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),n("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:t.translate("Play"),toggleKey:"active"});{const r=n("RoundedRectangle",["play","background"]);r.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),P(r,"fill",e,"primaryButton")}{const r=n("Graphics",["play","icon"]);r.setAll({stateAnimationDuration:0,dx:1,draw:o=>{o.moveTo(0,-5),o.lineTo(8,0),o.lineTo(0,5),o.lineTo(0,-5)}}),P(r,"fill",e,"primaryButtonText")}n("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),n("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:r=>{r.moveTo(-4,-5),r.lineTo(-1,-5),r.lineTo(-1,5),r.lineTo(-4,5),r.lineTo(-4,-5),r.moveTo(4,-5),r.lineTo(1,-5),r.lineTo(1,5),r.lineTo(4,5),r.lineTo(4,-5)}}),n("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:t.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const r=n("RoundedRectangle",["switch","background"]);r.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),P(r,"fill",e,"primaryButton")}{const r=n("Circle",["switch","icon"]);r.setAll({radius:8,centerY:0,centerX:0,dx:0}),P(r,"fill",e,"primaryButtonText")}n("Graphics",["switch","icon"]).states.create("active",{dx:16}),n("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:Et(St)}),n("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:H}),n("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:H}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const r=n("RoundedRectangle",["scrollbar","main","background"]);r.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),P(r,"fill",e,"fill")}{const r=n("RoundedRectangle",["scrollbar","thumb"]);r.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),P(r,"fill",e,"secondaryButton")}{const r=n("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{});P(r,"fill",e,"secondaryButtonHover")}{const r=n("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0});P(r,"fill",e,"secondaryButtonDown")}n("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:L,width:H,centerX:L,ariaLabel:t.translate("Use up and down arrows to move selection")}),n("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:L,centerY:L,height:H,ariaLabel:t.translate("Use left and right arrows to move selection")});{const r=n("PointedRectangle",["axis","tooltip","background"]);r.setAll({cornerRadius:0}),P(r,"fill",e,"alternativeBackground")}n("Label",["axis","tooltip"]).setAll({role:void 0}),n("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),n("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),n("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),n("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),n("Star").setAll({spikes:5,innerRadius:5,radius:10}),n("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),n("Tooltip",["indicator"]).setAll({forceHidden:!0}),n("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),n("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),n("SpriteResizer").setAll({rotationStep:10,isMeasured:!1}),n("Container",["resizer","grip"]).states.create("hover",{});{const r=n("RoundedRectangle",["resizer","grip"]);r.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),P(r,"fill",e,"background"),P(r,"stroke",e,"alternativeBackground")}{const r=n("RoundedRectangle",["resizer","grip","outline"]);r.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),r.states.create("hover",{fillOpacity:.3}),P(r,"fill",e,"alternativeBackground")}n("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),n("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const r=n("Rectangle",["resizer","rectangle"]);r.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),P(r,"stroke",e,"alternativeBackground")}n("Graphics",["button","plus","icon"]).setAll({x:L,y:L,draw:r=>{r.moveTo(-4,0),r.lineTo(4,0),r.moveTo(0,-4),r.lineTo(0,4)}}),n("Graphics",["button","minus","icon"]).setAll({x:L,y:L,draw:r=>{r.moveTo(-4,0),r.lineTo(4,0)}}),n("Graphics",["button","home","icon"]).setAll({x:L,y:L,svgPath:"M 8 -1 L 6 -1 L 6 7 L 2 7 L 2 1 L -2 1 L -2 7 L -6 7 L -6 -1 L -8 -1 L 0 -9 L 8 -1 Z M 8 -1"}),n("Button",["zoomtools"]).setAll({marginTop:1,marginBottom:2}),n("ZoomTools").setAll({x:H,centerX:H,y:H,centerY:H,paddingRight:10,paddingBottom:10}),n("ProgressPie").setAll({radius:H,width:50,height:50,centerX:Pt(-50),centerY:Pt(-50),innerRadius:Pt(85),numberFormat:"#."});{const r=n("Label",["progresspie"]);r.setAll({centerX:L,centerY:L,fontSize:"0.75em"}),P(r,"fill",e,"primaryButton")}{const r=n("Circle",["progresspie"]);r.setAll({fillOpacity:.5}),P(r,"fill",e,"background")}{const r=n("Slice",["progresspie"]);r.setAll({startAngle:-90}),P(r,"fill",e,"primaryButton")}{const r=n("Slice",["progresspie","background"]);r.setAll({fillOpacity:.2,arc:360}),P(r,"fill",e,"primaryButton")}n("EditableLabel",["numericstepper"]).setAll({y:L,centerY:L,multiLine:!1,marginRight:2});{const r=n("Container",["numericstepper","buttons"]);r.setAll({layout:this._root.verticalLayout,centerY:L,y:L,marginRight:10,opacity:0}),r.states.create("active",{opacity:1}),r.states.create("default",{opacity:0})}{const r=n("Triangle",["numericstepper"]);r.setAll({width:17,height:11,marginTop:3,marginBottom:3,strokeWidth:5,strokeOpacity:0,cursorOverStyle:"pointer"}),P(r,"fill",e,"secondaryButton")}n("Triangle",["downbutton"]).setAll({rotation:180})}}class Ze{constructor(t=1,e=0,i=0,s=1,n=0,r=0){this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=r}setTransform(t,e,i,s,n,r=1){this.a=Math.cos(n)*r,this.b=Math.sin(n)*r,this.c=-Math.sin(n)*r,this.d=Math.cos(n)*r,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d)}apply(t){return{x:this.a*t.x+this.c*t.y+this.tx,y:this.b*t.x+this.d*t.y+this.ty}}applyInverse(t){const e=1/(this.a*this.d+this.c*-this.b);return{x:this.d*e*t.x+-this.c*e*t.y+(this.ty*this.c-this.tx*this.d)*e,y:this.a*e*t.y+-this.b*e*t.x+(-this.ty*this.a+this.tx*this.b)*e}}append(t){const e=this.a,i=this.b,s=this.c,n=this.d;this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty}copyFrom(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty}}var pn=function(){function a(t,e){var i=[],s=!0,n=!1,r=void 0;try{for(var o=t[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(i.push(l.value),!(e&&i.length===e));s=!0);}catch(h){n=!0,r=h}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return i}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return a(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),se=Math.PI*2,Je=function(t,e,i,s,n,r,o){var l=t.x,h=t.y;l*=e,h*=i;var d=s*l-n*h,f=n*l+s*h;return{x:d+r,y:f+o}},gn=function(t,e){var i=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=Math.cos(t),n=Math.sin(t),r=Math.cos(t+e),o=Math.sin(t+e);return[{x:s-n*i,y:n+s*i},{x:r+o*i,y:o-r*i},{x:r,y:o}]},Ri=function(t,e,i,s){var n=t*s-e*i<0?-1:1,r=t*i+e*s;return r>1&&(r=1),r<-1&&(r=-1),n*Math.acos(r)},_n=function(t,e,i,s,n,r,o,l,h,d,f,u){var c=Math.pow(n,2),p=Math.pow(r,2),m=Math.pow(f,2),g=Math.pow(u,2),_=c*p-c*g-p*m;_<0&&(_=0),_/=c*g+p*m,_=Math.sqrt(_)*(o===l?-1:1);var y=_*n/r*u,x=_*-r/n*f,v=d*y-h*x+(t+i)/2,D=h*y+d*x+(e+s)/2,M=(f-y)/n,k=(u-x)/r,E=(-f-y)/n,I=(-u-x)/r,B=Ri(1,0,M,k),A=Ri(M,k,E,I);return l===0&&A>0&&(A-=se),l===1&&A<0&&(A+=se),[v,D,B,A]},mn=function(t){var e=t.px,i=t.py,s=t.cx,n=t.cy,r=t.rx,o=t.ry,l=t.xAxisRotation,h=l===void 0?0:l,d=t.largeArcFlag,f=d===void 0?0:d,u=t.sweepFlag,c=u===void 0?0:u,p=[];if(r===0||o===0)return[];var m=Math.sin(h*se/360),g=Math.cos(h*se/360),_=g*(e-s)/2+m*(i-n)/2,y=-m*(e-s)/2+g*(i-n)/2;if(_===0&&y===0)return[];r=Math.abs(r),o=Math.abs(o);var x=Math.pow(_,2)/Math.pow(r,2)+Math.pow(y,2)/Math.pow(o,2);x>1&&(r*=Math.sqrt(x),o*=Math.sqrt(x));var v=_n(e,i,s,n,r,o,f,c,m,g,_,y),D=pn(v,4),M=D[0],k=D[1],E=D[2],I=D[3],B=Math.abs(I)/(se/4);Math.abs(1-B)<1e-7&&(B=1);var A=Math.max(Math.ceil(B),1);I/=A;for(var F=0;F<A;F++)p.push(gn(E,I)),E+=I;return p.map(function(w){var C=Je(w[0],r,o,g,m,M,k),R=C.x,ht=C.y,z=Je(w[1],r,o,g,m,M,k),Y=z.x,j=z.y,et=Je(w[2],r,o,g,m,M,k),pt=et.x,Q=et.y;return{x1:R,y1:ht,x2:Y,y2:j,x:pt,y:Q}})};function yn(a,t,e){if(t!==e)throw new Error("Required "+e+" arguments for "+a+" but got "+t)}function Qt(a,t,e){if(t<e)throw new Error("Required at least "+e+" arguments for "+a+" but got "+t)}function nt(a,t,e){if(Qt(a,t,e),t%e!==0)throw new Error("Arguments for "+a+" must be in pairs of "+e)}function vn(a){for(let t=0;t<a.length;t+=7){let e=t+3,i=a[e];if(i.length>1){const s=/^([01])([01])(.*)$/.exec(i);s!==null&&(a.splice(e,0,s[1]),++e,a.splice(e,0,s[2]),++e,s[3].length>0?a[e]=s[3]:a.splice(e,1))}if(++e,i=a[e],i.length>1){const s=/^([01])(.+)$/.exec(i);s!==null&&(a.splice(e,0,s[1]),++e,a[e]=s[2])}}}function Li(a){if(a===0||a===1)return a;throw new Error("Flag must be 0 or 1")}function xn(a){const t=[0,0,0];for(let e=0;e<24;e++)t[e%3]<<=1,t[e%3]|=a&1,a>>=1;return(t[0]|0)+(t[1]<<8)+(t[2]<<16)}function Se(a,t){for(;!(a.interactive&&!t(a));)if(a._parent)a=a._parent;else break}function bn(a,t,e){return U(a,ai(t),i=>{const s=Gi(i);let n=i.touches;n?(n.length==0&&(n=i.changedTouches),e(ds(n),s)):e([i],s)})}function Ii(a){const t=document.createElement("canvas");t.width=1,t.height=1;const e=t.getContext("2d",{willReadFrequently:!0});e.drawImage(a,0,0,1,1);try{return e.getImageData(0,0,1,1),!1}catch{return console.warn('Image "'+a.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function te(a){a.width=0,a.height=0,a.style.width="0px",a.style.height="0px"}function Hi(a){return Math.floor(a)+.5}class wn{constructor(){this._x=0,this._y=0}get x(){return this._x}get y(){return this._y}set x(t){this._x=t}set y(t){this._y=t}}class Ue extends mi{constructor(t){super(),this.mask=null,this.visible=!0,this.exportable=!0,this.interactive=!1,this.inactive=null,this.wheelable=!1,this.cancelTouch=!1,this.isMeasured=!1,this.buttonMode=!1,this.alpha=1,this.compoundAlpha=1,this.angle=0,this.scale=1,this.x=0,this.y=0,this.crisp=!1,this.pivot=new wn,this._localMatrix=new Ze,this._matrix=new Ze,this._uMatrix=new Ze,this._renderer=t}subStatus(t){return{inactive:this.inactive==null?t.inactive:this.inactive,layer:this._layer||t.layer}}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let t=this;for(;;){if(t._layer)return t._layer;if(t._parent)t=t._parent;else return this._renderer.defaultLayer}}setLayer(t,e){t==null?this._layer=void 0:(this._layer=this._renderer.getLayer(t,!0),this._layer.visible=!0,this._layer.margin=e,e&&Yt(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(t){}_getColorId(){return this._colorId===void 0&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(t){return!t.inactive&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(t){return this._isInteractive(t)}contains(t){for(;;){if(t===this)return!0;if(t._parent)t=t._parent;else return!1}}toGlobal(t){return this._matrix.apply(t)}toLocal(t){return this._matrix.applyInverse(t)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(t){this._setMatrix();const e=this.getLocalMatrix(),i=e.apply({x:t.left,y:t.top}),s=e.apply({x:t.right,y:t.top}),n=e.apply({x:t.right,y:t.bottom}),r=e.apply({x:t.left,y:t.bottom});return{left:Math.min(i.x,s.x,n.x,r.x),top:Math.min(i.y,s.y,n.y,r.y),right:Math.max(i.x,s.x,n.x,r.x),bottom:Math.max(i.y,s.y,n.y,r.y)}}on(t,e,i){return this.interactive?this._renderer._addEvent(this,t,e,i):new K(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(t,e){const i=this._matrix;let s=i.tx*e,n=i.ty*e;this.crisp&&(s=Hi(s),n=Hi(n)),t.setTransform(i.a*e,i.b*e,i.c*e,i.d*e,s,n)}_transformMargin(t,e,i){const s=this._matrix;t.setTransform(s.a*e,s.b*e,s.c*e,s.d*e,(s.tx+i.left)*e,(s.ty+i.top)*e)}_transformLayer(t,e,i){i.margin?this._transformMargin(t,i.scale||e,i.margin):this._transform(t,i.scale||e)}render(t,e=0){if(this.visible&&(this.exportable!==!1||!this._renderer._omitTainted)){this._setMatrix();const i=this.subStatus(t),s=this._renderer.resolution,n=this._renderer.layers,r=this._renderer._ghostLayer,o=r.context,l=this.mask;l&&l._setMatrix(),b(n,h=>{if(h){const d=h.context;d.save(),l&&(l._transformLayer(d,s,h),l._runPath(d),d.clip()),d.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(d,s,h),this.filter&&(d.filter=this.filter)}}),o.save(),l&&this._isInteractiveMask(i)&&(l._transformMargin(o,s,r.margin),l._runPath(o),o.clip()),this._transformMargin(o,s,r.margin),i.layer.order>0&&!e&&hs(this._renderer._deferredGhostLayers,i.layer.order),this._render(i,e),o.restore(),b(n,h=>{h&&h.context.restore()})}}_render(t,e=0){this.exportable===!1&&(t.layer.tainted=!0)}_ghostOnly(t=0){return t>0}_drawGhost(t,e=0){const i=this._isInteractive(t),s=t.layer.order||0;return!!(i&&(s==0&&!this._ghostOnly(e)||s==e))}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(t=>t.value===this)}shouldCancelTouch(){const t=this._renderer;return t.tapToActivate&&!t._touchActive?!1:this.cancelTouch?!0:this._parent?this._parent.shouldCancelTouch():!1}}class Dn extends Ue{constructor(){super(...arguments),this.interactiveChildren=!0,this._children=[]}_isInteractiveMask(t){return this.interactiveChildren||super._isInteractiveMask(t)}addChild(t){t._parent=this,this._children.push(t),t._layer&&this.registerChildLayer(t._layer)}addChildAt(t,e){t._parent=this,this._children.splice(e,0,t),t._layer&&this.registerChildLayer(t._layer)}removeChild(t){t._parent=void 0,tt(this._children,t)}_render(t,e){super._render(t);const i=this._renderer;this.interactive&&this.interactiveChildren&&++i._forceInteractive,b(this._children,s=>{s.compoundAlpha=this.compoundAlpha*this.alpha,s.render(t,e)}),this.interactive&&this.interactiveChildren&&--i._forceInteractive}registerChildLayer(t){this._childLayers||(this._childLayers=[]),re(this._childLayers,t),this._parent&&this._parent.registerChildLayer(t)}markDirtyLayer(t=!1){super.markDirtyLayer(),t&&this._childLayers&&b(this._childLayers,e=>e.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&b(this._childLayers,t=>{t.dirty=!0})}}function G(a,t){a.left=Math.min(a.left,t.x),a.top=Math.min(a.top,t.y),a.right=Math.max(a.right,t.x),a.bottom=Math.max(a.bottom,t.y)}class ${colorize(t,e){}colorizeGhost(t,e){this.colorize(t,e)}path(t){}pathGhost(t){this.path(t)}addBounds(t){}}class Tn extends ${colorize(t,e){t.beginPath()}}class Qe extends ${constructor(t){super(),this.color=t}colorize(t,e){e!==void 0?t.fillStyle=e:t.fillStyle=this.color}}class kn extends ${constructor(t){super(),this.clearShadow=t}colorize(t,e){t.fill(),this.clearShadow&&(t.shadowColor="",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}}class Sn extends ${colorize(t,e){t.stroke()}}class ti extends ${constructor(t,e,i,s){super(),this.width=t,this.color=e,this.lineJoin=i,this.lineCap=s}colorize(t,e){e!==void 0?t.strokeStyle=e:t.strokeStyle=this.color,t.lineWidth=this.width,this.lineJoin&&(t.lineJoin=this.lineJoin),this.lineCap&&(t.lineCap=this.lineCap)}}class Pn extends ${constructor(t){super(),this.dash=t}colorize(t,e){t.setLineDash(this.dash)}}class Cn extends ${constructor(t){super(),this.dashOffset=t}colorize(t,e){t.lineDashOffset=this.dashOffset}}class An extends ${constructor(t,e,i,s){super(),this.x=t,this.y=e,this.width=i,this.height=s}path(t){t.rect(this.x,this.y,this.width,this.height)}addBounds(t){const e=this.x,i=this.y,s=e+this.width,n=i+this.height;G(t,{x:e,y:i}),G(t,{x:s,y:i}),G(t,{x:e,y:n}),G(t,{x:s,y:n})}}class Mn extends ${constructor(t,e,i){super(),this.x=t,this.y=e,this.radius=i}path(t){t.moveTo(this.x+this.radius,this.y),t.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(t){G(t,{x:this.x-this.radius,y:this.y-this.radius}),G(t,{x:this.x+this.radius,y:this.y+this.radius})}}class Bn extends ${constructor(t,e,i,s){super(),this.x=t,this.y=e,this.radiusX=i,this.radiusY=s}path(t){t.ellipse(0,0,this.radiusX,this.radiusY,0,0,Math.PI*2)}addBounds(t){G(t,{x:this.x-this.radiusX,y:this.y-this.radiusY}),G(t,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class En extends ${constructor(t,e,i,s,n,r){super(),this.cx=t,this.cy=e,this.radius=i,this.startAngle=s,this.endAngle=n,this.anticlockwise=r}path(t){this.radius>0&&t.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(t){let e=oi(this.cx,this.cy,this.startAngle*ie,this.endAngle*ie,this.radius);G(t,{x:e.left,y:e.top}),G(t,{x:e.right,y:e.bottom})}}class Rn extends ${constructor(t,e,i,s,n){super(),this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.radius=n}path(t){this.radius>0&&t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(t){}}class Ln extends ${constructor(t,e){super(),this.x=t,this.y=e}path(t){t.lineTo(this.x,this.y)}addBounds(t){G(t,{x:this.x,y:this.y})}}class In extends ${constructor(t,e){super(),this.x=t,this.y=e}path(t){t.moveTo(this.x,this.y)}addBounds(t){G(t,{x:this.x,y:this.y})}}class Hn extends ${path(t){t.closePath()}}class On extends ${constructor(t,e,i,s,n,r){super(),this.cpX=t,this.cpY=e,this.cpX2=i,this.cpY2=s,this.toX=n,this.toY=r}path(t){t.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(t){G(t,{x:this.cpX,y:this.cpY}),G(t,{x:this.cpX2,y:this.cpY2}),G(t,{x:this.toX,y:this.toY})}}class Fn extends ${constructor(t,e,i,s){super(),this.cpX=t,this.cpY=e,this.toX=i,this.toY=s}path(t){t.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(t){G(t,{x:this.cpX,y:this.cpY}),G(t,{x:this.toX,y:this.toY})}}class zn extends ${constructor(t,e,i,s,n){super(),this.color=t,this.blur=e,this.offsetX=i,this.offsetY=s,this.opacity=n}colorize(t,e){this.opacity&&(t.fillStyle=this.color),t.shadowColor=this.color,t.shadowBlur=this.blur,t.shadowOffsetX=this.offsetX,t.shadowOffsetY=this.offsetY}colorizeGhost(t,e){}}class Nn extends ${constructor(t,e,i,s,n){super(),this.image=t,this.width=e,this.height=i,this.x=s,this.y=n}path(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(t){G(t,{x:this.x,y:this.y}),G(t,{x:this.width,y:this.height})}}class Wn extends Ue{constructor(){super(...arguments),this._operations=[],this.blendMode=Be.NORMAL,this._hasShadows=!1}clear(){super.clear(),this._operations.length=0}_pushOp(t){this._operations.push(t)}beginFill(t,e=1){this._fillAlpha=e,t?t instanceof S?this._pushOp(new Qe(t.toCSS(e))):(this.isMeasured=!0,this._pushOp(new Qe(t))):this._pushOp(new Qe("rgba(0, 0, 0, "+e+")"))}endFill(){this._pushOp(new kn(this._hasShadows))}endStroke(){this._pushOp(new Sn)}beginPath(){this._pushOp(new Tn)}lineStyle(t=0,e,i=1,s,n){this._strokeAlpha=i,e?e instanceof S?this._pushOp(new ti(t,e.toCSS(i),s,n)):this._pushOp(new ti(t,e,s,n)):this._pushOp(new ti(t,"rgba(0, 0, 0, "+i+")",s,n))}setLineDash(t){this._pushOp(new Pn(t||[]))}setLineDashOffset(t=0){this._pushOp(new Cn(t))}drawRect(t,e,i,s){this._pushOp(new An(t,e,i,s))}drawCircle(t,e,i){this._pushOp(new Mn(t,e,i))}drawEllipse(t,e,i,s){this._pushOp(new Bn(t,e,i,s))}arc(t,e,i,s,n,r=!1){this._pushOp(new En(t,e,i,s,n,r))}arcTo(t,e,i,s,n){this._pushOp(new Rn(t,e,i,s,n))}lineTo(t,e){this._pushOp(new Ln(t,e))}moveTo(t,e){this._pushOp(new In(t,e))}bezierCurveTo(t,e,i,s,n,r){this._pushOp(new On(t,e,i,s,n,r))}quadraticCurveTo(t,e,i,s){this._pushOp(new Fn(t,e,i,s))}closePath(){this._pushOp(new Hn)}shadow(t,e=0,i=0,s=0,n){this._hasShadows=!0,this._pushOp(new zn(n?t.toCSS(n):t.toCSS(this._fillAlpha||this._strokeAlpha),e,i,s))}image(t,e,i,s,n){this._pushOp(new Nn(t,e,i,s,n))}svgPath(t){let e=0,i=0,s=null,n=null,r=null,o=null;const l=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,h=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g,d=this._operations.length;try{let f;for(;(f=l.exec(t))!==null;){const u=f[1],c=f[2],p=[];for(;(f=h.exec(c))!==null;)p.push(f[1]);switch(u!=="S"&&u!=="s"&&u!=="C"&&u!=="c"&&(s=null,n=null),u!=="Q"&&u!=="q"&&u!=="T"&&u!=="t"&&(r=null,o=null),u){case"M":nt(u,p.length,2),e=+p[0],i=+p[1],this.moveTo(e,i);for(let g=2;g<p.length;g+=2)e=+p[g],i=+p[g+1],this.lineTo(e,i);break;case"m":nt(u,p.length,2),e+=+p[0],i+=+p[1],this.moveTo(e,i);for(let g=2;g<p.length;g+=2)e+=+p[g],i+=+p[g+1],this.lineTo(e,i);break;case"L":nt(u,p.length,2);for(let g=0;g<p.length;g+=2)e=+p[g],i=+p[g+1],this.lineTo(e,i);break;case"l":nt(u,p.length,2);for(let g=0;g<p.length;g+=2)e+=+p[g],i+=+p[g+1],this.lineTo(e,i);break;case"H":Qt(u,p.length,1);for(let g=0;g<p.length;++g)e=+p[g],this.lineTo(e,i);break;case"h":Qt(u,p.length,1);for(let g=0;g<p.length;++g)e+=+p[g],this.lineTo(e,i);break;case"V":Qt(u,p.length,1);for(let g=0;g<p.length;++g)i=+p[g],this.lineTo(e,i);break;case"v":Qt(u,p.length,1);for(let g=0;g<p.length;++g)i+=+p[g],this.lineTo(e,i);break;case"C":nt(u,p.length,6);for(let g=0;g<p.length;g+=6){const _=+p[g],y=+p[g+1];s=+p[g+2],n=+p[g+3],e=+p[g+4],i=+p[g+5],this.bezierCurveTo(_,y,s,n,e,i)}break;case"c":nt(u,p.length,6);for(let g=0;g<p.length;g+=6){const _=+p[g]+e,y=+p[g+1]+i;s=+p[g+2]+e,n=+p[g+3]+i,e+=+p[g+4],i+=+p[g+5],this.bezierCurveTo(_,y,s,n,e,i)}break;case"S":nt(u,p.length,4),(s===null||n===null)&&(s=e,n=i);for(let g=0;g<p.length;g+=4){const _=2*e-s,y=2*i-n;s=+p[g],n=+p[g+1],e=+p[g+2],i=+p[g+3],this.bezierCurveTo(_,y,s,n,e,i)}break;case"s":nt(u,p.length,4),(s===null||n===null)&&(s=e,n=i);for(let g=0;g<p.length;g+=4){const _=2*e-s,y=2*i-n;s=+p[g]+e,n=+p[g+1]+i,e+=+p[g+2],i+=+p[g+3],this.bezierCurveTo(_,y,s,n,e,i)}break;case"Q":nt(u,p.length,4);for(let g=0;g<p.length;g+=4)r=+p[g],o=+p[g+1],e=+p[g+2],i=+p[g+3],this.quadraticCurveTo(r,o,e,i);break;case"q":nt(u,p.length,4);for(let g=0;g<p.length;g+=4)r=+p[g]+e,o=+p[g+1]+i,e+=+p[g+2],i+=+p[g+3],this.quadraticCurveTo(r,o,e,i);break;case"T":nt(u,p.length,2),(r===null||o===null)&&(r=e,o=i);for(let g=0;g<p.length;g+=2)r=2*e-r,o=2*i-o,e=+p[g],i=+p[g+1],this.quadraticCurveTo(r,o,e,i);break;case"t":nt(u,p.length,2),(r===null||o===null)&&(r=e,o=i);for(let g=0;g<p.length;g+=2)r=2*e-r,o=2*i-o,e+=+p[g],i+=+p[g+1],this.quadraticCurveTo(r,o,e,i);break;case"A":case"a":const m=u==="a";vn(p),nt(u,p.length,7);for(let g=0;g<p.length;g+=7){let _=+p[g+5],y=+p[g+6];m&&(_+=e,y+=i);const x=mn({px:e,py:i,rx:+p[g],ry:+p[g+1],xAxisRotation:+p[g+2],largeArcFlag:Li(+p[g+3]),sweepFlag:Li(+p[g+4]),cx:_,cy:y});b(x,v=>{this.bezierCurveTo(v.x1,v.y1,v.x2,v.y2,v.x,v.y),e=v.x,i=v.y})}break;case"Z":case"z":yn(u,p.length,0),this.closePath();break}}}catch(f){this._operations.length=d,console.warn(`Error when parsing svgPath:
  `+f.message+`
`+t)}}_runPath(t){t.beginPath(),b(this._operations,e=>{e.path(t)})}_render(t,e=0){super._render(t);const i=t.layer.dirty,s=this._isInteractive(t),n=this._ghostOnly(e),r=this._drawGhost(t,e);if(i||s||n){const o=t.layer.context,l=this._renderer._ghostLayer.context;i&&!n&&(o.globalCompositeOperation=this.blendMode,o.beginPath());let h;r&&(l.beginPath(),h=this._getColorId()),b(this._operations,d=>{i&&!n&&(d.path(o),d.colorize(o,void 0)),r&&(d.pathGhost(l),d.colorizeGhost(l,h))})}}renderDetached(t){if(this.visible){this._setMatrix(),t.save();const e=this.mask;e&&(e._setMatrix(),e._transform(t,1),e._runPath(t),t.clip()),t.globalAlpha=this.compoundAlpha*this.alpha,this._transform(t,1),this.filter&&(t.filter=this.filter),t.globalCompositeOperation=this.blendMode,t.beginPath(),b(this._operations,i=>{i.path(t),i.colorize(t,void 0)}),t.restore()}}_addBounds(t){this.visible&&this.isMeasured&&b(this._operations,e=>{e.addBounds(t)})}}class is extends Ue{constructor(t,e,i){super(t),this.resolution=1,this.textVisible=!0,this._originalScale=1,this.text=e,this.style=i}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}invalidateVisibility(){this.textVisible=!0,this.scale=this._originalScale||1}_shared(t){this.style.textAlign&&(t.textAlign=this.style.textAlign),this.style.direction&&(t.direction=this.style.direction),this.style.textBaseline&&(t.textBaseline=this.style.textBaseline)}_prerender(t,e=!1,i=!1){super._render(t);const s=t.layer.context,n=this._renderer._ghostLayer.context,r=this.style;let o=this._getFontStyle(void 0,i);s.font=o,this._isInteractive(t)&&!e&&(n.font=o),r.fill&&(r.fill instanceof S?s.fillStyle=r.fill.toCSS(r.fillOpacity!=null?r.fillOpacity:1):s.fillStyle=r.fill),r.shadowColor&&(t.layer.context.shadowColor=r.shadowColor.toCSS(r.shadowOpacity||1)),r.shadowBlur&&(t.layer.context.shadowBlur=r.shadowBlur),r.shadowOffsetX&&(t.layer.context.shadowOffsetX=r.shadowOffsetX),r.shadowOffsetY&&(t.layer.context.shadowOffsetY=r.shadowOffsetY),this._shared(s),this._isInteractive(t)&&!e&&(n.fillStyle=this._getColorId(),this._shared(n))}_getFontStyle(t,e=!1){const i=this.style;let s=[];return t&&t.fontVariant?s.push(t.fontVariant):i.fontVariant&&s.push(i.fontVariant),e||(t&&t.fontWeight?s.push(t.fontWeight):i.fontWeight&&s.push(i.fontWeight)),t&&t.fontStyle?s.push(t.fontStyle):i.fontStyle&&s.push(i.fontStyle),t&&t.fontSize?(T(t.fontSize)&&(t.fontSize=t.fontSize+"px"),s.push(t.fontSize)):i.fontSize&&(T(i.fontSize)&&(i.fontSize=i.fontSize+"px"),s.push(i.fontSize)),t&&t.fontFamily?s.push(t.fontFamily):i.fontFamily?s.push(i.fontFamily):s.length&&s.push("Arial"),s.join(" ")}_render(t,e=0){if(this._textInfo||this._measure(t),this.textVisible){const i=this._isInteractive(t),s=t.layer.context,n=t.layer.dirty,r=this._renderer._ghostLayer.context,o=this._ghostOnly(e),l=this._drawGhost(t,e);s.save(),r.save(),this._prerender(t),b(this._textInfo,(h,d)=>{b(h.textChunks,(f,u)=>{if(f.style&&(s.save(),r.save(),o||(s.font=f.style),this._isInteractive(t)&&(r.font=f.style)),f.fill&&(s.save(),o||(s.fillStyle=f.fill.toCSS())),n&&!o&&s.fillText(f.text,f.offsetX,h.offsetY+f.offsetY),f.textDecoration=="underline"||f.textDecoration=="line-through"){let c=1,p=1,m=f.height;const g=this.style.oversizedBehavior||"";if(["truncate","wrap","wrap-no-break"].indexOf(g)>-1){const x=this._measureText(f.text,s);f.width=x.actualBoundingBoxLeft+x.actualBoundingBoxRight}let _=f.offsetX;switch(this.style.textAlign){case"right":case"end":_-=f.width;break;case"center":_-=f.width/2;break}if(f.style)switch(ut.getTextStyle(f.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":c=2;break}m&&(p=m/20);let y;f.textDecoration=="line-through"?y=c+h.offsetY+f.offsetY-f.height/2:y=c+p*1.5+h.offsetY+f.offsetY,o||(s.save(),s.beginPath(),f.fill?s.strokeStyle=f.fill.toCSS():this.style.fill&&this.style.fill instanceof S&&(s.strokeStyle=this.style.fill.toCSS()),s.lineWidth=c*p,s.moveTo(_,y),s.lineTo(_+f.width,y),s.stroke(),s.restore())}i&&this.interactive&&l&&r.fillText(f.text,f.offsetX,h.offsetY+f.offsetY),f.fill&&s.restore(),f.style&&(s.restore(),r.restore())})}),s.restore(),r.restore()}}_addBounds(t){if(this.visible&&this.isMeasured){const e=this._measure({inactive:this.inactive,layer:this.getLayer()});G(t,{x:e.left,y:e.top}),G(t,{x:e.right,y:e.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(t){const e=t.layer.context,i=this._renderer._ghostLayer.context,s=this.style.direction=="rtl";this._textInfo=[];const n=this.style.oversizedBehavior,r=this.style.maxWidth,o=T(r)&&n=="truncate",l=T(r)&&(n=="wrap"||n=="wrap-no-break");e.save(),i.save(),this._prerender(t,!0,this._ignoreFontWeight());const h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",d=this.text.toString().replace(/\r/g,"").split(/\n/);let f=!0,u=0,c=0,p=0,m;b(d,(_,y)=>{let x;for(_==""?x=[{type:"value",text:""}]:x=ut.chunk(_,!1,this.style.ignoreFormatting);x.length>0;){let v={offsetY:p,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const D=this._measureText(h,e),M=D.actualBoundingBoxAscent+D.actualBoundingBoxDescent;v.height=M,v.ascent=D.actualBoundingBoxAscent;let k,E=this.style.textDecoration,I,B,A=!1,F=!0,w=[],C;_i(x,(R,ht)=>{if(R.type=="format")if(R.text=="[/]")f||(e.restore(),i.restore(),f=!0),I=void 0,m=void 0,B=void 0,E=this.style.textDecoration,C=void 0,k=R.text;else{f||(e.restore(),i.restore());let z=ut.getTextStyle(R.text);const Y=this._getFontStyle(z);e.save(),i.save(),e.font=Y,m=Y,k=R.text,z.textDecoration&&(E=z.textDecoration),z.fill&&(I=z.fill),z.width&&(B=rt(z.width)),z.verticalAlign&&(C=z.verticalAlign),f=!1;const j=this._measureText(h,e),et=j.actualBoundingBoxAscent+j.actualBoundingBoxDescent;et>v.height&&(v.height=et),j.actualBoundingBoxAscent>v.ascent&&(v.ascent=j.actualBoundingBoxAscent)}else if(R.type=="value"&&!A){const z=this._measureText(R.text,e);let Y=z.actualBoundingBoxLeft+z.actualBoundingBoxRight;if(o){this.truncated=void 0;let Q=F||this.style.breakWords||!1;const dt=this.style.ellipsis||"",Wt=this._measureText(dt,e),ct=Wt.actualBoundingBoxLeft+Wt.actualBoundingBoxRight;if(v.width+Y>r){const Zt=r-v.width-ct;R.text=this._truncateText(e,R.text,Zt,Q),R.text+=dt,A=!0,this.truncated=!0}}else if(l&&v.width+Y>r){const Q=r-v.width,dt=this._truncateText(e,R.text,Q,!1,F&&this.style.oversizedBehavior!="wrap-no-break");if(dt=="")return this.textVisible=!0,!1;w=x.slice(ht+1),Xt(dt)!=Xt(R.text)&&(w.unshift({type:"value",text:R.text.substr(dt.length)}),k&&w.unshift({type:"format",text:k})),R.text=Xt(dt),x=[],A=!0}let j=1,et=1;if(m&&B&&B>Y){const Q=Y/B;switch(this.style.textAlign){case"right":case"end":j=Q;break;case"center":j=Q,et=Q;break;default:et=Q}Y=B}const pt=z.actualBoundingBoxAscent+z.actualBoundingBoxDescent;pt>v.height&&(v.height=pt),z.actualBoundingBoxAscent>v.ascent&&(v.ascent=z.actualBoundingBoxAscent),v.width+=Y,v.left+=z.actualBoundingBoxLeft/j,v.right+=z.actualBoundingBoxRight/et,v.textChunks.push({style:m,fill:I,text:R.text,width:Y,height:pt,left:z.actualBoundingBoxLeft,right:z.actualBoundingBoxRight,ascent:z.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:E,verticalAlign:C}),F=!1}return!0}),this.style.lineHeight instanceof O?(v.height*=this.style.lineHeight.value,v.ascent*=this.style.lineHeight.value):(v.height*=this.style.lineHeight||1.2,v.ascent*=this.style.lineHeight||1.2),u<v.left&&(u=v.left),c<v.right&&(c=v.right),this._textInfo.push(v),p+=v.height,x=w||[]}}),f||(e.restore(),i.restore()),b(this._textInfo,(_,y)=>{let x=0;b(_.textChunks,v=>{if(v.offsetX=x+v.left-_.left,v.offsetY+=_.height-_.height*(this.style.baselineRatio||.19),x+=v.width*(s?-1:1),v.verticalAlign)switch(v.verticalAlign){case"super":v.offsetY-=_.height/2-v.height/2;break;case"sub":v.offsetY+=v.height/2;break}})});const g={left:s?-c:-u,top:0,right:s?u:c,bottom:p};if(n!=="none"){const _=this._fitRatio(g);if(_<1)if(n=="fit")T(this.style.minScale)&&_<this.style.minScale?(this.textVisible=!1,g.left=0,g.top=0,g.right=0,g.bottom=0):(this._originalScale||(this._originalScale=this.scale),this.scale=_,this.textVisible=!0);else if(n=="hide")this.textVisible=!1,g.left=0,g.top=0,g.right=0,g.bottom=0;else{switch(this.style.textAlign){case"right":case"end":g.left=s?r:-r,g.right=0;break;case"center":g.left=-r/2,g.right=r/2;break;default:g.left=0,g.right=s?-r:r}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return e.restore(),i.restore(),g}_fitRatio(t){const e=this.style.maxWidth,i=this.style.maxHeight;if(!T(e)&&!T(i))return 1;const s=t.right-t.left,n=t.bottom-t.top;return Math.min(e/s||1,i/n||1)}_truncateText(t,e,i,s=!1,n=!0){let r;do{if(s)e=e.slice(0,-1);else{let l=e.replace(/[^,;:!?\\\/\s​]+[,;:!?\\\/\s​]*$/g,"");if((l==""||l===e)&&n)s=!0;else{if(l=="")return e;e=l}}const o=this._measureText(e,t);r=o.actualBoundingBoxLeft+o.actualBoundingBoxRight}while(r>i&&e!="");return e}_measureText(t,e){let i=e.measureText(t),s={};if(i.actualBoundingBoxAscent==null){const r=document.createElement("div");r.innerText=t,r.style.visibility="hidden",r.style.position="absolute",r.style.top="-1000000px;",r.style.fontFamily=this.style.fontFamily||"",r.style.fontSize=this.style.fontSize+"",document.body.appendChild(r);const o=r.getBoundingClientRect();document.body.removeChild(r);const l=o.height,h=i.width;s={actualBoundingBoxAscent:l,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:h,fontBoundingBoxAscent:l,fontBoundingBoxDescent:0,width:h}}else s={actualBoundingBoxAscent:i.actualBoundingBoxAscent,actualBoundingBoxDescent:i.actualBoundingBoxDescent,actualBoundingBoxLeft:i.actualBoundingBoxLeft,actualBoundingBoxRight:i.actualBoundingBoxRight,fontBoundingBoxAscent:i.actualBoundingBoxAscent,fontBoundingBoxDescent:i.actualBoundingBoxDescent,width:i.width};const n=i.width;switch(this.style.textAlign){case"right":case"end":s.actualBoundingBoxLeft=n,s.actualBoundingBoxRight=0;break;case"center":s.actualBoundingBoxLeft=n/2,s.actualBoundingBoxRight=n/2;break;default:s.actualBoundingBoxLeft=0,s.actualBoundingBoxRight=n}return s}}class Yn{constructor(){this.lineHeight=Pt(120),this.baselineRatio=.19,this.oversizedBehavior="none",this.breakWords=!1,this.ellipsis="…",this.ignoreFormatting=!1}}class Un extends is{constructor(){super(...arguments),this.textType="circular",this.inside=!1,this.orientation="auto",this.kerning=0,this._textReversed=!1}_render(t,e=0){switch(this.textType){case"circular":this._renderCircular(t,e);break;default:super._render(t,e);break}}_renderCircular(t,e=0){if(this.textVisible){this._prerender(t);const i=this._isInteractive(t),s=t.layer.context,n=t.layer.dirty,r=this._renderer._ghostLayer.context;s.save(),i&&r.save(),this._textInfo||this._measure(t);let o=this.radius||0,l=this.startAngle||0,h=0,d=this.orientation,f=d=="auto"?"auto":d=="inward";const u=this.inside,c=this.style.textAlign||"left",p=this.kerning||0;let m=c=="left"?1:-1;const g=!this._textReversed,_=this._ghostOnly(e),y=this._drawGhost(t,e);if(f=="auto"){let x=0,v=0;b(this._textInfo,(D,M)=>{const k=l+D.width/(o-D.height)/2*-m;k>x&&(x=k)}),c=="left"?v=(x+h/2)*ie:c=="right"?v=(x-h/2)*ie:v=l*ie,v=vi(v),f=v>=270||v<=90}f==!0&&g&&(this._textInfo.reverse(),this._textReversed=!0),b(this._textInfo,(x,v)=>{const D=x.height;u||(o+=D),(m==-1&&f||m==1&&!f)&&g&&x.textChunks.reverse();let M=l;h=0,c=="center"&&(M+=x.width/(o-D)/2*-m,h=M-l),M+=Math.PI*(f?0:1),s.save(),i&&r.save(),_||s.rotate(M),i&&r.rotate(M);let k=0;b(x.textChunks,(E,I)=>{const B=E.text,A=E.width;k=A/2/(o-D)*m,_||s.rotate(k),i&&r.rotate(k),E.style&&(s.save(),r.save(),_||(s.font=E.style),i&&(r.font=E.style)),E.fill&&(s.save(),_||(s.fillStyle=E.fill.toCSS())),_||(s.textBaseline="middle",s.textAlign="center"),i&&(r.textBaseline="middle",r.textAlign="center"),n&&!_&&s.fillText(B,0,(f?1:-1)*(0-o+D/2)),i&&y&&r.fillText(B,0,(f?1:-1)*(0-o+D/2)),E.fill&&s.restore(),E.style&&(s.restore(),r.restore()),k=(A/2+p)/(o-D)*m,_||s.rotate(k),i&&r.rotate(k)}),s.restore(),i&&r.restore(),u&&(o-=D)}),s.restore(),i&&r.restore()}}_measure(t){switch(this.textType){case"circular":return this._measureCircular(t);default:return super._measure(t)}}_measureCircular(t){const e=t.layer.context,i=this._renderer._ghostLayer.context,s=this.style.direction=="rtl",n=this.style.oversizedBehavior,r=this.style.maxWidth,o=T(r)&&n=="truncate",l=this.style.ellipsis||"";let h;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,e.save(),i.save(),this._prerender(t,!0);const d=this.text.toString().replace(/\r/g,"").split(/\n/);let f=!0,u=0,c=0;return b(d,(p,m)=>{let g=ut.chunk(p,!1,this.style.ignoreFormatting),_={offsetY:c,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]},y,x,v;b(g,(D,M)=>{if(D.type=="format"){if(D.text=="[/]")f||(e.restore(),i.restore(),f=!0),x=void 0,y=void 0,v=void 0;else{let k=ut.getTextStyle(D.text);const E=this._getFontStyle(k);e.save(),i.save(),e.font=E,y=E,k.fill&&(x=k.fill),k.width&&(v=rt(k.width)),f=!1}o&&(h=this._measureText(l,e))}else if(D.type=="value"){let k=D.text.match(/./ug)||[];s&&(k=Es(D.text),k.reverse());for(let E=0;E<k.length;E++){const I=k[E],B=this._measureText(I,e);let A=B.width;y&&v&&v>A&&(A=v);const F=B.actualBoundingBoxAscent+B.actualBoundingBoxDescent;if(F>_.height&&(_.height=F),B.actualBoundingBoxAscent>_.ascent&&(_.ascent=B.actualBoundingBoxAscent),u+=A,o){h||(h=this._measureText(l,e));const w=h.actualBoundingBoxLeft+h.actualBoundingBoxRight;if(u+w>r){_.textChunks.length==1?this.textVisible=!1:(_.width+=w,_.left+=h.actualBoundingBoxLeft,_.right+=h.actualBoundingBoxRight,_.textChunks.push({style:y,fill:x,text:l,width:w,height:F+h.actualBoundingBoxDescent,left:h.actualBoundingBoxLeft,right:h.actualBoundingBoxRight,ascent:h.actualBoundingBoxAscent,offsetX:0,offsetY:F,textDecoration:void 0}));break}}_.width+=A,_.left+=B.actualBoundingBoxLeft,_.right+=B.actualBoundingBoxRight,_.textChunks.push({style:y,fill:x,text:I,width:A,height:F+B.actualBoundingBoxDescent,left:B.actualBoundingBoxLeft,right:B.actualBoundingBoxRight,ascent:B.actualBoundingBoxAscent,offsetX:0,offsetY:F,textDecoration:void 0})}}}),this.style.lineHeight instanceof O?_.height*=this.style.lineHeight.value:_.height*=this.style.lineHeight||1.2,this._textInfo.push(_),c+=_.height}),f||(e.restore(),i.restore()),n=="hide"&&u>r&&(this.textVisible=!1),b(this._textInfo,p=>{b(p.textChunks,m=>{m.offsetY+=Math.round((p.height-m.height+(p.ascent-m.ascent))/2)})}),e.restore(),i.restore(),{left:0,top:0,right:0,bottom:0}}}class Vn extends Ue{constructor(t,e){super(t),this.image=e}_dispose(){super._dispose(),this._imageMask&&te(this._imageMask)}getLocalBounds(){if(!this._localBounds){let t=0,e=0;this.width&&(t=this.width),this.height&&(e=this.height),this._localBounds={left:0,top:0,right:t,bottom:e},this._addBounds(this._localBounds)}return this._localBounds}_render(t,e=0){if(super._render(t),this.image){if(this.tainted===void 0&&(this.tainted=Ii(this.image),t.layer.tainted=!0),this.tainted&&this._renderer._omitTainted)return;const i=this._ghostOnly(e),s=this._drawGhost(t,e);if(t.layer.dirty&&!i){this.shadowColor&&(t.layer.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(t.layer.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(t.layer.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(t.layer.context.shadowOffsetY=this.shadowOffsetY);const n=this.width||this.image.naturalWidth,r=this.height||this.image.naturalHeight;t.layer.context.drawImage(this.image,0,0,n,r)}if(this.interactive&&this._isInteractive(t)&&s){const n=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(n,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(t){if(this._imageMask===void 0){const e=this.width||t.naturalWidth,i=this.height||t.naturalHeight,s=document.createElement("canvas");s.width=e,s.height=i;const n=s.getContext("2d");n.imageSmoothingEnabled=!1,n.fillStyle=this._getColorId(),n.fillRect(0,0,e,i),Ii(t)||(n.globalCompositeOperation="destination-in",n.drawImage(t,0,0,e,i)),this._imageMask=s}return this._imageMask}}class Gn{constructor(t,e,i,s){this.event=t,this.originalPoint=e,this.point=i,this.bbox=s,this.simulated=!1,this.native=!0,It("touchevents")&&t instanceof Touch?this.id=t.identifier:this.id=null}}class Xn extends vs{constructor(t){if(super(),this.view=document.createElement("div"),this._layerDom=document.createElement("div"),this.layers=[],this._dirtyLayers=[],this.defaultLayer=this.getLayer(0),this._ghostLayer=new Kn,this._deferredGhostLayers=[],this._patternCanvas=document.createElement("canvas"),this._patternContext=this._patternCanvas.getContext("2d"),this._realWidth=0,this._realHeight=0,this._calculatedWidth=0,this._calculatedHeight=0,this.interactionsEnabled=!0,this._listeners={},this._events={},this._colorId=0,this._colorMap={},this._forceInteractive=0,this._omitTainted=!1,this._hovering=new Set,this._dragging=[],this._mousedown=[],this.tapToActivate=!1,this.tapToActivateTimeout=3e3,this._touchActive=!1,t==null?this.resolution=window.devicePixelRatio:this.resolution=t,this.view.style.position="absolute",this.view.setAttribute("aria-hidden","true"),this.view.appendChild(this._layerDom),this._disposers.push(new K(()=>{N(this._events,(e,i)=>{i.disposer.dispose()}),b(this.layers,e=>{te(e.view),e.exportableView&&te(e.exportableView)}),te(this._ghostLayer.view),te(this._patternCanvas)})),this._disposers.push(Vi(()=>{t==null&&(this.resolution=window.devicePixelRatio)})),It("touchevents")){const e=i=>{this._dragging.length!==0&&_i(this._dragging,s=>s.value.shouldCancelTouch()?(i.preventDefault(),!1):!0),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(U(window,"touchstart",e,{passive:!1})),this._disposers.push(U(this.view,"touchstart",e,{passive:!1})),this._disposers.push(U(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(U(window,"click",i=>{this._touchActive=!1},{passive:!0})),this._disposers.push(U(this.view,"click",i=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}It("wheelevents")&&this._disposers.push(U(this.view,"wheel",e=>{let i=!1;this._hovering.forEach(s=>{if(s.wheelable)return i=!0,!1}),i&&e.preventDefault()},{passive:!1}))}resetImageArray(){this._ghostLayer.imageArray=void 0}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(t){t?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(t,e,i,s){return this.defaultLayer.context.createLinearGradient(t,e,i,s)}createRadialGradient(t,e,i,s,n,r){return this.defaultLayer.context.createRadialGradient(t,e,i,s,n,r)}createPattern(t,e,i,s,n){return this._patternCanvas.width=s,this._patternCanvas.height=n,this._patternContext.clearRect(0,0,s,n),e.renderDetached(this._patternContext),t.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,i)}makeContainer(){return new Dn(this)}makeGraphics(){return new Wn(this)}makeText(t,e){return new is(this,t,e)}makeTextStyle(){return new Yn}makeRadialText(t,e){return new Un(this,t,e)}makePicture(t){return new Vn(this,t)}resizeLayer(t){t.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resize(t,e,i,s){this._realWidth=t,this._realHeight=e,this._calculatedWidth=i,this._calculatedHeight=s,b(this.layers,n=>{n&&(n.dirty=!0,this.resizeLayer(n))}),this.resizeGhost(),this.view.style.width=i+"px",this.view.style.height=s+"px"}createDetachedLayer(t=!1){const e=document.createElement("canvas"),i=e.getContext("2d",{willReadFrequently:t}),s=new $n(e,i);return e.style.position="absolute",e.style.top="0px",e.style.left="0px",s}getLayerByOrder(t){const e=this.layers,i=e.length;for(let s=0;s<i;s++){const n=e[s];if(n.order==t)return n}}getLayer(t,e=!0){let i=this.getLayerByOrder(t);if(i)return i;const s=this.createDetachedLayer(t==99);s.order=t,s.visible=e,s.view.className="am5-layer-"+t,s.visible&&this.resizeLayer(s);const n=this.layers;n.push(s),n.sort((h,d)=>h.order>d.order?1:h.order<d.order?-1:0);const r=n.length,o=ne(n,s);let l;for(let h=o+1;h<r;h++)if(n[h].visible){l=n[h];break}return s.visible&&(l===void 0?this._layerDom.appendChild(s.view):this._layerDom.insertBefore(s.view,l.view)),s}render(t){this._dirtyLayers.length=0,this._deferredGhostLayers=[],b(this.layers,i=>{i&&i.dirty&&i.visible&&(this._dirtyLayers.push(i),i.clear())}),this._ghostLayer.clear(),t.render({inactive:null,layer:this.defaultLayer});const e=this._deferredGhostLayers;if(e.length&&(e.sort((i,s)=>i-s),b(e,i=>{t.render({inactive:null,layer:this.defaultLayer},i)})),this._ghostLayer.context.restore(),b(this.layers,i=>{if(i){const s=i.context;s.beginPath(),s.moveTo(0,0),s.stroke()}}),b(this._dirtyLayers,i=>{i.context.restore(),i.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){const{events:i,target:s,native:n}=this._lastPointerMoveEvent;b(i,r=>{this._dispatchGlobalMousemove(r,s,n)})}}paintId(t){const e=xn(++this._colorId),i=S.fromHex(e).toCSS();return this._colorMap[i]=t,i}_removeObject(t){t._colorId!==void 0&&delete this._colorMap[t._colorId]}_adjustBoundingBox(t){const e=this._ghostLayer.margin;return new DOMRect(-e.left,-e.top,t.width+e.left+e.right,t.height+e.top+e.bottom)}getEvent(t,e=!0){const i=this.view.getBoundingClientRect(),s=t.clientX||0,n=t.clientY||0,r=this._calculatedWidth/this._realWidth,o=this._calculatedHeight/this._realHeight,l={x:s-i.left,y:n-i.top},h={x:(s-(e?i.left:0))*r,y:(n-(e?i.top:0))*o};return new Gn(t,l,h,this._adjustBoundingBox(i))}_getHitTarget(t,e,i){if(e.width===0||e.height===0||t.x<e.left||t.x>e.right||t.y<e.top||t.y>e.bottom||!i||!this._layerDom.contains(i))return;const s=this._ghostLayer.getImageData(t,e);if(s.data[0]===0&&s.data[1]===0&&s.data[2]===0)return!1;const n=S.fromRGB(s.data[0],s.data[1],s.data[2]).toCSS();return this._colorMap[n]}getObjectAtPoint(t){const e=this._ghostLayer.getImageArray(t);if(e[0]===0&&e[1]===0&&e[2]===0)return;const i=S.fromRGB(e[0],e[1],e[2]).toCSS();return this._colorMap[i]}_withEvents(t,e){const i=this._events[t];if(i!==void 0){i.dispatching=!0;try{e(i)}finally{i.dispatching=!1,i.cleanup&&(i.cleanup=!1,ze(i.callbacks,s=>!s.disposed),i.callbacks.length===0&&(i.disposer.dispose(),delete this._events[t]))}}}_dispatchEventAll(t,e){this.interactionsEnabled&&this._withEvents(t,i=>{b(i.callbacks,s=>{s.disposed||s.callback.call(s.context,e)})})}_dispatchEvent(t,e,i){if(!this.interactionsEnabled)return!1;let s=!1;return this._withEvents(t,n=>{b(n.callbacks,r=>{!r.disposed&&r.object===e&&(r.callback.call(r.context,i),s=!0)})}),s}_dispatchMousedown(t,e){const i=t.button;if(i!=0&&i!=2&&i!=1&&i!==void 0)return;const s=this.getEvent(t),n=this._getHitTarget(s.originalPoint,s.bbox,e);if(n){const r=s.id;let o=!1;Se(n,l=>{const h={id:r,value:l};return this._mousedown.push(h),!o&&this._dispatchEvent("pointerdown",l,s)&&(o=!0,this._dragging.some(f=>f.value===l&&f.id===r)||this._dragging.push(h)),!0})}}_dispatchGlobalMousemove(t,e,i){const s=this.getEvent(t),n=this._getHitTarget(s.originalPoint,s.bbox,e);s.native=i,n?(this._hovering.forEach(r=>{r.contains(n)||(this._hovering.delete(r),r.cursorOverStyle&&xe(document.body,"cursor",r._replacedCursorStyle),this._dispatchEvent("pointerout",r,s))}),s.native&&Se(n,r=>(this._hovering.has(r)||(this._hovering.add(r),r.cursorOverStyle&&(r._replacedCursorStyle=Ds(document.body,"cursor"),xe(document.body,"cursor",r.cursorOverStyle)),this._dispatchEvent("pointerover",r,s)),!0))):(this._hovering.forEach(r=>{r.cursorOverStyle&&xe(document.body,"cursor",r._replacedCursorStyle),this._dispatchEvent("pointerout",r,s)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",s)}removeHovering(t){this._hovering.delete(t),t.cursorOverStyle&&xe(document.body,"cursor",t._replacedCursorStyle)}_dispatchGlobalMouseup(t,e){const i=this.getEvent(t);i.native=e,this._dispatchEventAll("globalpointerup",i)}_dispatchDragMove(t){if(this._dragging.length!==0){const e=this.getEvent(t),i=e.id;this._dragging.forEach(s=>{s.id===i&&this._dispatchEvent("pointermove",s.value,e)})}}_dispatchDragEnd(t,e){const i=t.button;let s;if(i==0||i===void 0)s="click";else if(i==2)s="rightclick";else if(i==1)s="middleclick";else return;const n=this.getEvent(t),r=n.id;if(this._mousedown.length!==0){const o=this._getHitTarget(n.originalPoint,n.bbox,e);o&&this._mousedown.forEach(l=>{l.id===r&&l.value.contains(o)&&this._dispatchEvent(s,l.value,n)}),this._mousedown.length=0}this._dragging.length!==0&&(this._dragging.forEach(o=>{o.id===r&&this._dispatchEvent("pointerup",o.value,n)}),this._dragging.length=0)}_dispatchDoubleClick(t,e){const i=this.getEvent(t),s=this._getHitTarget(i.originalPoint,i.bbox,e);s&&Se(s,n=>!this._dispatchEvent("dblclick",n,i))}_dispatchWheel(t,e){const i=this.getEvent(t),s=this._getHitTarget(i.originalPoint,i.bbox,e);s&&Se(s,n=>!this._dispatchEvent("wheel",n,i))}_makeSharedEvent(t,e){if(this._listeners[t]===void 0){const i=e();this._listeners[t]=new Ui(()=>{delete this._listeners[t],i.dispose()})}return this._listeners[t].increment()}_onPointerEvent(t,e){let i=!1,s=null;function n(){s=null,i=!1}return new at([new K(()=>{s!==null&&clearTimeout(s),n()}),U(this.view,ai(t),r=>{i=!0,s!==null&&clearTimeout(s),s=window.setTimeout(n,0)}),bn(window,t,(r,o)=>{s!==null&&(clearTimeout(s),s=null),e(r,o,i),i=!1})])}_initEvent(t){switch(t){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{const e=(i,s,n)=>{this._lastPointerMoveEvent={events:i,target:s,native:n},b(i,r=>{this._dispatchGlobalMousemove(r,s,n)})};return new at([this._onPointerEvent("pointerdown",e),this._onPointerEvent("pointermove",e)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{const e=this._onPointerEvent("pointerup",(s,n,r)=>{b(s,o=>{this._dispatchGlobalMouseup(o,r)}),this._lastPointerMoveEvent={events:s,target:n,native:r}}),i=this._onPointerEvent("pointercancel",(s,n,r)=>{b(s,o=>{this._dispatchGlobalMouseup(o,r)}),this._lastPointerMoveEvent={events:s,target:n,native:r}});return new K(()=>{e.dispose(),i.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{const e=this._onPointerEvent("pointerdown",(r,o)=>{b(r,l=>{this._dispatchMousedown(l,o)})}),i=this._onPointerEvent("pointermove",r=>{b(r,o=>{this._dispatchDragMove(o)})}),s=this._onPointerEvent("pointerup",(r,o)=>{b(r,l=>{this._dispatchDragEnd(l,o)})}),n=this._onPointerEvent("pointercancel",(r,o)=>{b(r,l=>{this._dispatchDragEnd(l,o)})});return new K(()=>{e.dispose(),i.dispose(),s.dispose(),n.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(e,i)=>{b(e,s=>{this._dispatchDoubleClick(s,i)})}));case"wheel":return this._makeSharedEvent("wheel",()=>U(this.view,ai("wheel"),e=>{this._dispatchWheel(e,Gi(e))},{passive:!1}))}}_addEvent(t,e,i,s){let n=this._events[e];n===void 0&&(n=this._events[e]={disposer:this._initEvent(e),callbacks:[],dispatching:!1,cleanup:!1});const r={object:t,context:s,callback:i,disposed:!1};return n.callbacks.push(r),new K(()=>{r.disposed=!0,n.dispatching?n.cleanup=!0:(tt(n.callbacks,r),n.callbacks.length===0&&(n.disposer.dispose(),delete this._events[e]))})}getCanvas(t,e){this.render(t),e||(e={});let i=this.resolution,s=Math.floor(this._calculatedWidth*this.resolution),n=Math.floor(this._calculatedHeight*this.resolution);if(e.minWidth&&e.minWidth>s){let c=e.minWidth/s;c>i&&(i=c*this.resolution)}if(e.minHeight&&e.minHeight>n){let c=e.minHeight/n;c>i&&(i=c*this.resolution)}if(e.maxWidth&&e.maxWidth<s){let c=e.maxWidth/s;c<i&&(i=c*this.resolution)}if(e.maxHeight&&e.maxHeight>n){let c=e.maxHeight/n;c<i&&(i=c*this.resolution)}e.maintainPixelRatio&&(i/=this.resolution);const r=[];let o=!1;const l=document.createElement("canvas");i!=this.resolution&&(o=!0,s=s*i/this.resolution,n=n*i/this.resolution),l.width=s,l.height=n,l.style.position="fixed",l.style.top="-10000px",this.view.appendChild(l),r.push(l);const h=l.getContext("2d");let d=0,f=0,u=!1;return b(this.layers,c=>{if(c&&c.visible&&(c.tainted||o)){u=!0,c.exportableView=c.view,c.exportableContext=c.context,c.view=document.createElement("canvas"),c.view.style.position="fixed",c.view.style.top="-10000px",this.view.appendChild(c.view),r.push(c.view);let p=0,m=0;c.margin&&(p+=c.margin.left||0+c.margin.right||0,m+=c.margin.top||0+c.margin.bottom||0),c.view.width=s+p,c.view.height=n+m,c.context=c.view.getContext("2d"),c.dirty=!0,c.scale=i}}),u&&(this._omitTainted=!0,this.render(t),this._omitTainted=!1),b(this.layers,c=>{if(c&&c.visible){let p=0,m=0;c.margin&&(p=-(c.margin.left||0)*this.resolution,m=-(c.margin.top||0)*this.resolution),h.drawImage(c.view,p,m),c.exportableView&&(c.view=c.exportableView,c.exportableView=void 0),c.exportableContext&&(c.context=c.exportableContext,c.exportableContext=void 0),d<c.view.clientWidth&&(d=c.view.clientWidth),f<c.view.clientHeight&&(f=c.view.clientHeight),c.scale=void 0}}),l.style.width=d+"px",l.style.height=f+"px",b(r,c=>{c.style.position="",c.style.top="",this.view.removeChild(c)}),l}}class Kn{constructor(){this.margin={left:0,right:0,top:0,bottom:0},this._resolution=1,this._width=0,this._height=0,this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(t,e,i,s,n){this._resolution=n,t+=this.margin.left+this.margin.right,e+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,s+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(t*n),this._height=Math.floor(e*n),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=s+"px"}getImageData(t,e){return this.context.getImageData(Math.round((t.x-e.left)/e.width*this._width),Math.round((t.y-e.top)/e.height*this._height),1,1)}getImageArray(t){this.imageArray||(this.imageArray=this.context.getImageData(0,0,this._width,this._height).data);const e=this.imageArray,i=Math.round(t.x*this._resolution),n=(Math.round(t.y*this._resolution)*this._width+i)*4;return[e[n],e[n+1],e[n+2],e[n+3]]}setMargin(t){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,b(t,e=>{e.margin&&(this.margin.left=Math.max(this.margin.left,e.margin.left),this.margin.right=Math.max(this.margin.right,e.margin.right),this.margin.top=Math.max(this.margin.top,e.margin.top),this.margin.bottom=Math.max(this.margin.bottom,e.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class $n{constructor(t,e){this.tainted=!0,this.order=0,this.visible=!0,this.dirty=!0,this._width=0,this._height=0,this.view=t,this.context=e}resize(t,e,i,s,n){this.width!=null&&(t=this.width,i=this.width),this.height!=null&&(e=this.height,s=this.height),this.margin?(t+=this.margin.left+this.margin.right,e+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,s+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(t*n),this._height=Math.floor(e*n),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=s+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}function Oi(a,t){a==null?requestAnimationFrame(t):setTimeout(()=>{requestAnimationFrame(t)},1e3/a)}class ss{constructor(t,e={},i){if(this._isDirty=!1,this._isDirtyParents=!1,this._isDirtyAnimation=!1,this._dirty={},this._dirtyParents={},this._dirtyBounds={},this._dirtyPositions={},this._ticker=null,this._tickers=[],this._updateTick=!0,this.skipRenderFrame=!1,this.events=new qt,this.animationTime=null,this._animations=[],this.language=un.new(this,{}),this.locale=es,this.utc=!1,this.numberFormatter=ln.new(this,{}),this.dateFormatter=dn.new(this,{}),this.durationFormatter=cn.new(this,{}),this.tabindex=0,this._tabindexes=[],this._a11yD=!1,this._focusElementDirty=!1,this._skipNextGroupJump=!0,this.verticalLayout=jt.new(this,{}),this.horizontalLayout=$t.new(this,{}),this.gridLayout=zt.new(this,{}),this._paused=!1,this.autoResize=!0,this._fontHash="",this._isDisposed=!1,this._disposers=[],this._tooltips=[],this._htmlEnabledContainers=[],this.entitiesById={},!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e,e.accessible==!1&&(this._a11yD=!0),e.useSafeResolution==null&&(e.useSafeResolution=!0);let s;e.useSafeResolution&&(s=Ps()),this._renderer=new Xn(s);let n;if(t instanceof HTMLElement?n=t:n=document.getElementById(t),b(yt.rootElements,l=>{if(l.dom===n)if(yt.autoDispose)l.dispose();else throw new Error("You cannot have multiple Roots on the same DOM node")}),this.interfaceColors=Ee.new(this,{}),n===null)throw new Error("Could not find HTML element with id `"+t+"`");this.dom=n;let r=document.createElement("div");r.style.position="relative",r.style.width="100%",r.style.height="100%",n.appendChild(r);const o=e.tooltipContainerBounds;o&&(this._tooltipContainerSettings=o),this._inner=r,this._updateComputedStyles(),yt.rootElements.push(this)}static new(t,e){const i=new ss(t,e,!0);return i._init(),i}moveDOM(t){let e;if(t instanceof HTMLElement?e=t:e=document.getElementById(t),e){for(;this.dom.childNodes.length>0;)e.appendChild(this.dom.childNodes[0]);this.dom=e,this._initResizeSensor(),this.resize()}}_handleLogo(){if(this._logo){const t=this.dom.offsetWidth,e=this.dom.offsetHeight;t<=150||e<=60?this._logo.hide():this._logo.show()}}_showBranding(){if(!this._logo){const t=this.tooltipContainer.children.push(W.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:Pt(100),centerY:H,tooltipY:10,tooltipText:"Created using amCharts 5",tooltipX:H,cursorOverStyle:"pointer",background:Mt.new(this,{fill:Ut(4671320),fillOpacity:0,tooltipY:5})}));t.set("tooltip",this.systemTooltip),t.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")}),t.states.create("hover",{});const e=t.children.push(ot.new(this,{stroke:Ut(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6",dx:-50,strokeOpacity:0}));e.states.create("hover",{stroke:Ut(3976191)});const i=t.children.push(ot.new(this,{stroke:Ut(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0",dx:50,strokeOpacity:0})),s=Et(St),n=1500;t.setTimeout(()=>{i.animate({key:"strokeOpacity",to:1,duration:n,easing:s}),i.animate({key:"dx",to:0,duration:n,easing:s}),e.animate({key:"dx",to:0,duration:n,easing:s}),e.animate({key:"strokeOpacity",to:1,duration:n,easing:s})},3e3),i.states.create("hover",{stroke:Ut(4671320)}),this._logo=t,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(t){return this._settings.calculateSize?this._settings.calculateSize(t):{width:t.width,height:t.height}}_init(){const t=this._settings;t.accessible!==!1&&(t.focusable&&(this._inner.setAttribute("focusable","true"),this._inner.setAttribute("tabindex",this.tabindex+"")),t.ariaLabel&&this._inner.setAttribute("aria-label",t.ariaLabel),t.role&&this._inner.setAttribute("role",t.role));const e=this._renderer,i=this._getRealSize(),s=this._getCalculatedSize(i),n=Math.floor(s.width),r=Math.floor(s.height),o=Math.floor(i.width),l=Math.floor(i.height),h=W.new(this,{visible:!0,width:n,height:r});this._rootContainer=h,this._rootContainer._defaultThemes.push(fn.new(this));const d=h.children.push(W.new(this,{visible:!0,width:H,height:H}));this.container=d,e.resize(o,l,n,r),this._inner.appendChild(e.view),this._initResizeSensor();const f=document.createElement("div");if(this._htmlElementContainer=f,f.className="am5-html-container",f.style.position="absolute",f.style.pointerEvents="none",this._tooltipContainerSettings||(f.style.overflow="hidden"),this._inner.appendChild(f),this._a11yD!==!0){const u=document.createElement("div");u.className="am5-reader-container",u.setAttribute("role","alert"),u.style.position="absolute",u.style.width="1px",u.style.height="1px",u.style.overflow="hidden",u.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=u,this._inner.appendChild(this._readerAlertElement);const c=document.createElement("div");c.className="am5-focus-container",c.style.position="absolute",c.style.pointerEvents="none",c.style.top="0px",c.style.left="0px",c.style.overflow="hidden",c.style.width=n+"px",c.style.height=r+"px",c.setAttribute("role","graphics-document"),Yt(c,!1),this._focusElementContainer=c,this._inner.appendChild(this._focusElementContainer);const p=document.createElement("div");this._tooltipElementContainer=p,p.className="am5-tooltip-container",this._inner.appendChild(p),It("keyboardevents")&&(this._disposers.push(U(window,"keydown",m=>{const g=be(m);g=="Shift"?this._isShift=!0:g=="Tab"&&(this._isShift=m.shiftKey)})),this._disposers.push(U(window,"keyup",m=>{be(m)=="Shift"&&(this._isShift=!1)})),this._disposers.push(U(c,"click",()=>{const m=this._focusedSprite;if(m){const g=m.get("clickAnnounceText","");g!==""&&this.readerAlert(g);const _=e.getEvent(new MouseEvent("click"));m.events.dispatch("click",{type:"click",originalEvent:_.event,point:_.point,simulated:!0,target:m})}})),this._disposers.push(U(c,"keydown",m=>{const g=this._focusedSprite;if(g){m.key=="Escape"&&(bs(),this._focusedSprite=void 0);let _=0,y=0;const x=be(m);switch(x){case"Enter":case" ":const v=g.get("clickAnnounceText","");if(v!==""&&this.readerAlert(v),x==" "&&g.get("role")!="checkbox")return;m.preventDefault();const D=e.getEvent(new MouseEvent("mouse"));g.events.dispatch("click",{type:"click",originalEvent:D.event,point:D.point,simulated:!0,target:g});return;case"ArrowLeft":_=-6;break;case"ArrowRight":_=6;break;case"ArrowUp":y=-6;break;case"ArrowDown":y=6;break;default:return}if(_!=0||y!=0){if(m.preventDefault(),!g.isDragging()){this._keyboardDragPoint={x:0,y:0};const M=e.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));M.point={x:0,y:0},g.events.isEnabled("pointerdown")&&g.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:M.event,point:M.point,simulated:!0,target:g})}const v=this._keyboardDragPoint;v.x+=_,v.y+=y;const D=e.getEvent(new MouseEvent("mousemove",{clientX:v.x,clientY:v.y}),!1);g.events.isEnabled("globalpointermove")&&g.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:D.event,point:D.point,simulated:!0,target:g})}}})),this._disposers.push(U(c,"keyup",m=>{if(this._focusedSprite){const g=this._focusedSprite,_=be(m);switch(_){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":if(g.isDragging()){const x=this._keyboardDragPoint,v=e.getEvent(new MouseEvent("mouseup",{clientX:x.x,clientY:x.y}));g.events.isEnabled("globalpointerup")&&g.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:v.event,point:v.point,simulated:!0,target:g}),this._keyboardDragPoint=void 0;return}else if(g.get("focusableGroup")){const x=g.get("focusableGroup"),v=this._tabindexes.filter(k=>!!(k.get("focusableGroup")==x&&k.getPrivate("focusable")!==!1&&k.isVisibleDeep()));let D=v.indexOf(g);const M=v.length-1;D+=_=="ArrowRight"||_=="ArrowDown"?1:-1,D<0?D=M:D>M&&(D=0),ws(v[D].getPrivate("focusElement").dom)}break;case"Tab":const y=g.get("focusableGroup");if(y&&this._isShift){this._skipNextGroupJump||(this._focusNext(g.getPrivate("focusElement").dom,-1,y),this._skipNextGroupJump=!0);return}break}}})))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}get systemTooltip(){if(!this._systemTooltip){const t=de.new(this,{themeTags:["system"]});this._systemTooltip=t}return this._systemTooltip}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new on(this.dom,()=>{this.autoResize&&this.resize()}),this._disposers.push(this._resizeSensorDisposer)}resize(){const t=this._getRealSize(),e=this._getCalculatedSize(t),i=Math.floor(e.width),s=Math.floor(e.height);if(i>0&&s>0){const n=Math.floor(t.width),r=Math.floor(t.height),o=this._htmlElementContainer;if(o.style.width=i+"px",o.style.height=s+"px",this._a11yD!==!0){const h=this._focusElementContainer;h.style.width=i+"px",h.style.height=s+"px"}this._renderer.resize(n,r,i,s);const l=this._rootContainer;l.setPrivate("width",i),l.setPrivate("height",s),this._render(),this._handleLogo()}}_render(){if(this.skipRenderFrame){this.skipRenderFrame=!1;return}this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(t){b(this._tickers,e=>{e(t)})}_runAnimations(t){let e=0;return ze(this._animations,i=>{const s=i._runAnimation(t);return s===Ht.Stopped?!1:(s===Ht.Playing&&++e,!0)}),this._isDirtyAnimation=!1,e===0}_runDirties(){let t={};for(;this._isDirtyParents;)this._isDirtyParents=!1,_t(this._dirtyParents).forEach(([r,o])=>{delete this._dirtyParents[r],o.isDisposed()||(t[o.uid]=o,o._prepareChildren())});_t(t).forEach(([r,o])=>{o._updateChildren()});const e=[];_t(this._dirty).forEach(([r,o])=>{o.isDisposed()?delete this._dirty[r]:(e.push(o),o._beforeChanged())}),e.forEach(r=>{r._changed(),delete this._dirty[r.uid],r._clearDirty()}),this._isDirty=!1;const i={},s=[];_t(this._dirtyBounds).forEach(([r,o])=>{delete this._dirtyBounds[r],o.isDisposed()||(i[o.uid]=o.depth(),s.push(o))}),this._positionHTMLElements(),s.sort((r,o)=>Ot(i[o.uid],i[r.uid])),s.forEach(r=>{r._updateBounds()});const n=this._dirtyPositions;_t(n).forEach(([r,o])=>{delete n[r],o.isDisposed()||o._updatePosition()}),e.forEach(r=>{r._afterChanged()}),_t(t).forEach(([r,o])=>{o._childrenPrep=!1,o._childrenUpdt=!1})}_renderFrame(t){if(this._updateTick){this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:t}),this._checkComputedStyles(),this._runTickers(t);const e=this._runAnimations(t);return this._runDirties(),this._render(),this._renderer.resetImageArray(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:t}),this._tickers.length===0&&e&&!this._isDirtyAnimation&&!this._isDirty}else return!0}_runTicker(t,e){this.isDisposed()||(this.animationTime=t,this._renderFrame(t)?(this._ticker=null,this.animationTime=null):this._paused||(e?this._ticker:Oi(this.fps,this._ticker)))}_runTickerNow(t=1e4){if(!this.isDisposed()){const e=performance.now()+t;for(;;){const i=performance.now();if(i>=e){this.animationTime=null;break}if(this.animationTime=i,this._renderFrame(i)){this.animationTime=null;break}}}}_startTicker(){this._ticker===null&&(this.animationTime=null,this._ticker=t=>{this._runTicker(t)},Oi(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(t){this._updateTick=t,t&&this._startTicker()}_addDirtyEntity(t){this._isDirty=!0,this._dirty[t.uid]===void 0&&(this._dirty[t.uid]=t),this._startTicker()}_addDirtyParent(t){this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[t.uid]===void 0&&(this._dirtyParents[t.uid]=t),this._startTicker()}_addDirtyBounds(t){this._isDirty=!0,this._dirtyBounds[t.uid]===void 0&&(this._dirtyBounds[t.uid]=t),this._startTicker()}_addDirtyPosition(t){this._isDirty=!0,this._dirtyPositions[t.uid]===void 0&&(this._dirtyPositions[t.uid]=t),this._startTicker()}_addAnimation(t){this._isDirtyAnimation=!0,this._animations.indexOf(t)===-1&&this._animations.push(t),this._startTicker()}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0,this._startTicker()})}eachFrame(t){return this._tickers.push(t),this._startTicker(),new K(()=>{tt(this._tickers,t)})}markDirtyGlobal(t){t||(t=this.container),t.walkChildren(e=>{e instanceof W&&this.markDirtyGlobal(e),e.markDirty(),e.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),b(this._disposers,t=>{t.dispose()}),this._inner&&xs(this._inner),vt(yt.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(t){if(this._a11yD!==!0){const e=this._readerAlertElement;t=Si(t),e.innerHTML==t&&(e.innerHTML=""),e.innerHTML=t}}setThemes(t){this._rootContainer.set("themes",t);const e=this.tooltipContainer;e&&e._applyThemes();const i=this.interfaceColors;i&&i._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const t=this._tooltipContainerSettings,e=this._rootContainer.children.push(W.new(this,{position:"absolute",isMeasured:!1,width:H,height:H,layer:t?35:30,layerMargin:t||void 0}));this.tooltipContainer=e;const i=de.new(this,{});this.container.set("tooltip",i),i.hide(0),this._tooltip=i}}_registerTabindexOrder(t){this._a11yD!=!0&&(t.get("focusable")?re(this._tabindexes,t):vt(this._tabindexes,t),this._invalidateTabindexes())}_unregisterTabindexOrder(t){this._a11yD!=!0&&(vt(this._tabindexes,t),this._invalidateTabindexes())}_invalidateTabindexes(){if(this._a11yD==!0)return;this._tabindexes.sort((e,i)=>{const s=e.get("tabindexOrder",0),n=i.get("tabindexOrder",0);return s==n?0:s>n?1:-1});const t=[];b(this._tabindexes,(e,i)=>{e.getPrivate("focusElement")?this._moveFocusElement(i,e):this._makeFocusElement(i,e);const s=e.get("focusableGroup");s&&e.getPrivate("focusable")!==!1&&(t.indexOf(s)!==-1?e.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):t.push(s))})}_updateCurrentFocus(){this._a11yD!=!0&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(t,e){if(this._a11yD==!0||(e||(e=t.getPrivate("focusElement").dom),!e))return;const i=t.get("role");i?e.setAttribute("role",i):e.removeAttribute("role");const s=t.get("ariaLabel");if(s){const m=he(t,s);e.setAttribute("aria-label",m)}else e.removeAttribute("aria-label");const n=t.get("ariaLive");n?e.setAttribute("aria-live",n):e.removeAttribute("aria-live");const r=t.get("ariaChecked");r!=null&&i&&["checkbox","option","radio","menuitemcheckbox","menuitemradio","treeitem"].indexOf(i)!==-1?e.setAttribute("aria-checked",r?"true":"false"):e.removeAttribute("aria-checked");const o=t.get("ariaCurrent");o!=null?e.setAttribute("aria-current",o):e.removeAttribute("aria-current");const l=t.get("ariaSelected");l!=null&&i&&["gridcell","option","row","tab","columnheader","rowheader","treeitem"].indexOf(i)!==-1?e.setAttribute("aria-selected",l?"true":"false"):e.removeAttribute("aria-selected"),t.get("ariaHidden")?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden");const h=t.get("ariaOrientation");h?e.setAttribute("aria-orientation",h):e.removeAttribute("aria-orientation");const d=t.get("ariaValueNow");d?e.setAttribute("aria-valuenow",d):e.removeAttribute("aria-valuenow");const f=t.get("ariaValueMin");f?e.setAttribute("aria-valuemin",f):e.removeAttribute("aria-valuemin");const u=t.get("ariaValueMax");u?e.setAttribute("aria-valuemax",u):e.removeAttribute("aria-valuemax");const c=t.get("ariaValueText");c?e.setAttribute("aria-valuetext",c):e.removeAttribute("aria-valuetext");const p=t.get("ariaControls");p?e.setAttribute("aria-controls",p):e.removeAttribute("aria-controls"),t.get("visible")&&t.get("opacity")!==0&&t.get("role")!="tooltip"&&!t.isHidden()&&t.getPrivate("focusable")!==!1&&(t.height()||t.width())?(e.getAttribute("tabindex")!="-1"&&e.setAttribute("tabindex",""+this.tabindex),e.removeAttribute("aria-hidden")):(e.removeAttribute("tabindex"),e.setAttribute("aria-hidden","true"))}_makeFocusElement(t,e){if(e.getPrivate("focusElement")||this._a11yD==!0)return;const i=document.createElement("div");e.get("role")!="tooltip"&&(i.tabIndex=this.tabindex),i.style.position="absolute",Yt(i,!1);const s=[];e.setPrivate("focusElement",{dom:i,disposers:s}),this._decorateFocusElement(e),s.push(U(i,"focus",n=>{this._handleFocus(n)})),s.push(U(i,"blur",n=>{this._handleBlur(n)})),this._moveFocusElement(t,e)}_removeFocusElement(t){if(this._a11yD==!0)return;vt(this._tabindexes,t);const e=t.getPrivate("focusElement");e&&(this._focusElementContainer.removeChild(e.dom),b(e.disposers,s=>{s.dispose()}))}_hideFocusElement(t){if(this._a11yD==!0)return;const e=t.getPrivate("focusElement");e.dom.style.display="none"}_moveFocusElement(t,e){if(this._a11yD==!0)return;const i=this._focusElementContainer,s=e.getPrivate("focusElement").dom;if(s===this._focusElementContainer.children[t])return;const n=this._focusElementContainer.children[t+1];n?i.insertBefore(s,n):i.append(s)}_positionFocusElement(t){if(this._a11yD==!0||t==null)return;this._focusElementContainer.scrollTop=0;const e=t.globalBounds();let i=e.right==e.left?t.width():e.right-e.left,s=e.top==e.bottom?t.height():e.bottom-e.top;const n=this._settings.focusPadding!==void 0?this._settings.focusPadding:2;let r=e.left-n,o=e.top-n;i<0&&(r+=i,i=Math.abs(i)),s<0&&(o+=s,s=Math.abs(s));const l=t.getPrivate("focusElement").dom;l.style.top=o+"px",l.style.left=r+"px",l.style.width=i+n*2+"px",l.style.height=s+n*2+"px"}_getSpriteByFocusElement(t){let e;return _i(this._tabindexes,(i,s)=>i.getPrivate("focusElement").dom===t?(e=i,!1):!0),e}_handleFocus(t){if(this._a11yD==!0)return;const e=this._getSpriteByFocusElement(t.target);if(e){if(!e.isVisibleDeep()){this._focusNext(t.target,this._isShift?-1:1);return}this._positionFocusElement(e),this._focusedSprite=e,e.events.isEnabled("focus")&&e.events.dispatch("focus",{type:"focus",originalEvent:t,target:e}),e.getPrivate("focusElement").dom.tabIndex==-1&&(this._skipNextGroupJump=!1)}}_focusNext(t,e,i){if(this._a11yD==!0)return;const s=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let n=s.indexOf(t)+e;n<0?n=s.length-1:n>=s.length&&(n=0);const r=s[n];if(i&&e==-1){const o=this._getSpriteByFocusElement(r);if(o&&o.get("focusableGroup")==i){this._focusNext(r,e);return}}r.focus()}_handleBlur(t){if(this._a11yD==!0)return;const e=this._focusedSprite;e&&!e.isDisposed()&&e.events.isEnabled("blur")&&e.events.dispatch("blur",{type:"blur",originalEvent:t,target:e}),this._focusedSprite=void 0}updateTooltip(t){if(this._a11yD==!0)return;const e=Si(t._getText());let i=t.getPrivate("tooltipElement");t.get("role")=="tooltip"&&e!=""?(i||(i=this._makeTooltipElement(t)),i.innerHTML!=e&&(i.innerHTML=e),i.setAttribute("aria-hidden",t.isVisibleDeep()?"false":"true")):i&&(i.remove(),t.removePrivate("tooltipElement"))}_makeTooltipElement(t){const e=this._tooltipElementContainer,i=document.createElement("div");return i.style.position="absolute",i.style.width="1px",i.style.height="1px",i.style.overflow="hidden",i.style.clip="rect(1px, 1px, 1px, 1px)",Yt(i,!1),this._decorateFocusElement(t,i),e.append(i),t.setPrivate("tooltipElement",i),i}_removeTooltipElement(t){if(this._a11yD==!0)return;const e=t.getPrivate("tooltipElement");if(e){const i=e.parentElement;i&&i.removeChild(e)}}_invalidateAccessibility(t){if(this._a11yD==!0)return;this._focusElementDirty=!0;const e=t.getPrivate("focusElement");t.get("focusable")?e&&(this._decorateFocusElement(t),this._positionFocusElement(t)):e&&this._removeFocusElement(t)}focused(t){return this._focusedSprite===t}documentPointToRoot(t){const e=this._getRealSize(),i=this._getCalculatedSize(e),s=i.width/e.width,n=i.height/e.height;return{x:(t.x-e.left)*s,y:(t.y-e.top)*n}}rootPointToDocument(t){const e=this._getRealSize(),i=this._getCalculatedSize(e),s=i.width/e.width,n=i.height/e.height;return{x:t.x/s+e.left,y:t.y/n+e.top}}addDisposer(t){return this._disposers.push(t),t}_updateComputedStyles(){const t=window.getComputedStyle(this.dom);let e="";N(t,(s,n)=>{Ft(s)&&s.match(/^font/)&&(e+=n)});const i=e!=this._fontHash;return i&&(this._fontHash=e),i}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(t){t instanceof W?t.children.each(e=>{this._invalidateLabelBounds(e)}):t instanceof Nt&&t.markDirtyBounds()}_hasLicense(){for(let t=0;t<yt.licenses.length;t++)if(yt.licenses[t].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(t){this._renderer.debugGhostView=t}set tapToActivate(t){this._renderer.tapToActivate=t}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(t){this._renderer.tapToActivateTimeout=t}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(t){const e=this._htmlElementContainer,i=document.createElement("div");t.setPrivate("htmlElement",i);let s=!1,n;t._walkParents(o=>{if(o.get("verticalScrollbar"))return s=!0,n=o,!1});let r;return s&&(r=document.createElement("div"),t.setPrivate("htmlElementWrapper",r),t.setPrivate("wrapperContainer",n),r.style.position="absolute",r.style.overflow="hidden",r.style.boxSizing="border-box",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",n.events.on("boundschanged",()=>{this._positionHTMLElement(t)})),i.style.position="absolute",i.style.overflow="auto",i.style.boxSizing="border-box",Yt(i,t.get("interactive",!1)),t.events.isEnabled("click")&&(Yt(i,!0),this._disposers.push(U(i,"click",o=>{const l=this._renderer.getEvent(o);t.events.dispatch("click",{type:"click",originalEvent:l.event,point:l.point,simulated:!1,target:t})}))),this._positionHTMLElement(t),s?(r.append(i),e.append(r)):e.append(i),re(this._htmlEnabledContainers,t),i}_positionHTMLElements(){b(this._htmlEnabledContainers,t=>{this._positionHTMLElement(t)})}_positionHTMLElement(t){const e=t.getPrivate("htmlElementWrapper");if(e){const s=t.getPrivate("wrapperContainer");if(s){const n=s.globalBounds();e.style.clipPath="rect("+n.top+"px "+n.right+"px "+n.bottom+"px "+n.left+"px)"}}const i=t.getPrivate("htmlElement");if(i){b(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],x=>{const v=t.get(x);v?i.style[x]=v+"px":i.style[x]=""}),b(["fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration"],x=>{const v=t.get(x);v?x=="fontSize"&&!Ft(v)?i.style[x]=v+"px":i.style[x]=v+"":i.style[x]=""});const r=t.compositeScale()||1,o=t.compositeRotation()||0;i.style.transform="",i.style.transformOrigin="";const l=t.compositeOpacity();setTimeout(()=>{i.style.opacity=l+""},10);const h=t.isVisibleDeep();h&&(i.style.display="block");let d={x:t.x()+t.get("dx",0),y:t.y()+t.get("dy",0)};t.parent&&(d=t.parent.toGlobal(d)),i.style.top=d.y+"px",i.style.left=d.x+"px";const f=t.get("width"),u=t.get("height");let c=0,p=0;if(f&&(c=t.width()),u&&(p=t.height()),!f||!u){i.style.position="fixed",i.style.width="",i.style.height="";const x=i.getBoundingClientRect();i.style.position="absolute",f||(c=x.width),u||(p=x.height);let v=c/r,D=p/r,M=t.get("centerX",0),k=t.get("centerY",0),E=0,I=0,B=0,A=0;M instanceof O?(E=-M.value*v,I=(1-M.value)*v):(E=-M,I=v-M),k instanceof O?(B=-k.value*D,A=(1-k.value)*D):(B=-k,A=D-k),t._localBounds={left:E,right:I,top:B,bottom:A};let F=t._adjustedLocalBounds,w=t._display.getAdjustedBounds(t._localBounds);t._adjustedLocalBounds=w,(F.left!==w.left||F.right!==w.right||F.top!==w.top||F.bottom!==w.bottom)&&t.markDirtyBounds()}c>0&&(i.style.minWidth=c+"px"),p>0&&(i.style.minHeight=p+"px"),(!h||l==0)&&(i.style.display="none");const m=t.get("centerX",0),g=Di(m)?m.percent+"%":m+"px",_=t.get("centerY",0),y=Di(_)?_.percent+"%":_+"px";(m||_)&&(i.style.transform="translate(-"+g+", -"+y+")"+i.style.transform),r!=1&&(i.style.transform+="scale("+r+")"),o!=0&&(i.style.transform+=" rotate("+o+"deg)"),i.style.transform!=""&&(i.style.transformOrigin=g+" "+y)}}_setHTMLContent(t,e){let i=t.getPrivate("htmlElement");i||(i=this._makeHTMLElement(t),this.autoResize||this.resize()),i.innerHTML!=e&&(i.innerHTML=e)}_removeHTMLContent(t){const e=t.getPrivate("htmlElementWrapper"),i=t.getPrivate("htmlElement");e?(this._htmlElementContainer.removeChild(e),t.removePrivate("htmlElement"),t.removePrivate("htmlElementWrapper"),t.removePrivate("wrapperContainer")):i&&(this._htmlElementContainer.removeChild(i),t.removePrivate("htmlElement"),t.removePrivate("wrapperContainer")),vt(this._htmlEnabledContainers,t)}}class di extends Mt{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let t=this.width(),e=this.height(),i=t/Math.abs(t),s=e/Math.abs(e),n=0,r=0;const o=this.get("strokeWidth",0);this.get("containStroke",!1)&&(t-=i*o,e-=s*o,n+=i*o/2,r+=s*o/2);let l=t,h=e;if(T(l)&&T(h)){let d=Math.min(l,h)/2,f=X(this.get("cornerRadiusTL",8),d),u=X(this.get("cornerRadiusTR",8),d),c=X(this.get("cornerRadiusBR",8),d),p=X(this.get("cornerRadiusBL",8),d),m=Math.min(Math.abs(l/2),Math.abs(h/2));f=q(f,0,m),u=q(u,0,m),c=q(c,0,m),p=q(p,0,m);const g=this._display;g.moveTo(n+f*i,r),g.lineTo(n+l-u*i,r),u>0&&g.arcTo(n+l,r,n+l,r+u*s,u),g.lineTo(n+l,r+h-c*s),c>0&&g.arcTo(n+l,r+h,n+l-c*i,r+h,c),g.lineTo(n+p*i,r+h),p>0&&g.arcTo(n,r+h,n,r+h-p*s,p),g.lineTo(n,r+f*s),f>0&&g.arcTo(n,r,n+f*i,r,f),g.closePath()}}}di.className="RoundedRectangle";di.classNames=Mt.classNames.concat([di.className]);class jn extends Ne{incrementRef(){}decrementRef(){}_onPush(t){this.processor&&this.processor.processRow(t),super._onPush(t)}_onInsertIndex(t,e){this.processor&&this.processor.processRow(e),super._onInsertIndex(t,e)}_onSetIndex(t,e,i){this.processor&&this.processor.processRow(i),super._onSetIndex(t,e,i)}}class ei extends Qi{constructor(t,e,i){super(i),this.dataContext=e,this.component=t,this._settings.visible=!0,this._checkDirty()}markDirty(){this.component.markDirtyValues(this)}_startAnimation(){this.component._root._addAnimation(this)}_animationTime(){return this.component._root.animationTime}_dispose(){this.component&&this.component.disposeDataItem(this),super._dispose()}show(t){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,t)}hide(t){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,t)}isHidden(){return!this.get("visible")}}class ce extends W{constructor(){super(...arguments),this._data=new jn,this._dataItems=[],this._mainDataItems=this._dataItems,this.valueFields=[],this.fields=["id"],this._valuesDirty=!1,this._dataChanged=!1,this._dataGrouped=!1,this.inited=!1}set data(t){t.incrementRef(),this._data.decrementRef(),this._data=t}get data(){return this._data}_dispose(){super._dispose(),this._data.decrementRef()}_onDataClear(){}_afterNew(){super._afterNew(),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll(t=>{const e=this._mainDataItems;if(this.markDirtyValues(),this._markDirtyGroup(),this._dataChanged=!0,t.type==="clear")b(e,i=>{i.dispose()}),e.length=0,this._onDataClear();else if(t.type==="push"){const i=new ei(this,t.newValue,this._makeDataItem(t.newValue));e.push(i),this.processDataItem(i)}else if(t.type==="setIndex"){const i=e[t.index],s=this._makeDataItem(t.newValue);i.bullets&&i.bullets.length==0&&(i.bullets=void 0),_t(s).forEach(([n,r])=>{i.get(n)!=r&&i.animate({key:n,to:r,duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})}),i.dataContext=t.newValue}else if(t.type==="insertIndex"){const i=new ei(this,t.newValue,this._makeDataItem(t.newValue));e.splice(t.index,0,i),this.processDataItem(i)}else if(t.type==="removeIndex")e[t.index].dispose(),e.splice(t.index,1);else if(t.type==="moveIndex"){const i=e[t.oldIndex];e.splice(t.oldIndex,1),e.splice(t.newIndex,0,i)}else throw new Error("Unknown IStreamEvent type");this._afterDataChange()}))}_postUpdateData(){}updateData(t){let e=0;b(t,(i,s)=>{const n=this.dataItems[s];if(!n)this.data.push(i);else{const r=n.dataContext;r&&_t(i).forEach(([l,h])=>{r[l]=h});const o=this._makeDataItem(r);_t(o).forEach(([l,h])=>{var d;if(n.get(l)!=h){n.set(l,h);const f=(d=this._valueFieldsF[l])===null||d===void 0?void 0:d.workingKey;f&&n.set(f,h)}})}e=s});for(let i=this.dataItems.length-1;i>e;i--){const s=this.dataItems[i];vt(this.dataItems,s),s.dispose()}this._postUpdateData()}_updateFields(){this.valueFields&&(this._valueFields=[],this._valueFieldsF={},b(this.valueFields,t=>{this.get(t+"Field")&&(this._valueFields.push(t),this._valueFieldsF[t]={fieldKey:t+"Field",workingKey:t+"Working"})})),this.fields&&(this._fields=[],this._fieldsF={},b(this.fields,t=>{this.get(t+"Field")&&(this._fields.push(t),this._fieldsF[t]=t+"Field")}))}get dataItems(){return this._dataItems}processDataItem(t){}_makeDataItem(t){const e={};return this._valueFields&&b(this._valueFields,i=>{const s=this.get(this._valueFieldsF[i].fieldKey);e[i]=t[s],e[this._valueFieldsF[i].workingKey]=e[i]}),this._fields&&b(this._fields,i=>{const s=this.get(this._fieldsF[i]);e[i]=t[s]}),e}makeDataItem(t,e){let i=new ei(this,e,t);return this.processDataItem(i),i}pushDataItem(t,e){const i=this.makeDataItem(t,e);return this._mainDataItems.push(i),i}disposeDataItem(t){}showDataItem(t,e){return st(this,void 0,void 0,function*(){t.set("visible",!0)})}hideDataItem(t,e){return st(this,void 0,void 0,function*(){t.set("visible",!1)})}_clearDirty(){super._clearDirty(),this._valuesDirty=!1}_afterDataChange(){}_afterChanged(){if(super._afterChanged(),this._dataChanged){const t="datavalidated";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this}),this._dataChanged=!1}if(this._valuesDirty){const t="valueschanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}this.inited=!0}markDirtyValues(t){this.markDirty(),this._valuesDirty=!0}_markDirtyGroup(){this._dataGrouped=!1}markDirtySize(){this._sizeDirty=!0,this.markDirty()}getDataItemById(t){return Yi(this.dataItems,e=>e.get("id")==t)}}ce.className="Component";ce.classNames=W.classNames.concat([ce.className]);function qn(a){return new Promise((t,e)=>{setTimeout(t,a)})}function yr(a,t,e,i,s,n,r){if(!r||s){let o=0;switch(!s&&t!="millisecond"&&(o=a.getTimezoneOffset(),a.setUTCMinutes(a.getUTCMinutes()-o)),t){case"day":let l=a.getUTCDate();e>1||a.setUTCDate(l),a.setUTCHours(0,0,0,0);break;case"second":let h=a.getUTCSeconds();e>1&&(h=Math.floor(h/e)*e),a.setUTCSeconds(h,0);break;case"millisecond":if(e==1)return a;let d=a.getUTCMilliseconds();d=Math.floor(d/e)*e,a.setUTCMilliseconds(d);break;case"hour":let f=a.getUTCHours();e>1&&(f=Math.floor(f/e)*e),a.setUTCHours(f,0,0,0);break;case"minute":let u=a.getUTCMinutes();e>1&&(u=Math.floor(u/e)*e),a.setUTCMinutes(u,0,0);break;case"month":let c=a.getUTCMonth();e>1&&(e==2||e==3||e==4||e==6)&&(c=Math.floor(c/e)*e),a.setUTCMonth(c,1),a.setUTCHours(0,0,0,0);break;case"year":let p=a.getUTCFullYear();e>1&&(p=Math.floor(p/e)*e),a.setUTCFullYear(p,0,1),a.setUTCHours(0,0,0,0);break;case"week":let m=a.getUTCDate(),g=a.getUTCDay();T(i)||(i=1),g>=i?m=m-g+i:m=m-(7+g)+i,a.setUTCDate(m),a.setUTCHours(0,0,0,0);break}if(!s&&t!="millisecond"&&(a.setUTCMinutes(a.getUTCMinutes()+o),t=="day"||t=="week"||t=="month"||t=="year")){let l=a.getTimezoneOffset();if(l!=o){let h=l-o;a.setUTCMinutes(a.getUTCMinutes()+h)}}return a}else{if(isNaN(a.getTime()))return a;let o=a.getTime(),l=r.offsetUTC(a),h=a.getTimezoneOffset(),d=r.parseDate(a),f=d.year,u=d.month,c=d.day,p=d.hour,m=d.minute,g=d.second,_=d.millisecond,y=d.weekday,x=l-h;switch(t){case"day":p=0,m=x,g=0,_=0;break;case"second":m+=x,e>1&&(g=Math.floor(g/e)*e),_=0;break;case"millisecond":m+=x,e>1&&(_=Math.floor(_/e)*e);break;case"hour":e>1&&(p=Math.floor(p/e)*e),m=x,g=0,_=0;break;case"minute":e>1&&(m=Math.floor(m/e)*e),m+=x,g=0,_=0;break;case"month":e>1&&(u=Math.floor(u/e)*e),c=1,p=0,m=x,g=0,_=0;break;case"year":e>1&&(f=Math.floor(f/e)*e),u=0,c=1,p=0,m=x,g=0,_=0;break;case"week":T(i)||(i=1),y>=i?c=c-y+i:c=c-(7+y)+i,p=0,m=x,g=0,_=0;break}a=new Date(f,u,c,p,m,g,_);const v=a.getTime();let D=36e5;t=="hour"&&(D=36e5*e),v+D<=o&&(t=="hour"||t=="minute"||t=="second"||t=="millisecond")&&(a=new Date(v+D));let M=a.getTimezoneOffset(),E=r.offsetUTC(a)-M;return E!=x&&a.setTime(a.getTime()+(E-x)*6e4),a}}class ue extends ce{constructor(){super(...arguments),this._aggregatesCalculated=!1,this._selectionAggregatesCalculated=!1,this._dataProcessed=!1,this._baseSeriesDirty=!1,this.bullets=new Ne,this.bulletsContainer=W.new(this._root,{width:H,height:H,position:"absolute"})}_afterNew(){this.valueFields.push("value","customValue"),super._afterNew(),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll(()=>{this._handleBullets(this.dataItems)}))}_dispose(){this.bulletsContainer.dispose(),super._dispose()}startIndex(){let t=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),t)}endIndex(){let t=this.dataItems.length;return Math.max(0,Math.min(this.getPrivate("endIndex",t),t))}_handleBullets(t){b(t,e=>{const i=e.bullets;i&&(b(i,s=>{s.dispose()}),e.bullets=void 0)}),this.markDirtyValues()}_makeBullets(t){this._shouldMakeBullet(t)&&(t.bullets=[],this.bullets.each(e=>{this._makeBullet(t,e)}))}_shouldMakeBullet(t){return!0}_makeBullet(t,e,i){const s=e(this._root,this,t);return s&&(s._index=i,this._makeBulletReal(t,s)),s}_makeBulletReal(t,e){let i=e.get("sprite");i&&(i._setDataItem(t),i.setRaw("position","absolute"),this.bulletsContainer.children.push(i)),e.series=this,t.bullets.push(e)}addBullet(t,e){t.bullets||(t.bullets=[]),e&&this._makeBulletReal(t,e)}_clearDirty(){super._clearDirty(),this._aggregatesCalculated=!1,this._baseSeriesDirty=!1,this._selectionAggregatesCalculated=!1}_prepareChildren(){super._prepareChildren();const t=this.dataItems,e=t.length;let i=this.startIndex(),s=this.endIndex();if(this.isDirty("name")&&this.updateLegendValue(),this.isDirty("heatRules")&&(this._valuesDirty=!0),this.isPrivateDirty("baseValueSeries")){const r=this.getPrivate("baseValueSeries");r&&this._disposers.push(r.onPrivate("startIndex",()=>{this._baseSeriesDirty=!0,this.markDirtyValues()}))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,e),this._aggregatesCalculated=!0,i!=0&&(this._psi=void 0))),(this._psi!=i||this._pei!=s||this.isPrivateDirty("adjustedStartIndex"))&&!this._selectionAggregatesCalculated&&(i===0&&s===e&&this._aggregatesCalculated||this._calculateAggregates(i,s),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){let r=this.get("tooltip");r&&(r.hide(0),r.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){let r;const o=this.get("legendDataItem");if(o&&(r=o.get("markerRectangle"),r&&this.isVisible())){if(this.isDirty("stroke")){let l=this.get("stroke");r.set("stroke",l)}if(this.isDirty("fill")){let l=this.get("fill");r.set("fill",l)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0){let r=this.startIndex(),o=this.endIndex();o<e&&o++;for(let l=r;l<o;l++){let h=t[l];h.bullets||this._makeBullets(h)}}}_handleRemoved(){}_adjustStartIndex(t){return t}_calculateAggregates(t,e){let i=this._valueFields;if(!i)throw new Error("No value fields are set for the series.");const s=this.get("excludeFromAggregate");s&&(i=i.filter(g=>s.indexOf(g)==-1));const n={},r={},o={},l={},h={},d={},f={},u={},c={};for(let g=0,_=i.length;g<_;g++){let y=i[g];n[y]=0,r[y]=0,o[y]=0}const p=this.dataItems,m=p.length;for(let g=0,_=i.length;g<_;g++){let y=i[g],x=y+"Change",v=y+"ChangePercent",D=y+"ChangePrevious",M=y+"ChangePreviousPercent",k=y+"ChangeSelection",E=y+"ChangeSelectionPercent",I="valueY";(y==="valueX"||y.endsWith("ValueX"))&&(I="valueX");const B=this.getPrivate("baseValueSeries"),A=this.getPrivate("adjustedStartIndex",t),F=(w,C,R)=>{if(t===0){const Y=d[I],j=C-Y;w.setRaw(x,j),w.setRaw(v,j/Y*100)}const ht=C-c[I],z=C-d[I];w.setRaw(D,ht),w.setRaw(M,ht/c[I]*100),w.setRaw(k,z),w.setRaw(E,z/d[I]*100),c[R]=C};for(let w=A;w<e;w++){const C=p[w];if(C){let R=C.get(y);if(R!=null){l[y]==null&&(l[y]=R),h[y]==null&&(h[y]=R),d[y]==null&&(d[y]=R,c[y]=R,B&&(d[I]=B._getBase(I)));break}}}for(let w=A;w<e;w++){const C=p[w];if(C){let R=C._settings[y];R!=null&&(o[y]++,n[y]+=R,r[y]+=Math.abs(R),l[y]>R&&(l[y]=R),h[y]<R&&(h[y]=R),f[y]=R,F(C,R,y))}}if(u[y]=n[y]/o[y],e<m){const w=p[e];if(w){let C=w.get(y);C!=null&&F(w,C,y)}}if(e+1<m){const w=p[e+1];if(w){let C=w.get(y);C!=null&&F(w,C,y)}}t>0&&t--,delete c[y];for(let w=t;w<A;w++){const C=p[w];if(C){let R=C.get(y);c[y]==null&&(c[y]=R),R!=null&&F(C,R,y)}}}for(let g=0,_=i.length;g<_;g++){let y=i[g];this.setPrivate(y+"AverageSelection",u[y]),this.setPrivate(y+"CountSelection",o[y]),this.setPrivate(y+"SumSelection",n[y]),this.setPrivate(y+"AbsoluteSumSelection",r[y]),this.setPrivate(y+"LowSelection",l[y]),this.setPrivate(y+"HighSelection",h[y]),this.setPrivate(y+"OpenSelection",d[y]),this.setPrivate(y+"CloseSelection",f[y])}if(t===0&&e===m)for(let g=0,_=i.length;g<_;g++){let y=i[g];this.setPrivate(y+"Average",u[y]),this.setPrivate(y+"Count",o[y]),this.setPrivate(y+"Sum",n[y]),this.setPrivate(y+"AbsoluteSum",r[y]),this.setPrivate(y+"Low",l[y]),this.setPrivate(y+"High",h[y]),this.setPrivate(y+"Open",d[y]),this.setPrivate(y+"Close",f[y])}}_updateChildren(){super._updateChildren(),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible"));const t=this.get("heatRules");if(this._valuesDirty&&t&&t.length>0&&b(t,e=>{const i=e.minValue||this.getPrivate(e.dataField+"Low")||0,s=e.maxValue||this.getPrivate(e.dataField+"High")||0;b(e.target._entities,n=>{const r=n.dataItem.get(e.dataField);if(!T(r)){e.neutral&&n.set(e.key,e.neutral);const o=n.states;if(o){const l=o.lookup("default");l&&e.neutral&&l.set(e.key,e.neutral)}if(!e.customFunction)return}if(e.customFunction)e.customFunction.call(this,n,i,s,r);else{let o;e.logarithmic?o=(Math.log(r)*Math.LOG10E-Math.log(i)*Math.LOG10E)/(Math.log(s)*Math.LOG10E-Math.log(i)*Math.LOG10E):o=(r-i)/(s-i),T(r)&&(!T(o)||Math.abs(o)==1/0)&&(o=.5);let l;T(e.min)?l=e.min+(e.max-e.min)*o:e.min instanceof S?l=S.interpolate(o,e.min,e.max):e.min instanceof O&&(l=ji(o,e.min,e.max)),n.set(e.key,l);const h=n.states;if(h){const d=h.lookup("default");d&&d.set(e.key,l)}}})}),this.get("visible")){const e=this.dataItems;let i=e.length,s=this.startIndex(),n=this.endIndex();n<i&&n++,s>0&&s--;for(let r=0;r<s;r++)this._hideBullets(e[r]);for(let r=s;r<n;r++)this._positionBullets(e[r]);for(let r=n;r<i;r++)this._hideBullets(e[r])}}_positionBullets(t){t.bullets&&b(t.bullets,e=>{this._positionBullet(e);const i=e.get("sprite");e.get("dynamic")&&(i&&(i._markDirtyKey("fill"),i.markDirtySize()),i instanceof W&&i.walkChildren(s=>{s._markDirtyKey("fill"),s.markDirtySize(),s instanceof Dt&&s.text.markDirtyText()})),i instanceof Dt&&i.get("populateText")&&i.text.markDirtyText()})}_hideBullets(t){t.bullets&&b(t.bullets,e=>{let i=e.get("sprite");i&&i.setPrivate("visible",!1)})}_positionBullet(t){}_placeBulletsContainer(t){t.bulletsContainer.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){const t=this.bulletsContainer;t.parent&&t.parent.children.removeValue(t)}disposeDataItem(t){const e=t.bullets;e&&(b(e,i=>{i.dispose()}),t.bullets=void 0)}_getItemReaderLabel(){return""}showDataItem(t,e){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return st(this,void 0,void 0,function*(){const s=[i.showDataItem.call(this,t,e)],n=t.bullets;n&&b(n,r=>{const o=r.get("sprite");o&&s.push(o.show(e))}),yield Promise.all(s)})}hideDataItem(t,e){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return st(this,void 0,void 0,function*(){const s=[i.hideDataItem.call(this,t,e)],n=t.bullets;n&&b(n,r=>{const o=r.get("sprite");o&&s.push(o.hide(e))}),yield Promise.all(s)})}_sequencedShowHide(t,e){return st(this,void 0,void 0,function*(){if(this.get("sequencedInterpolation"))if(T(e)||(e=this.get("interpolationDuration",0)),e>0){const i=this.startIndex(),s=this.endIndex();yield Promise.all(ni(this.dataItems,(n,r)=>st(this,void 0,void 0,function*(){let o=e||0;(r<i-10||r>s+10)&&(o=0);let l=this.get("sequencedDelay",0)+o/(s-i);yield qn(l*(r-i)),t?yield this.showDataItem(n,o):yield this.hideDataItem(n,o)})))}else yield Promise.all(ni(this.dataItems,i=>t?this.showDataItem(i,0):this.hideDataItem(i,0)))})}updateLegendValue(t){if(t){const e=t.get("legendDataItem");if(e){const i=e.get("valueLabel");if(i){const n=i.text;let r="";i._setDataItem(t),r=this.get("legendValueText",n.get("text","")),i.set("text",r),n.markDirtyText()}const s=e.get("label");if(s){const n=s.text;let r="";s._setDataItem(t),r=this.get("legendLabelText",n.get("text","")),s.set("text",r),n.markDirtyText()}}}}updateLegendMarker(t){}_onHide(){super._onHide();const t=this.getTooltip();t&&t.hide()}hoverDataItem(t){}unhoverDataItem(t){}_getBase(t){const e=this.dataItems[this.startIndex()];return e?e.get(t):0}}ue.className="Series";ue.classNames=ce.classNames.concat([ue.className]);function Fi(a,t){for(let e=0,i=t.length;e<i;e++){const s=t[e];if(s.length>0){let n=s[0];if(n.length>0){let r=n[0];a.moveTo(r.x,r.y);for(let o=0,l=s.length;o<l;o++)Zn(a,s[o])}}}}function Zn(a,t){for(let e=0,i=t.length;e<i;e++){const s=t[e];a.lineTo(s.x,s.y)}}class fe extends ot{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const t=this.get("points"),e=this.get("segments");if(t&&t.length>0){let i=t[0];this._display.moveTo(i.x,i.y),Fi(this._display,[[t]])}else if(e)Fi(this._display,e);else if(!this.get("draw")){let i=this.width(),s=this.height();this._display.moveTo(0,0),this._display.lineTo(i,s)}}}}fe.className="Line";fe.classNames=ot.classNames.concat([fe.className]);class Re extends Nt{constructor(){super(...arguments),this._display=this._root._renderer.makeRadialText("",this.textStyle)}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*ae,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Re.className="RadialText";Re.classNames=Nt.classNames.concat([Re.className]);class Le extends Dt{constructor(){super(...arguments),this._flipped=!1}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(Re.new(this._root,{}))}baseRadius(){const t=this.getPrivate("radius",0),e=this.getPrivate("innerRadius",0),i=this.get("baseRadius",0);return e+X(i,t-e)}radius(){const t=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(t?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const t=this.get("textType","adjusted"),e=this.get("inside",!1),i=this.get("orientation");let s=vi(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",e);const n=lt(s),r=mt(s);let o=this.baseRadius(),l=this.radius();if(this._display.angle=0,t=="circular")this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this.setRaw("x",void 0),this.setRaw("y",void 0),this._text.set("orientation",i),this._text.set("radius",l);else{o==0&&(s=0,l=0);let h=l*r,d=l*n;t=="radial"?(this.setRaw("x",h),this.setRaw("y",d),s<90||s>270||i!="auto"?(this._display.angle=s,this._flipped=!1):(this._display.angle=s+180,this._flipped=!0),this._dirty.rotation=!1):t=="adjusted"?(this.setRaw("centerX",L),this.setRaw("centerY",L),this.setRaw("x",h),this.setRaw("y",d)):t=="regular"&&(this.setRaw("x",h),this.setRaw("y",d))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const t=this.get("textType","regular"),e=this.get("inside",!1);let i=0,s=0,n=this.get("labelAngle",0),r=this.localBounds(),o=r.right-r.left,l=r.bottom-r.top;if(t=="radial"){if(this._flipped){let h=this.get("centerX");h instanceof O&&(o=o*(1-h.value*2)),i=o*mt(n),s=o*lt(n)}}else!e&&t=="adjusted"&&(i=o/2*mt(n),s=l/2*lt(n));this.setRaw("dx",i),this.setRaw("dy",s),super._updatePosition()}get text(){return this._text}}Le.className="RadialLabel";Le.classNames=Dt.classNames.concat([Le.className]);function Tt(a){return function(){return a}}const zi=Math.abs,Z=Math.atan2,Bt=Math.cos,Jn=Math.max,ii=Math.min,gt=Math.sin,Gt=Math.sqrt,it=1e-12,pe=Math.PI,Ie=pe/2,Qn=2*pe;function tr(a){return a>1?0:a<-1?pe:Math.acos(a)}function Ni(a){return a>=1?Ie:a<=-1?-Ie:Math.asin(a)}const ci=Math.PI,ui=2*ci,Lt=1e-6,er=ui-Lt;function ns(a){this._+=a[0];for(let t=1,e=a.length;t<e;++t)this._+=arguments[t]+a[t]}function ir(a){let t=Math.floor(a);if(!(t>=0))throw new Error(`invalid digits: ${a}`);if(t>15)return ns;const e=10**t;return function(i){this._+=i[0];for(let s=1,n=i.length;s<n;++s)this._+=Math.round(arguments[s]*e)/e+i[s]}}class sr{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ns:ir(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,s){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,e,i,s,n,r){this._append`C${+t},${+e},${+i},${+s},${this._x1=+n},${this._y1=+r}`}arcTo(t,e,i,s,n){if(t=+t,e=+e,i=+i,s=+s,n=+n,n<0)throw new Error(`negative radius: ${n}`);let r=this._x1,o=this._y1,l=i-t,h=s-e,d=r-t,f=o-e,u=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(u>Lt)if(!(Math.abs(f*l-h*d)>Lt)||!n)this._append`L${this._x1=t},${this._y1=e}`;else{let c=i-r,p=s-o,m=l*l+h*h,g=c*c+p*p,_=Math.sqrt(m),y=Math.sqrt(u),x=n*Math.tan((ci-Math.acos((m+u-g)/(2*_*y)))/2),v=x/y,D=x/_;Math.abs(v-1)>Lt&&this._append`L${t+v*d},${e+v*f}`,this._append`A${n},${n},0,0,${+(f*c>d*p)},${this._x1=t+D*l},${this._y1=e+D*h}`}}arc(t,e,i,s,n,r){if(t=+t,e=+e,i=+i,r=!!r,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(s),l=i*Math.sin(s),h=t+o,d=e+l,f=1^r,u=r?s-n:n-s;this._x1===null?this._append`M${h},${d}`:(Math.abs(this._x1-h)>Lt||Math.abs(this._y1-d)>Lt)&&this._append`L${h},${d}`,i&&(u<0&&(u=u%ui+ui),u>er?this._append`A${i},${i},0,1,${f},${t-o},${e-l}A${i},${i},0,1,${f},${this._x1=h},${this._y1=d}`:u>Lt&&this._append`A${i},${i},0,${+(u>=ci)},${f},${this._x1=t+i*Math.cos(n)},${this._y1=e+i*Math.sin(n)}`)}rect(t,e,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function nr(a){let t=3;return a.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);t=i}return a},()=>new sr(t)}function rr(a){return a.innerRadius}function ar(a){return a.outerRadius}function or(a){return a.startAngle}function lr(a){return a.endAngle}function hr(a){return a&&a.padAngle}function dr(a,t,e,i,s,n,r,o){var l=e-a,h=i-t,d=r-s,f=o-n,u=f*l-d*h;if(!(u*u<it))return u=(d*(t-n)-f*(a-s))/u,[a+u*l,t+u*h]}function Pe(a,t,e,i,s,n,r){var o=a-e,l=t-i,h=(r?n:-n)/Gt(o*o+l*l),d=h*l,f=-h*o,u=a+d,c=t+f,p=e+d,m=i+f,g=(u+p)/2,_=(c+m)/2,y=p-u,x=m-c,v=y*y+x*x,D=s-n,M=u*m-p*c,k=(x<0?-1:1)*Gt(Jn(0,D*D*v-M*M)),E=(M*x-y*k)/v,I=(-M*y-x*k)/v,B=(M*x+y*k)/v,A=(-M*y+x*k)/v,F=E-g,w=I-_,C=B-g,R=A-_;return F*F+w*w>C*C+R*R&&(E=B,I=A),{cx:E,cy:I,x01:-d,y01:-f,x11:E*(s/D-1),y11:I*(s/D-1)}}function cr(){var a=rr,t=ar,e=Tt(0),i=null,s=or,n=lr,r=hr,o=null,l=nr(h);function h(){var d,f,u=+a.apply(this,arguments),c=+t.apply(this,arguments),p=s.apply(this,arguments)-Ie,m=n.apply(this,arguments)-Ie,g=zi(m-p),_=m>p;if(o||(o=d=l()),c<u&&(f=c,c=u,u=f),!(c>it))o.moveTo(0,0);else if(g>Qn-it)o.moveTo(c*Bt(p),c*gt(p)),o.arc(0,0,c,p,m,!_),u>it&&(o.moveTo(u*Bt(m),u*gt(m)),o.arc(0,0,u,m,p,_));else{var y=p,x=m,v=p,D=m,M=g,k=g,E=r.apply(this,arguments)/2,I=E>it&&(i?+i.apply(this,arguments):Gt(u*u+c*c)),B=ii(zi(c-u)/2,+e.apply(this,arguments)),A=B,F=B,w,C;if(I>it){var R=Ni(I/u*gt(E)),ht=Ni(I/c*gt(E));(M-=R*2)>it?(R*=_?1:-1,v+=R,D-=R):(M=0,v=D=(p+m)/2),(k-=ht*2)>it?(ht*=_?1:-1,y+=ht,x-=ht):(k=0,y=x=(p+m)/2)}var z=c*Bt(y),Y=c*gt(y),j=u*Bt(D),et=u*gt(D);if(B>it){var pt=c*Bt(x),Q=c*gt(x),dt=u*Bt(v),Wt=u*gt(v),ct;if(g<pe)if(ct=dr(z,Y,dt,Wt,pt,Q,j,et)){var Zt=z-ct[0],Ve=Y-ct[1],Ge=pt-ct[0],Xe=Q-ct[1],bi=1/gt(tr((Zt*Ge+Ve*Xe)/(Gt(Zt*Zt+Ve*Ve)*Gt(Ge*Ge+Xe*Xe)))/2),wi=Gt(ct[0]*ct[0]+ct[1]*ct[1]);A=ii(B,(u-wi)/(bi-1)),F=ii(B,(c-wi)/(bi+1))}else A=F=0}k>it?F>it?(w=Pe(dt,Wt,z,Y,c,F,_),C=Pe(pt,Q,j,et,c,F,_),o.moveTo(w.cx+w.x01,w.cy+w.y01),F<B?o.arc(w.cx,w.cy,F,Z(w.y01,w.x01),Z(C.y01,C.x01),!_):(o.arc(w.cx,w.cy,F,Z(w.y01,w.x01),Z(w.y11,w.x11),!_),o.arc(0,0,c,Z(w.cy+w.y11,w.cx+w.x11),Z(C.cy+C.y11,C.cx+C.x11),!_),o.arc(C.cx,C.cy,F,Z(C.y11,C.x11),Z(C.y01,C.x01),!_))):(o.moveTo(z,Y),o.arc(0,0,c,y,x,!_)):o.moveTo(z,Y),!(u>it)||!(M>it)?o.lineTo(j,et):A>it?(w=Pe(j,et,pt,Q,u,-A,_),C=Pe(z,Y,dt,Wt,u,-A,_),o.lineTo(w.cx+w.x01,w.cy+w.y01),A<B?o.arc(w.cx,w.cy,A,Z(w.y01,w.x01),Z(C.y01,C.x01),!_):(o.arc(w.cx,w.cy,A,Z(w.y01,w.x01),Z(w.y11,w.x11),!_),o.arc(0,0,u,Z(w.cy+w.y11,w.cx+w.x11),Z(C.cy+C.y11,C.cx+C.x11),_),o.arc(C.cx,C.cy,A,Z(C.y11,C.x11),Z(C.y01,C.x01),!_))):o.arc(0,0,u,D,v,_)}if(o.closePath(),d)return o=null,d+""||null}return h.centroid=function(){var d=(+a.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+s.apply(this,arguments)+ +n.apply(this,arguments))/2-pe/2;return[Bt(f)*d,gt(f)*d]},h.innerRadius=function(d){return arguments.length?(a=typeof d=="function"?d:Tt(+d),h):a},h.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:Tt(+d),h):t},h.cornerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:Tt(+d),h):e},h.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:Tt(+d),h):i},h.startAngle=function(d){return arguments.length?(s=typeof d=="function"?d:Tt(+d),h):s},h.endAngle=function(d){return arguments.length?(n=typeof d=="function"?d:Tt(+d),h):n},h.padAngle=function(d){return arguments.length?(r=typeof d=="function"?d:Tt(+d),h):r},h.context=function(d){return arguments.length?(o=d??null,h):o},h}class He extends ot{constructor(){super(...arguments),this.ix=0,this.iy=0,this._generator=cr()}_getTooltipPoint(){let t=this.get("tooltipX"),e=this.get("tooltipY"),i=0,s=0;T(t)&&(i=t),T(e)&&(s=e);let n=this.get("radius",0),r=this.get("innerRadius",0),o=this.get("dRadius",0),l=this.get("dInnerRadius",0);return n+=o,r+=l,r<0&&(r=n+r),t instanceof O&&(i=this.ix*(r+(n-r)*t.value)),e instanceof O&&(s=this.iy*(r+(n-r)*e.value)),this.get("arc")>=360&&r==0&&(i=0,s=0),{x:i,y:s}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let t=this.get("startAngle",0),e=this.get("arc",0);const i=this._generator;e<0&&(t=t+e,e=e*-1),e>.1&&i.cornerRadius(this.get("cornerRadius",0)),i.context(this._display);let s=this.get("radius",0),n=this.get("innerRadius",0),r=this.get("dRadius",0),o=this.get("dInnerRadius",0);s+=r,n+=o,n<0&&(n=s+n),i({innerRadius:n,outerRadius:s,startAngle:(t+90)*ae,endAngle:(t+e+90)*ae});let l=t+e/2;this.ix=mt(l),this.iy=lt(l);const h=this.get("shiftRadius",0);this.setRaw("dx",this.ix*h),this.setRaw("dy",this.iy*h),this.markDirtyPosition()}}}He.className="Slice";He.classNames=ot.classNames.concat([He.className]);class ge extends W{constructor(){super(...arguments),this.chartContainer=this.children.push(W.new(this._root,{width:H,height:H,interactiveChildren:!1})),this.bulletsContainer=W.new(this._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:H,height:H})}}ge.className="Chart";ge.classNames=W.classNames.concat([ge.className]);class _e extends ge{constructor(){super(...arguments),this.seriesContainer=W.new(this._root,{width:H,height:H,isMeasured:!1}),this.series=new qi}_afterNew(){super._afterNew(),this._disposers.push(this.series);const t=this.seriesContainer.children;this._disposers.push(this.series.events.onAll(e=>{if(e.type==="clear"){b(e.oldValues,n=>{this._removeSeries(n)});const i=this.get("colors");i&&i.reset();const s=this.get("patterns");s&&s.reset()}else if(e.type==="push")t.moveValue(e.newValue),this._processSeries(e.newValue);else if(e.type==="setIndex")t.setIndex(e.index,e.newValue),this._processSeries(e.newValue);else if(e.type==="insertIndex")t.insertIndex(e.index,e.newValue),this._processSeries(e.newValue);else if(e.type==="removeIndex")this._removeSeries(e.oldValue);else if(e.type==="moveIndex")t.moveValue(e.value,e.newIndex),this._processSeries(e.value);else if(e.type==="swap"){const i=e.a,s=e.b,n=this.series.indexOf(i),r=this.series.indexOf(s);t.moveValue(i,r),t.moveValue(s,n),this.series.each(o=>{this._processSeries(o),o.markDirtyValues()})}else throw new Error("Unknown IListEvent type")}))}_processSeries(t){t.chart=this,t._placeBulletsContainer(this)}_removeSeries(t){t._handleRemoved(),t.isDisposed()||(this.seriesContainer.children.removeValue(t),t._removeBulletsContainer())}}_e.className="SerialChart";_e.classNames=ge.classNames.concat([_e.className]);class Oe extends fe{}Oe.className="Tick";Oe.classNames=fe.classNames.concat([Oe.className]);class Fe extends J{_afterNew(){super._afterNewApplyThemes(),this._dirty.colors=!1}_beforeChanged(){this.isDirty("colors")&&this.reset()}generateColors(){this.setPrivate("currentPass",this.getPrivate("currentPass",0)+1);const t=this.getPrivate("currentPass"),e=this.get("colors",[this.get("baseColor",S.fromHex(16711680))]);this.getPrivate("numColors")||this.setPrivate("numColors",e.length);const i=this.getPrivate("numColors"),s=0,n=this.get("passOptions"),r=this.get("reuse");for(let o=s;o<i;o++)if(r)e.push(e[o]);else{const l=e[o].toHSL();let h=l.h+(n.hue||0)*t;for(;h>1;)h-=1;let d=l.s+(n.saturation||0)*t;d>1&&(d=1),d<0&&(d=0);let f=l.l+(n.lightness||0)*t;for(;f>1;)f-=1;e.push(S.fromHSL(h,d,f))}}getIndex(t){const e=this.get("colors",[]),i=this.get("saturation");return t>=e.length?(this.generateColors(),this.getIndex(t)):i!=null?S.saturate(e[t],i):e[t]}next(){let t=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",t+this.get("step",1)),this.getIndex(t)}reset(){this.setPrivate("currentStep",this.get("startIndex",0)),this.setPrivate("currentPass",0)}}Fe.className="ColorSet";Fe.classNames=J.classNames.concat([Fe.className]);class ur extends xi{setupDefaultRules(){super.setupDefaultRules();const t=this._root.interfaceColors,e=this.rule.bind(this);e("PercentSeries").setAll({legendLabelText:"{category}",legendValueText:"{valuePercentTotal.formatNumber('0.00p')}",colors:Fe.new(this._root,{}),width:H,height:H}),e("PieChart").setAll({radius:Pt(80),startAngle:-90,endAngle:270}),e("PieSeries").setAll({alignLabels:!0,startAngle:-90,endAngle:270}),e("PieSeries").states.create("hidden",{endAngle:-90,opacity:0}),e("Slice",["pie"]).setAll({position:"absolute",isMeasured:!1,x:0,y:0,toggleKey:"active",tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}",strokeWidth:1,strokeOpacity:1,role:"figure",lineJoin:"round"}),e("Slice",["pie"]).states.create("active",{shiftRadius:20,scale:1}),e("Slice",["pie"]).states.create("hoverActive",{scale:1.04}),e("Slice",["pie"]).states.create("hover",{scale:1.04}),e("RadialLabel",["pie"]).setAll({textType:"aligned",radius:10,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",paddingTop:5,paddingBottom:5,populateText:!0}),e("Tick",["pie"]).setAll({location:1}),e("SlicedChart").setAll({paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10}),e("FunnelSeries").setAll({startLocation:0,endLocation:1,orientation:"vertical",alignLabels:!0,sequencedInterpolation:!0}),e("FunnelSlice").setAll({interactive:!0,expandDistance:0}),e("FunnelSlice").states.create("hover",{expandDistance:.15}),e("Label",["funnel"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:L}),e("Label",["funnel","horizontal"]).setAll({centerX:0,centerY:L,rotation:-90}),e("Label",["funnel","vertical"]).setAll({centerY:L,centerX:0}),e("Tick",["funnel"]).setAll({location:1}),e("FunnelSlice",["funnel","link"]).setAll({fillOpacity:.5,strokeOpacity:0,expandDistance:-.1}),e("FunnelSlice",["funnel","link","vertical"]).setAll({height:10}),e("FunnelSlice",["funnel","link","horizontal"]).setAll({width:10}),e("PyramidSeries").setAll({valueIs:"area"}),e("FunnelSlice",["pyramid","link"]).setAll({fillOpacity:.5}),e("FunnelSlice",["pyramid","link","vertical"]).setAll({height:0}),e("FunnelSlice",["pyramid","link","horizontal"]).setAll({width:0}),e("FunnelSlice",["pyramid"]).setAll({interactive:!0,expandDistance:0}),e("FunnelSlice",["pyramid"]).states.create("hover",{expandDistance:.15}),e("Label",["pyramid"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:L}),e("Label",["pyramid","horizontal"]).setAll({centerX:0,centerY:L,rotation:-90}),e("Label",["pyramid","vertical"]).setAll({centerY:L,centerX:0}),e("Tick",["pyramid"]).setAll({location:1}),e("FunnelSlice",["pictorial"]).setAll({interactive:!0,tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}"}),e("Label",["pictorial"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:L}),e("Label",["pictorial","horizontal"]).setAll({centerX:0,centerY:L,rotation:-90}),e("Label",["pictorial","vertical"]).setAll({centerY:L,centerX:0}),e("FunnelSlice",["pictorial","link"]).setAll({fillOpacity:.5,width:0,height:0}),e("Tick",["pictorial"]).setAll({location:.5});{const i=e("Graphics",["pictorial","background"]);i.setAll({fillOpacity:.2}),P(i,"fill",t,"alternativeBackground")}}}class me extends _e{_afterNew(){this._defaultThemes.push(ur.new(this._root)),super._afterNew(),this.chartContainer.children.push(this.seriesContainer),this.seriesContainer.children.push(this.bulletsContainer)}_processSeries(t){super._processSeries(t),this.seriesContainer.children.moveValue(this.bulletsContainer,this.seriesContainer.children.length-1)}}me.className="PercentChart";me.classNames=_e.classNames.concat([me.className]);class ye extends ue{constructor(){super(...arguments),this.slicesContainer=this.children.push(W.new(this._root,{position:"absolute",isMeasured:!1})),this.labelsContainer=this.children.push(W.new(this._root,{position:"absolute",isMeasured:!1})),this.ticksContainer=this.children.push(W.new(this._root,{position:"absolute",isMeasured:!1})),this._lLabels=[],this._rLabels=[],this._hLabels=[],this.slices=this.addDisposer(this._makeSlices()),this.labels=this.addDisposer(this._makeLabels()),this.ticks=this.addDisposer(this._makeTicks())}_applyThemes(t=!1){const e=this.get("colors");return e&&e.reset(),super._applyThemes(t)}makeSlice(t){const e=this.slicesContainer.children.push(this.slices.make());return e.on("fill",()=>{this.updateLegendMarker(t)}),e.on("fillPattern",()=>{this.updateLegendMarker(t)}),e.on("stroke",()=>{this.updateLegendMarker(t)}),e._setDataItem(t),t.set("slice",e),this.slices.push(e),e}makeLabel(t){const e=this.labelsContainer.children.push(this.labels.make());return e._setDataItem(t),t.set("label",e),this.labels.push(e),e}_shouldMakeBullet(t){return t.get("value")!=null}makeTick(t){const e=this.ticksContainer.children.push(this.ticks.make());return e._setDataItem(t),t.set("tick",e),this.ticks.push(e),e}_afterNew(){this.fields.push("category","fill"),super._afterNew()}_onDataClear(){const t=this.get("colors");t&&t.reset();const e=this.get("patterns");e&&e.reset()}_prepareChildren(){if(super._prepareChildren(),this._lLabels=[],this._rLabels=[],this._hLabels=[],this._valuesDirty){let t=0,e=0,i=0,s=1/0,n=0;b(this._dataItems,r=>{let o=r.get("valueWorking",0);t+=o,e+=Math.abs(o)}),b(this._dataItems,r=>{let o=r.get("valueWorking",0);o>i&&(i=o),o<s&&(s=o),n++;let l=o/e;e==0&&(l=0),r.setRaw("valuePercentTotal",l*100)}),this.setPrivateRaw("valueLow",s),this.setPrivateRaw("valueHigh",i),this.setPrivateRaw("valueSum",t),this.setPrivateRaw("valueAverage",t/n),this.setPrivateRaw("valueAbsoluteSum",e)}}show(t){const e=Object.create(null,{show:{get:()=>super.show}});return st(this,void 0,void 0,function*(){let i=[];i.push(e.show.call(this,t)),i.push(this._sequencedShowHide(!0,t)),yield Promise.all(i)})}hide(t){const e=Object.create(null,{hide:{get:()=>super.hide}});return st(this,void 0,void 0,function*(){let i=[];i.push(e.hide.call(this,t)),i.push(this._sequencedShowHide(!1,t)),yield Promise.all(i)})}_updateChildren(){super._updateChildren(),this._valuesDirty&&b(this._dataItems,t=>{t.get("label").text.markDirtyText()}),(this.isDirty("legendLabelText")||this.isDirty("legendValueText"))&&b(this._dataItems,t=>{this.updateLegendValue(t)}),this._arrange()}_arrange(){this._arrangeDown(this._lLabels),this._arrangeUp(this._lLabels),this._arrangeDown(this._rLabels),this._arrangeUp(this._rLabels),this._arrangeLeft(this._hLabels),this._arrangeRight(this._hLabels),b(this.dataItems,t=>{this._updateTick(t)})}_afterChanged(){super._afterChanged(),this._arrange()}processDataItem(t){if(super.processDataItem(t),t.get("fill")==null){let e=this.get("colors");e&&t.setRaw("fill",e.next())}if(t.get("fillPattern")==null){let e=this.get("patterns");e&&t.setRaw("fillPattern",e.next())}}showDataItem(t,e){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return st(this,void 0,void 0,function*(){const s=[i.showDataItem.call(this,t,e)];T(e)||(e=this.get("stateAnimationDuration",0));const n=this.get("stateAnimationEasing");let r=t.get("value");const o=t.animate({key:"valueWorking",to:r,duration:e,easing:n});o&&s.push(o.waitForStop());const l=t.get("tick");l&&s.push(l.show(e));const h=t.get("label");h&&s.push(h.show(e));const d=t.get("slice");d&&s.push(d.show(e)),d.get("active")&&d.states.applyAnimate("active"),yield Promise.all(s)})}hideDataItem(t,e){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return st(this,void 0,void 0,function*(){const s=[i.hideDataItem.call(this,t,e)],n=this.states.create("hidden",{});T(e)||(e=n.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const r=n.get("stateAnimationEasing",this.get("stateAnimationEasing")),o=t.animate({key:"valueWorking",to:0,duration:e,easing:r});o&&s.push(o.waitForStop());const l=t.get("tick");l&&s.push(l.hide(e));const h=t.get("label");h&&s.push(h.hide(e));const d=t.get("slice");d.hideTooltip(),d&&s.push(d.hide(e)),yield Promise.all(s)})}disposeDataItem(t){super.disposeDataItem(t);let e=t.get("label");e&&(this.labels.removeValue(e),e.dispose());let i=t.get("tick");i&&(this.ticks.removeValue(i),i.dispose());let s=t.get("slice");s&&(this.slices.removeValue(s),s.dispose())}hoverDataItem(t){const e=t.get("slice");e&&!e.isHidden()&&e.hover()}unhoverDataItem(t){const e=t.get("slice");e&&e.unhover()}updateLegendMarker(t){if(t){const e=t.get("slice");if(e){const i=t.get("legendDataItem");if(i){const s=i.get("markerRectangle");b(sn,n=>{e.get(n)!=null&&s.set(n,e.get(n))})}}}}_arrangeDown(t){if(t){let e=this._getNextDown();t.sort((i,s)=>i.y>s.y?1:i.y<s.y?-1:0),b(t,i=>{const s=i.label.adjustedLocalBounds();let n=s.top;i.y+n<e&&(i.y=e-n),i.label.set("y",i.y),e=i.y+s.bottom})}}_getNextUp(){return this.labelsContainer.maxHeight()}_getNextDown(){return 0}_arrangeUp(t){if(t){let e=this._getNextUp();t.sort((i,s)=>i.y<s.y?1:i.y>s.y?-1:0),b(t,i=>{const s=i.label.adjustedLocalBounds();let n=s.bottom;i.y+n>e&&(i.y=e-n),i.label.set("y",i.y),e=i.y+s.top})}}_arrangeRight(t){if(t){let e=0;t.sort((i,s)=>i.y>s.y?1:i.y<s.y?-1:0),b(t,i=>{const s=i.label.adjustedLocalBounds();let n=s.left;i.y+n<e&&(i.y=e-n),i.label.set("x",i.y),e=i.y+s.right})}}_arrangeLeft(t){if(t){let e=this.labelsContainer.maxWidth();t.sort((i,s)=>i.y<s.y?1:i.y>s.y?-1:0),b(t,i=>{const s=i.label.adjustedLocalBounds();let n=s.right;i.y+n>e&&(i.y=e-n),i.label.set("x",i.y),e=i.y+s.left})}}_updateSize(){super._updateSize(),this.markDirty()}_updateTick(t){}_dispose(){super._dispose();const t=this.chart;t&&t.series.removeValue(this)}}ye.className="PercentSeries";ye.classNames=ue.classNames.concat([ye.className]);class fi extends me{constructor(){super(...arguments),this._maxRadius=1}_afterNew(){super._afterNew(),this.seriesContainer.setAll({x:L,y:L})}_prepareChildren(){super._prepareChildren();const t=this.chartContainer,e=t.innerWidth(),i=t.innerHeight(),s=this.get("startAngle",0),n=this.get("endAngle",0),r=this.get("innerRadius");let o=oi(0,0,s,n,1);const l=e/(o.right-o.left),h=i/(o.bottom-o.top);let d={left:0,right:0,top:0,bottom:0};if(r instanceof O){let c=r.value,p=Math.min(l,h);c=Math.max(p*c,p-Math.min(i,e))/p,d=oi(0,0,s,n,c),this.setPrivateRaw("irModifyer",c/r.value)}o=Xs([o,d]);const f=this._maxRadius;this._maxRadius=Math.min(l,h);const u=X(this.get("radius",0),this._maxRadius);this.seriesContainer.setAll({dy:-u*(o.bottom+o.top)/2,dx:-u*(o.right+o.left)/2}),(this.isDirty("startAngle")||this.isDirty("endAngle")||f!=this._maxRadius)&&this.series.each(c=>{c._markDirtyKey("startAngle")}),(this.isDirty("innerRadius")||this.isDirty("radius"))&&this.series.each(c=>{c._markDirtyKey("innerRadius")})}radius(t){let e=X(this.get("radius",0),this._maxRadius),i=X(this.get("innerRadius",0),e);if(t){let s=this.series.indexOf(t),n=this.series.length,r=t.get("radius");return r!=null?i+X(r,e-i):i+(e-i)/n*(s+1)}return e}innerRadius(t){const e=this.radius();let i=X(this.get("innerRadius",0),e);if(i<0&&(i=e+i),t){let s=this.series.indexOf(t),n=this.series.length,r=t.get("innerRadius");return r!=null?i+X(r,e-i):i+(e-i)/n*s}return i}_updateSize(){super._updateSize(),this.markDirtyKey("radius")}}fi.className="PieChart";fi.classNames=me.classNames.concat([fi.className]);class pi extends ye{_makeSlices(){return new je(Ct.new({}),()=>He._new(this._root,{themeTags:Ae(this.slices.template.get("themeTags",[]),["pie","series"])},[this.slices.template]))}_makeLabels(){return new je(Ct.new({}),()=>Le._new(this._root,{themeTags:Ae(this.labels.template.get("themeTags",[]),["pie","series"])},[this.labels.template]))}_makeTicks(){return new je(Ct.new({}),()=>Oe._new(this._root,{themeTags:Ae(this.ticks.template.get("themeTags",[]),["pie","series"])},[this.ticks.template]))}processDataItem(t){super.processDataItem(t);const e=this.makeSlice(t);e.on("scale",()=>{this._updateTick(t)}),e.on("shiftRadius",()=>{this._updateTick(t)}),e.events.on("positionchanged",()=>{this._updateTick(t)});const i=this.makeLabel(t);i.events.on("positionchanged",()=>{this._updateTick(t)}),this.makeTick(t),e.events.on("positionchanged",()=>{i.markDirty()})}_getNextUp(){const t=this.chart;return t?t._maxRadius:this.labelsContainer.maxHeight()/2}_getNextDown(){const t=this.chart;return t?-t._maxRadius:-this.labelsContainer.maxHeight()/2}_prepareChildren(){super._prepareChildren();const t=this.chart;if(t){if(this.isDirty("alignLabels")){let e=this.labels.template;if(this.get("alignLabels"))e.set("textType","aligned");else{let i=e.get("textType");(i==null||i=="aligned")&&e.set("textType","adjusted")}}if(this._valuesDirty||this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("endAngle")||this.isDirty("alignLabels")){this.markDirtyBounds();const e=this.get("startAngle",t.get("startAngle",-90)),s=this.get("endAngle",t.get("endAngle",270))-e;let n=e;const r=t.radius(this);this.setPrivateRaw("radius",r);let o=t.innerRadius(this)*t.getPrivate("irModifyer",1);o<0&&(o=r+o),b(this._dataItems,l=>{this.updateLegendValue(l);let h=s*l.get("valuePercentTotal")/100;const d=l.get("slice");if(d){d.set("radius",r),d.set("innerRadius",o),d.set("startAngle",n),d.set("arc",h);const c=l.get("fill");d._setDefault("fill",c),d._setDefault("stroke",c);const p=l.get("fillPattern");d._setDefault("fillPattern",p)}let f=vi(n+h/2);const u=l.get("label");if(u&&(u.setPrivate("radius",r),u.setPrivate("innerRadius",o),u.set("labelAngle",f),u.get("textType")=="aligned")){let c=r+u.get("radius",0),p=r*lt(f);f>90&&f<=270?(!u.isHidden()&&!u.isHiding()&&this._lLabels.push({label:u,y:p}),c*=-1,c-=this.labelsContainer.get("paddingLeft",0),u.set("centerX",H),u.setPrivateRaw("left",!0)):(!u.isHidden()&&!u.isHiding()&&this._rLabels.push({label:u,y:p}),c+=this.labelsContainer.get("paddingRight",0),u.set("centerX",0),u.setPrivateRaw("left",!1)),u.set("x",c),u.set("y",r*lt(f))}n+=h,this._updateTick(l)})}}}_updateTick(t){const e=t.get("tick"),i=t.get("label"),s=t.get("slice"),n=e.get("location",1);if(e&&i&&s){const r=(s.get("shiftRadius",0)+s.get("radius",0))*s.get("scale",1)*n,o=i.get("labelAngle",0),l=mt(o),h=lt(o),d=this.labelsContainer,f=d.get("paddingLeft",0),u=d.get("paddingRight",0);let c=0,p=0;c=i.x(),p=i.y();let m=[];if(c!=0||p!=0){if(i.get("textType")=="circular"){const _=i.radius()-i.get("paddingBottom",0),y=i.get("labelAngle",0);c=_*mt(y),p=_*lt(y)}let g=-u;i.getPrivate("left")&&(g=f),m=[{x:s.x()+r*l,y:s.y()+r*h},{x:c+g,y:p},{x:c,y:p}]}e.set("points",m)}}_positionBullet(t){const e=t.get("sprite");if(e){const s=e.dataItem.get("slice");if(s){const n=s.get("innerRadius",0),r=s.get("radius",0),o=s.get("startAngle",0),l=s.get("arc",0),h=t.get("locationX",.5),d=t.get("locationY",.5),f=o+l*h,u=n+(r-n)*d;e.setAll({x:mt(f)*u,y:lt(f)*u})}}}}pi.className="PieSeries";pi.classNames=ye.classNames.concat([pi.className]);class vr extends xi{setupDefaultRules(){super.setupDefaultRules(),this.rule("Component").setAll({interpolationDuration:600}),this.rule("Hierarchy").set("animationDuration",600),this.rule("Scrollbar").set("animationDuration",600),this.rule("Tooltip").set("animationDuration",300),this.rule("MapChart").set("animationDuration",1e3),this.rule("MapChart").set("wheelDuration",300),this.rule("Entity").setAll({stateAnimationDuration:600}),this.rule("Sprite").states.create("default",{stateAnimationDuration:600}),this.rule("Tooltip",["axis"]).setAll({animationDuration:200}),this.rule("WordCloud").set("animationDuration",500),this.rule("Polygon").set("animationDuration",600),this.rule("ArcDiagram").set("animationDuration",600)}}export{_r as $,vr as A,mr as B,W as C,O as D,J as E,It as F,ot as G,U as H,be as I,ki as J,ue as K,Dt as L,Ne as M,ei as N,tt as O,fi as P,fr as Q,ss as R,_e as S,de as T,X as U,ce as V,gi as W,at as X,Cs as Y,q as Z,st as _,pi as a,he as a0,Oe as a1,je as a2,Ct as a3,pr as a4,L as b,di as c,Ut as d,Tt as e,xi as f,Fe as g,S as h,H as i,T as j,_s as k,ds as l,Ae as m,gr as n,qi as o,Pt as p,Mt as q,yr as r,P as s,vt as t,ks as u,bt as v,nr as w,N as x,b as y,hs as z};
